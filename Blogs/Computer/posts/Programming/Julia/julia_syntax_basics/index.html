<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Rui Yang">
<meta name="dcterms.date" content="2024-09-22">

<title>Julia syntax basics – NeuroBorder</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../../../">
<script src="../../../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../../../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../../../../site_libs/quarto-html/quarto-syntax-highlighting-dark-b53751a350365c71b6c909e95f209ed1.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../../../site_libs/bootstrap/bootstrap-7656f4217d0b61e7d1e52c7a113f8883.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../../../../site_libs/bootstrap/bootstrap-dark-0e17766785cb233d275babd160f1f995.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../../../../../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../../../../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../../../../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../../../../../styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../../../../index.html">
    <span class="navbar-title">NeuroBorder</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-blogs" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Blogs</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-blogs">    
        <li>
    <a class="dropdown-item" href="../../../../../../Blogs/Computer/index.html">
 <span class="dropdown-text">Computer</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../../../../Blogs/Mathematics/index.html">
 <span class="dropdown-text">Mathematics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../../../../Blogs/Bioinformatics/index.html">
 <span class="dropdown-text">Bioinformatics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../../../../Blogs/Galaxy/index.html">
 <span class="dropdown-text">Galaxy</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../../../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com/yr-neurospace/NeuroBorder" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-right">
      <h1 class="title">Julia syntax basics</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">syntax</div>
                <div class="quarto-category">julia</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta column-page-right">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Rui Yang </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 22, 2024</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">May 16, 2025</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#julia-pros-and-cons" id="toc-julia-pros-and-cons" class="nav-link active" data-scroll-target="#julia-pros-and-cons"><span class="header-section-number">1</span> Julia pros and cons</a>
  <ul>
  <li><a href="#pros" id="toc-pros" class="nav-link" data-scroll-target="#pros"><span class="header-section-number">1.1</span> Pros</a></li>
  <li><a href="#cons" id="toc-cons" class="nav-link" data-scroll-target="#cons"><span class="header-section-number">1.2</span> Cons</a></li>
  </ul></li>
  <li><a href="#basics" id="toc-basics" class="nav-link" data-scroll-target="#basics"><span class="header-section-number">2</span> Basics</a>
  <ul>
  <li><a href="#arithmetic-operations-and-number-types" id="toc-arithmetic-operations-and-number-types" class="nav-link" data-scroll-target="#arithmetic-operations-and-number-types"><span class="header-section-number">2.1</span> Arithmetic operations and number types</a>
  <ul>
  <li><a href="#arithmetic-operations" id="toc-arithmetic-operations" class="nav-link" data-scroll-target="#arithmetic-operations"><span class="header-section-number">2.1.1</span> Arithmetic operations</a></li>
  <li><a href="#number-types" id="toc-number-types" class="nav-link" data-scroll-target="#number-types"><span class="header-section-number">2.1.2</span> Number types</a></li>
  <li><a href="#arithmetic-operations-for-integers" id="toc-arithmetic-operations-for-integers" class="nav-link" data-scroll-target="#arithmetic-operations-for-integers"><span class="header-section-number">2.1.3</span> Arithmetic operations for integers</a></li>
  </ul></li>
  <li><a href="#variables" id="toc-variables" class="nav-link" data-scroll-target="#variables"><span class="header-section-number">2.2</span> Variables</a></li>
  <li><a href="#relation-and-logical-operations" id="toc-relation-and-logical-operations" class="nav-link" data-scroll-target="#relation-and-logical-operations"><span class="header-section-number">2.3</span> Relation and logical operations</a>
  <ul>
  <li><a href="#relation-operations" id="toc-relation-operations" class="nav-link" data-scroll-target="#relation-operations"><span class="header-section-number">2.3.1</span> Relation operations</a></li>
  <li><a href="#logical-operations" id="toc-logical-operations" class="nav-link" data-scroll-target="#logical-operations"><span class="header-section-number">2.3.2</span> Logical operations</a></li>
  </ul></li>
  <li><a href="#control-flow" id="toc-control-flow" class="nav-link" data-scroll-target="#control-flow"><span class="header-section-number">2.4</span> Control flow</a>
  <ul>
  <li><a href="#comment" id="toc-comment" class="nav-link" data-scroll-target="#comment"><span class="header-section-number">2.4.1</span> Comment</a></li>
  <li><a href="#compound-expressions" id="toc-compound-expressions" class="nav-link" data-scroll-target="#compound-expressions"><span class="header-section-number">2.4.2</span> Compound expressions</a></li>
  <li><a href="#short-circuit-evaluation" id="toc-short-circuit-evaluation" class="nav-link" data-scroll-target="#short-circuit-evaluation"><span class="header-section-number">2.4.3</span> Short-circuit evaluation</a></li>
  <li><a href="#conditional-evaluation" id="toc-conditional-evaluation" class="nav-link" data-scroll-target="#conditional-evaluation"><span class="header-section-number">2.4.4</span> Conditional evaluation</a></li>
  <li><a href="#looping" id="toc-looping" class="nav-link" data-scroll-target="#looping"><span class="header-section-number">2.4.5</span> Looping</a></li>
  <li><a href="#jump-out-of-loops" id="toc-jump-out-of-loops" class="nav-link" data-scroll-target="#jump-out-of-loops"><span class="header-section-number">2.4.6</span> Jump out of loops</a></li>
  </ul></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions"><span class="header-section-number">2.5</span> Functions</a>
  <ul>
  <li><a href="#inline-functions" id="toc-inline-functions" class="nav-link" data-scroll-target="#inline-functions"><span class="header-section-number">2.5.1</span> Inline functions</a></li>
  <li><a href="#multiline-functions" id="toc-multiline-functions" class="nav-link" data-scroll-target="#multiline-functions"><span class="header-section-number">2.5.2</span> Multiline functions</a></li>
  <li><a href="#argument-passing-behaviour" id="toc-argument-passing-behaviour" class="nav-link" data-scroll-target="#argument-passing-behaviour"><span class="header-section-number">2.5.3</span> Argument passing behaviour</a></li>
  <li><a href="#specify-the-type-of-return-value" id="toc-specify-the-type-of-return-value" class="nav-link" data-scroll-target="#specify-the-type-of-return-value"><span class="header-section-number">2.5.4</span> Specify the type of return value</a></li>
  <li><a href="#multiple-assignments-and-multiple-return-values" id="toc-multiple-assignments-and-multiple-return-values" class="nav-link" data-scroll-target="#multiple-assignments-and-multiple-return-values"><span class="header-section-number">2.5.5</span> Multiple assignments and multiple return values</a></li>
  <li><a href="#parameter-types" id="toc-parameter-types" class="nav-link" data-scroll-target="#parameter-types"><span class="header-section-number">2.5.6</span> Parameter types</a></li>
  <li><a href="#anonymous-functions" id="toc-anonymous-functions" class="nav-link" data-scroll-target="#anonymous-functions"><span class="header-section-number">2.5.7</span> Anonymous functions</a>
  <ul>
  <li><a href="#do-blocks" id="toc-do-blocks" class="nav-link" data-scroll-target="#do-blocks"><span class="header-section-number">2.5.7.1</span> <code>do</code> blocks</a></li>
  </ul></li>
  <li><a href="#the-splat-operator-..." id="toc-the-splat-operator-..." class="nav-link" data-scroll-target="#the-splat-operator-..."><span class="header-section-number">2.5.8</span> The splat operator <code>...</code></a></li>
  <li><a href="#closure" id="toc-closure" class="nav-link" data-scroll-target="#closure"><span class="header-section-number">2.5.9</span> Closure</a></li>
  <li><a href="#partial-function-application" id="toc-partial-function-application" class="nav-link" data-scroll-target="#partial-function-application"><span class="header-section-number">2.5.10</span> Partial function application</a></li>
  <li><a href="#function-composition-vectorization-and-piping" id="toc-function-composition-vectorization-and-piping" class="nav-link" data-scroll-target="#function-composition-vectorization-and-piping"><span class="header-section-number">2.5.11</span> Function composition, vectorization and piping</a>
  <ul>
  <li><a href="#function-composition" id="toc-function-composition" class="nav-link" data-scroll-target="#function-composition"><span class="header-section-number">2.5.11.1</span> Function composition</a></li>
  <li><a href="#dot-syntax-for-vectorizing-functions" id="toc-dot-syntax-for-vectorizing-functions" class="nav-link" data-scroll-target="#dot-syntax-for-vectorizing-functions"><span class="header-section-number">2.5.11.2</span> Dot syntax for vectorizing functions</a></li>
  <li><a href="#function-piping" id="toc-function-piping" class="nav-link" data-scroll-target="#function-piping"><span class="header-section-number">2.5.11.3</span> Function piping</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#exception" id="toc-exception" class="nav-link" data-scroll-target="#exception"><span class="header-section-number">2.6</span> Exception</a></li>
  <li><a href="#metaprogramming" id="toc-metaprogramming" class="nav-link" data-scroll-target="#metaprogramming"><span class="header-section-number">2.7</span> Metaprogramming</a>
  <ul>
  <li><a href="#program-representation" id="toc-program-representation" class="nav-link" data-scroll-target="#program-representation"><span class="header-section-number">2.7.1</span> Program representation</a></li>
  <li><a href="#expressions-and-evaluation" id="toc-expressions-and-evaluation" class="nav-link" data-scroll-target="#expressions-and-evaluation"><span class="header-section-number">2.7.2</span> Expressions and evaluation</a>
  <ul>
  <li><a href="#expressions" id="toc-expressions" class="nav-link" data-scroll-target="#expressions"><span class="header-section-number">2.7.2.1</span> Expressions</a></li>
  <li><a href="#evaluation" id="toc-evaluation" class="nav-link" data-scroll-target="#evaluation"><span class="header-section-number">2.7.2.2</span> Evaluation</a></li>
  </ul></li>
  <li><a href="#code-generation" id="toc-code-generation" class="nav-link" data-scroll-target="#code-generation"><span class="header-section-number">2.7.3</span> Code generation</a></li>
  <li><a href="#macros" id="toc-macros" class="nav-link" data-scroll-target="#macros"><span class="header-section-number">2.7.4</span> Macros</a></li>
  <li><a href="#non-standard-string-and-command-literals" id="toc-non-standard-string-and-command-literals" class="nav-link" data-scroll-target="#non-standard-string-and-command-literals"><span class="header-section-number">2.7.5</span> Non-standard string and command literals</a></li>
  <li><a href="#generated-functions" id="toc-generated-functions" class="nav-link" data-scroll-target="#generated-functions"><span class="header-section-number">2.7.6</span> Generated functions</a></li>
  </ul></li>
  <li><a href="#types" id="toc-types" class="nav-link" data-scroll-target="#types"><span class="header-section-number">2.8</span> Types</a>
  <ul>
  <li><a href="#basics-1" id="toc-basics-1" class="nav-link" data-scroll-target="#basics-1"><span class="header-section-number">2.8.1</span> Basics</a></li>
  <li><a href="#multiple-dispatch" id="toc-multiple-dispatch" class="nav-link" data-scroll-target="#multiple-dispatch"><span class="header-section-number">2.8.2</span> Multiple dispatch</a>
  <ul>
  <li><a href="#how-does-multiple-dispatch-work" id="toc-how-does-multiple-dispatch-work" class="nav-link" data-scroll-target="#how-does-multiple-dispatch-work"><span class="header-section-number">2.8.2.1</span> How does multiple dispatch work</a></li>
  <li><a href="#the-way-julia-selects-the-correct-method-of-a-function-for-each-situation" id="toc-the-way-julia-selects-the-correct-method-of-a-function-for-each-situation" class="nav-link" data-scroll-target="#the-way-julia-selects-the-correct-method-of-a-function-for-each-situation"><span class="header-section-number">2.8.2.2</span> The way Julia selects the correct method of a function for each situation</a></li>
  </ul></li>
  <li><a href="#conversion-and-promotion" id="toc-conversion-and-promotion" class="nav-link" data-scroll-target="#conversion-and-promotion"><span class="header-section-number">2.8.3</span> Conversion and promotion</a>
  <ul>
  <li><a href="#why-do-we-need-type-promotion" id="toc-why-do-we-need-type-promotion" class="nav-link" data-scroll-target="#why-do-we-need-type-promotion"><span class="header-section-number">2.8.3.1</span> Why do we need type promotion</a></li>
  <li><a href="#how-does-type-promotion-work" id="toc-how-does-type-promotion-work" class="nav-link" data-scroll-target="#how-does-type-promotion-work"><span class="header-section-number">2.8.3.2</span> How does type promotion work</a></li>
  <li><a href="#how-does-conversion-work" id="toc-how-does-conversion-work" class="nav-link" data-scroll-target="#how-does-conversion-work"><span class="header-section-number">2.8.3.3</span> How does conversion work</a></li>
  <li><a href="#an-example-extending-the-type-system" id="toc-an-example-extending-the-type-system" class="nav-link" data-scroll-target="#an-example-extending-the-type-system"><span class="header-section-number">2.8.3.4</span> An example extending the type system</a>
  <ul class="collapse">
  <li><a href="#defining-unit-types-and-constructors" id="toc-defining-unit-types-and-constructors" class="nav-link" data-scroll-target="#defining-unit-types-and-constructors"><span class="header-section-number">2.8.3.4.1</span> Defining unit types and constructors</a></li>
  <li><a href="#defining-accessors" id="toc-defining-accessors" class="nav-link" data-scroll-target="#defining-accessors"><span class="header-section-number">2.8.3.4.2</span> Defining accessors</a></li>
  <li><a href="#displaying-angles" id="toc-displaying-angles" class="nav-link" data-scroll-target="#displaying-angles"><span class="header-section-number">2.8.3.4.3</span> Displaying angles</a></li>
  <li><a href="#defining-type-conversions" id="toc-defining-type-conversions" class="nav-link" data-scroll-target="#defining-type-conversions"><span class="header-section-number">2.8.3.4.4</span> Defining type conversions</a></li>
  <li><a href="#defining-type-promotions" id="toc-defining-type-promotions" class="nav-link" data-scroll-target="#defining-type-promotions"><span class="header-section-number">2.8.3.4.5</span> Defining type promotions</a></li>
  <li><a href="#defining-arithmetic-operations" id="toc-defining-arithmetic-operations" class="nav-link" data-scroll-target="#defining-arithmetic-operations"><span class="header-section-number">2.8.3.4.6</span> Defining arithmetic operations</a></li>
  <li><a href="#making-pretty-literals-by-using-literal-coefficients" id="toc-making-pretty-literals-by-using-literal-coefficients" class="nav-link" data-scroll-target="#making-pretty-literals-by-using-literal-coefficients"><span class="header-section-number">2.8.3.4.7</span> Making pretty literals by using literal coefficients</a></li>
  <li><a href="#overriding-standard-sin-and-cos-functions-to-only-accept-dms-and-radian" id="toc-overriding-standard-sin-and-cos-functions-to-only-accept-dms-and-radian" class="nav-link" data-scroll-target="#overriding-standard-sin-and-cos-functions-to-only-accept-dms-and-radian"><span class="header-section-number">2.8.3.4.8</span> Overriding standard <code>sin()</code> and <code>cos()</code> functions to only accept <code>DMS</code> and <code>Radian</code></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#representing-unknown-values" id="toc-representing-unknown-values" class="nav-link" data-scroll-target="#representing-unknown-values"><span class="header-section-number">2.8.4</span> Representing unknown values</a>
  <ul>
  <li><a href="#to-solve-infinite-chain-of-initialization-using-parametric-type" id="toc-to-solve-infinite-chain-of-initialization-using-parametric-type" class="nav-link" data-scroll-target="#to-solve-infinite-chain-of-initialization-using-parametric-type"><span class="header-section-number">2.8.4.1</span> To solve infinite chain of initialization using parametric type</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#collections" id="toc-collections" class="nav-link" data-scroll-target="#collections"><span class="header-section-number">2.9</span> Collections</a>
  <ul>
  <li><a href="#strings" id="toc-strings" class="nav-link" data-scroll-target="#strings"><span class="header-section-number">2.9.1</span> Strings</a>
  <ul>
  <li><a href="#unicode-and-utf-8" id="toc-unicode-and-utf-8" class="nav-link" data-scroll-target="#unicode-and-utf-8"><span class="header-section-number">2.9.1.1</span> Unicode and UTF-8</a></li>
  <li><a href="#string-indexing" id="toc-string-indexing" class="nav-link" data-scroll-target="#string-indexing"><span class="header-section-number">2.9.1.2</span> String indexing</a></li>
  <li><a href="#string-operations" id="toc-string-operations" class="nav-link" data-scroll-target="#string-operations"><span class="header-section-number">2.9.1.3</span> String operations</a></li>
  <li><a href="#nonstandard-string-literals" id="toc-nonstandard-string-literals" class="nav-link" data-scroll-target="#nonstandard-string-literals"><span class="header-section-number">2.9.1.4</span> Nonstandard string literals</a></li>
  </ul></li>
  <li><a href="#arrays" id="toc-arrays" class="nav-link" data-scroll-target="#arrays"><span class="header-section-number">2.9.2</span> Arrays</a>
  <ul>
  <li><a href="#types-of-arrays" id="toc-types-of-arrays" class="nav-link" data-scroll-target="#types-of-arrays"><span class="header-section-number">2.9.2.1</span> Types of arrays</a></li>
  <li><a href="#creating-arrays-by-specific-functions" id="toc-creating-arrays-by-specific-functions" class="nav-link" data-scroll-target="#creating-arrays-by-specific-functions"><span class="header-section-number">2.9.2.2</span> Creating arrays by specific functions</a></li>
  <li><a href="#accessing-array-attributes" id="toc-accessing-array-attributes" class="nav-link" data-scroll-target="#accessing-array-attributes"><span class="header-section-number">2.9.2.3</span> Accessing array attributes</a></li>
  <li><a href="#operartions-on-arrays" id="toc-operartions-on-arrays" class="nav-link" data-scroll-target="#operartions-on-arrays"><span class="header-section-number">2.9.2.4</span> Operartions on arrays</a></li>
  <li><a href="#slicing-and-dicing-an-array" id="toc-slicing-and-dicing-an-array" class="nav-link" data-scroll-target="#slicing-and-dicing-an-array"><span class="header-section-number">2.9.2.5</span> Slicing and dicing an array</a></li>
  <li><a href="#combining-arrays" id="toc-combining-arrays" class="nav-link" data-scroll-target="#combining-arrays"><span class="header-section-number">2.9.2.6</span> Combining arrays</a></li>
  </ul></li>
  <li><a href="#tuples" id="toc-tuples" class="nav-link" data-scroll-target="#tuples"><span class="header-section-number">2.9.3</span> Tuples</a>
  <ul>
  <li><a href="#named-tuples" id="toc-named-tuples" class="nav-link" data-scroll-target="#named-tuples"><span class="header-section-number">2.9.3.1</span> Named tuples</a></li>
  </ul></li>
  <li><a href="#dictionaries" id="toc-dictionaries" class="nav-link" data-scroll-target="#dictionaries"><span class="header-section-number">2.9.4</span> Dictionaries</a>
  <ul>
  <li><a href="#creating-a-dictionary" id="toc-creating-a-dictionary" class="nav-link" data-scroll-target="#creating-a-dictionary"><span class="header-section-number">2.9.4.1</span> Creating a dictionary</a></li>
  <li><a href="#accessing-elements" id="toc-accessing-elements" class="nav-link" data-scroll-target="#accessing-elements"><span class="header-section-number">2.9.4.2</span> Accessing elements</a></li>
  </ul></li>
  <li><a href="#sets" id="toc-sets" class="nav-link" data-scroll-target="#sets"><span class="header-section-number">2.9.5</span> Sets</a></li>
  <li><a href="#collection-comprehension" id="toc-collection-comprehension" class="nav-link" data-scroll-target="#collection-comprehension"><span class="header-section-number">2.9.6</span> Collection comprehension</a></li>
  <li><a href="#generator" id="toc-generator" class="nav-link" data-scroll-target="#generator"><span class="header-section-number">2.9.7</span> Generator</a></li>
  <li><a href="#enumerating-values-and-indices" id="toc-enumerating-values-and-indices" class="nav-link" data-scroll-target="#enumerating-values-and-indices"><span class="header-section-number">2.9.8</span> Enumerating values and indices</a></li>
  <li><a href="#creating-an-enum-type-with-enum-macro" id="toc-creating-an-enum-type-with-enum-macro" class="nav-link" data-scroll-target="#creating-an-enum-type-with-enum-macro"><span class="header-section-number">2.9.9</span> Creating an <code>enum</code> type with <code>@enum</code> macro</a></li>
  <li><a href="#understanding-julia-collections" id="toc-understanding-julia-collections" class="nav-link" data-scroll-target="#understanding-julia-collections"><span class="header-section-number">2.9.10</span> Understanding Julia collections</a>
  <ul>
  <li><a href="#what-makes-something-a-collection" id="toc-what-makes-something-a-collection" class="nav-link" data-scroll-target="#what-makes-something-a-collection"><span class="header-section-number">2.9.10.1</span> What makes something a collection</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#functional-programming" id="toc-functional-programming" class="nav-link" data-scroll-target="#functional-programming"><span class="header-section-number">2.10</span> Functional programming</a>
  <ul>
  <li><a href="#higher-order-functions" id="toc-higher-order-functions" class="nav-link" data-scroll-target="#higher-order-functions"><span class="header-section-number">2.10.1</span> Higher order functions</a></li>
  </ul></li>
  <li><a href="#io-networking-and-streams" id="toc-io-networking-and-streams" class="nav-link" data-scroll-target="#io-networking-and-streams"><span class="header-section-number">2.11</span> I/O (Networking and Streams)</a>
  <ul>
  <li><a href="#io-types" id="toc-io-types" class="nav-link" data-scroll-target="#io-types"><span class="header-section-number">2.11.1</span> I/O types</a></li>
  <li><a href="#stream-io" id="toc-stream-io" class="nav-link" data-scroll-target="#stream-io"><span class="header-section-number">2.11.2</span> Stream I/O</a></li>
  <li><a href="#text-io" id="toc-text-io" class="nav-link" data-scroll-target="#text-io"><span class="header-section-number">2.11.3</span> Text I/O</a></li>
  <li><a href="#io-output-contextual-properties" id="toc-io-output-contextual-properties" class="nav-link" data-scroll-target="#io-output-contextual-properties"><span class="header-section-number">2.11.4</span> I/O output contextual properties</a></li>
  <li><a href="#working-with-files" id="toc-working-with-files" class="nav-link" data-scroll-target="#working-with-files"><span class="header-section-number">2.11.5</span> Working with files</a></li>
  <li><a href="#working-with-networking" id="toc-working-with-networking" class="nav-link" data-scroll-target="#working-with-networking"><span class="header-section-number">2.11.6</span> Working with networking</a>
  <ul>
  <li><a href="#tcp-transmission-control-protocol" id="toc-tcp-transmission-control-protocol" class="nav-link" data-scroll-target="#tcp-transmission-control-protocol"><span class="header-section-number">2.11.6.1</span> TCP (Transmission Control Protocol)</a></li>
  <li><a href="#udp-user-datagram-protocol" id="toc-udp-user-datagram-protocol" class="nav-link" data-scroll-target="#udp-user-datagram-protocol"><span class="header-section-number">2.11.6.2</span> UDP (User Datagram Protocol)</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#parametric-types" id="toc-parametric-types" class="nav-link" data-scroll-target="#parametric-types"><span class="header-section-number">2.12</span> Parametric types</a>
  <ul>
  <li><a href="#defining-parametric-methods" id="toc-defining-parametric-methods" class="nav-link" data-scroll-target="#defining-parametric-methods"><span class="header-section-number">2.12.1</span> Defining parametric methods</a></li>
  <li><a href="#defining-parametric-types" id="toc-defining-parametric-types" class="nav-link" data-scroll-target="#defining-parametric-types"><span class="header-section-number">2.12.2</span> Defining parametric types</a></li>
  </ul></li>
  <li><a href="#scope-of-variables" id="toc-scope-of-variables" class="nav-link" data-scroll-target="#scope-of-variables"><span class="header-section-number">2.13</span> Scope of variables</a>
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">2.13.1</span> Introduction</a></li>
  <li><a href="#scope-constructs" id="toc-scope-constructs" class="nav-link" data-scroll-target="#scope-constructs"><span class="header-section-number">2.13.2</span> Scope constructs</a></li>
  <li><a href="#global-scope" id="toc-global-scope" class="nav-link" data-scroll-target="#global-scope"><span class="header-section-number">2.13.3</span> Global scope</a></li>
  <li><a href="#local-scope" id="toc-local-scope" class="nav-link" data-scroll-target="#local-scope"><span class="header-section-number">2.13.4</span> Local scope</a></li>
  <li><a href="#let-blocks" id="toc-let-blocks" class="nav-link" data-scroll-target="#let-blocks"><span class="header-section-number">2.13.5</span> <code>let</code> blocks</a></li>
  <li><a href="#loops" id="toc-loops" class="nav-link" data-scroll-target="#loops"><span class="header-section-number">2.13.6</span> Loops</a></li>
  <li><a href="#constants" id="toc-constants" class="nav-link" data-scroll-target="#constants"><span class="header-section-number">2.13.7</span> Constants</a></li>
  <li><a href="#typed-globals" id="toc-typed-globals" class="nav-link" data-scroll-target="#typed-globals"><span class="header-section-number">2.13.8</span> Typed globals</a></li>
  </ul></li>
  <li><a href="#parallel-computing" id="toc-parallel-computing" class="nav-link" data-scroll-target="#parallel-computing"><span class="header-section-number">2.14</span> Parallel computing</a>
  <ul>
  <li><a href="#asynchronous-tasks" id="toc-asynchronous-tasks" class="nav-link" data-scroll-target="#asynchronous-tasks"><span class="header-section-number">2.14.1</span> Asynchronous tasks</a></li>
  <li><a href="#multi-threading" id="toc-multi-threading" class="nav-link" data-scroll-target="#multi-threading"><span class="header-section-number">2.14.2</span> Multi-threading</a>
  <ul>
  <li><a href="#starting-julia-with-multiple-threads" id="toc-starting-julia-with-multiple-threads" class="nav-link" data-scroll-target="#starting-julia-with-multiple-threads"><span class="header-section-number">2.14.2.1</span> Starting Julia with multiple threads</a></li>
  <li><a href="#thread-pools" id="toc-thread-pools" class="nav-link" data-scroll-target="#thread-pools"><span class="header-section-number">2.14.2.2</span> Thread pools</a></li>
  <li><a href="#spawning-threads" id="toc-spawning-threads" class="nav-link" data-scroll-target="#spawning-threads"><span class="header-section-number">2.14.2.3</span> Spawning threads</a></li>
  <li><a href="#avoiding-data-race" id="toc-avoiding-data-race" class="nav-link" data-scroll-target="#avoiding-data-race"><span class="header-section-number">2.14.2.4</span> Avoiding data race</a></li>
  </ul></li>
  <li><a href="#multi-processing-and-distributed-computing" id="toc-multi-processing-and-distributed-computing" class="nav-link" data-scroll-target="#multi-processing-and-distributed-computing"><span class="header-section-number">2.14.3</span> Multi-processing and Distributed computing</a>
  <ul>
  <li><a href="#starting-and-managing-multiple-processes" id="toc-starting-and-managing-multiple-processes" class="nav-link" data-scroll-target="#starting-and-managing-multiple-processes"><span class="header-section-number">2.14.3.1</span> Starting and managing multiple processes</a></li>
  <li><a href="#starting-distributed-programming" id="toc-starting-distributed-programming" class="nav-link" data-scroll-target="#starting-distributed-programming"><span class="header-section-number">2.14.3.2</span> Starting distributed programming</a></li>
  <li><a href="#code-and-data-availability" id="toc-code-and-data-availability" class="nav-link" data-scroll-target="#code-and-data-availability"><span class="header-section-number">2.14.3.3</span> Code and data availability</a></li>
  <li><a href="#parallel-loops-and-map" id="toc-parallel-loops-and-map" class="nav-link" data-scroll-target="#parallel-loops-and-map"><span class="header-section-number">2.14.3.4</span> Parallel loops and map</a></li>
  <li><a href="#noteworthy-external-parallel-packages" id="toc-noteworthy-external-parallel-packages" class="nav-link" data-scroll-target="#noteworthy-external-parallel-packages"><span class="header-section-number">2.14.3.5</span> Noteworthy external parallel packages</a></li>
  </ul></li>
  <li><a href="#running-external-programs" id="toc-running-external-programs" class="nav-link" data-scroll-target="#running-external-programs"><span class="header-section-number">2.14.4</span> Running external programs</a>
  <ul>
  <li><a href="#creating-cmd-objects" id="toc-creating-cmd-objects" class="nav-link" data-scroll-target="#creating-cmd-objects"><span class="header-section-number">2.14.4.1</span> Creating <code>Cmd</code> objects</a></li>
  <li><a href="#running-cmd-objects" id="toc-running-cmd-objects" class="nav-link" data-scroll-target="#running-cmd-objects"><span class="header-section-number">2.14.4.2</span> Running <code>Cmd</code> objects</a></li>
  <li><a href="#command-interpolation" id="toc-command-interpolation" class="nav-link" data-scroll-target="#command-interpolation"><span class="header-section-number">2.14.4.3</span> Command interpolation</a></li>
  <li><a href="#quoting" id="toc-quoting" class="nav-link" data-scroll-target="#quoting"><span class="header-section-number">2.14.4.4</span> Quoting</a></li>
  <li><a href="#pipelines" id="toc-pipelines" class="nav-link" data-scroll-target="#pipelines"><span class="header-section-number">2.14.4.5</span> Pipelines</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  <li><a href="#julia-documentation-system" id="toc-julia-documentation-system" class="nav-link" data-scroll-target="#julia-documentation-system"><span class="header-section-number">3</span> Julia documentation system</a></li>
  <li><a href="#modules-and-pakcages" id="toc-modules-and-pakcages" class="nav-link" data-scroll-target="#modules-and-pakcages"><span class="header-section-number">4</span> Modules and Pakcages</a>
  <ul>
  <li><a href="#modules" id="toc-modules" class="nav-link" data-scroll-target="#modules"><span class="header-section-number">4.1</span> Modules</a>
  <ul>
  <li><a href="#namespace-management" id="toc-namespace-management" class="nav-link" data-scroll-target="#namespace-management"><span class="header-section-number">4.1.1</span> Namespace management</a>
  <ul>
  <li><a href="#qualified-names" id="toc-qualified-names" class="nav-link" data-scroll-target="#qualified-names"><span class="header-section-number">4.1.1.1</span> Qualified names</a></li>
  <li><a href="#export-lists" id="toc-export-lists" class="nav-link" data-scroll-target="#export-lists"><span class="header-section-number">4.1.1.2</span> Export lists</a></li>
  <li><a href="#using-and-import" id="toc-using-and-import" class="nav-link" data-scroll-target="#using-and-import"><span class="header-section-number">4.1.1.3</span> <code>using</code> and <code>import</code></a></li>
  </ul></li>
  <li><a href="#how-does-julia-find-a-module" id="toc-how-does-julia-find-a-module" class="nav-link" data-scroll-target="#how-does-julia-find-a-module"><span class="header-section-number">4.1.2</span> How does Julia find a module</a></li>
  </ul></li>
  <li><a href="#standard-modules" id="toc-standard-modules" class="nav-link" data-scroll-target="#standard-modules"><span class="header-section-number">4.2</span> Standard modules</a></li>
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages"><span class="header-section-number">4.3</span> Packages</a></li>
  <li><a href="#organizing-your-code-into-modules-and-packages" id="toc-organizing-your-code-into-modules-and-packages" class="nav-link" data-scroll-target="#organizing-your-code-into-modules-and-packages"><span class="header-section-number">4.4</span> Organizing your code into modules and packages</a>
  <ul>
  <li><a href="#setting-up-your-working-environment" id="toc-setting-up-your-working-environment" class="nav-link" data-scroll-target="#setting-up-your-working-environment"><span class="header-section-number">4.4.1</span> Setting up your working environment</a></li>
  <li><a href="#creating-your-own-module-and-package" id="toc-creating-your-own-module-and-package" class="nav-link" data-scroll-target="#creating-your-own-module-and-package"><span class="header-section-number">4.4.2</span> Creating your own module and package</a></li>
  <li><a href="#testing-your-package" id="toc-testing-your-package" class="nav-link" data-scroll-target="#testing-your-package"><span class="header-section-number">4.4.3</span> Testing your package</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#appendices" id="toc-appendices" class="nav-link" data-scroll-target="#appendices"><span class="header-section-number">5</span> Appendices</a>
  <ul>
  <li><a href="#heap-and-stack" id="toc-heap-and-stack" class="nav-link" data-scroll-target="#heap-and-stack"><span class="header-section-number">5.1</span> Heap and Stack</a></li>
  <li><a href="#julia-installation-and-configuration" id="toc-julia-installation-and-configuration" class="nav-link" data-scroll-target="#julia-installation-and-configuration"><span class="header-section-number">5.2</span> Julia installation and configuration</a></li>
  <li><a href="#julia-repl-mode" id="toc-julia-repl-mode" class="nav-link" data-scroll-target="#julia-repl-mode"><span class="header-section-number">5.3</span> Julia REPL mode</a></li>
  <li><a href="#installing-third-party-packages" id="toc-installing-third-party-packages" class="nav-link" data-scroll-target="#installing-third-party-packages"><span class="header-section-number">5.4</span> Installing third-party packages</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/yr-neurospace/NeuroBorder/edit/main/Blogs/Computer/posts/Programming/Julia/julia_syntax_basics/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/yr-neurospace/NeuroBorder/blob/main/Blogs/Computer/posts/Programming/Julia/julia_syntax_basics/index.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/yr-neurospace/NeuroBorder/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page-right" id="quarto-document-content">





<section id="julia-pros-and-cons" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="julia-pros-and-cons"><span class="header-section-number">1</span> Julia pros and cons</h2>
<section id="pros" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="pros"><span class="header-section-number">1.1</span> Pros</h3>
<ul>
<li>Interactive programming</li>
</ul>
<p>Julia is a dynamically typed language, in contrast with statically typed languages.</p>
<ul>
<li>High performance</li>
</ul>
<p>Julia uses just-in-time compilation (JIT), compilation at run time.</p>
<p>Typically, JIT continuously analyses the code being executed and identifies parts of the code where the speedup gained from compilation or recompilation would outweigh the overhead of compiling that code.</p>
<p>Therefore, JIT combines advantages of ahead-of-time compilation (AOT, compilation before execution) and interpretation.</p>
<p>Due to the ecosystem of packages, Julia is really suitable for scientific computing, but it can also be used as a general-purpose programming language.</p>
</section>
<section id="cons" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="cons"><span class="header-section-number">1.2</span> Cons</h3>
<p>Julia starts more slowly than Python, R, etc. but begins to run faster once the JIT compiler has converted critical parts of the code to machine code; thus it’s not suitable for:</p>
<ul>
<li><p>Programming small, short-running scripts.</p></li>
<li><p>Real-time systems (Julia implements automatic garbage collection, which tends to introduce small random delays).</p></li>
<li><p>System programming (it needs detailed control of resource usage).</p></li>
<li><p>Embedded systems with limited memory.</p></li>
</ul>
</section>
</section>
<section id="basics" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="basics"><span class="header-section-number">2</span> Basics</h2>
<section id="arithmetic-operations-and-number-types" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="arithmetic-operations-and-number-types"><span class="header-section-number">2.1</span> Arithmetic operations and number types</h3>
<section id="arithmetic-operations" class="level4" data-number="2.1.1">
<h4 data-number="2.1.1" class="anchored" data-anchor-id="arithmetic-operations"><span class="header-section-number">2.1.1</span> Arithmetic operations</h4>
<p>Addition, subtraction, multiplication, division, and power: <code>+ - * / ^</code>.</p>
</section>
<section id="number-types" class="level4" data-number="2.1.2">
<h4 data-number="2.1.2" class="anchored" data-anchor-id="number-types"><span class="header-section-number">2.1.2</span> Number types</h4>
<ul>
<li><p>Signed integers: <code>Int8</code>, <code>Int16</code>, <code>Int32</code>, <code>Int64</code> (default), <code>Int128</code>, <code>BigInt</code>.</p></li>
<li><p>Unsigned integers: <code>UInt8</code>, <code>UInt16</code>, <code>UInt32</code>, <code>UInt64</code>, <code>UInt128</code>.</p></li>
</ul>
<p>You can check the minimum and maximum values of a certain integer type with <code>typemin()</code> and <code>typemax()</code>.</p>
<p>You can check the type of the input argument with <code>typeof()</code>.</p>
<p>Julia defaults to showing all signed integers in decimal format, and all unsigned integers in hexadecimal format.</p>
<p>In fact, what is stored in memory is no difference. The only difference is how to interpret it. You can use the <code>reinterpret()</code> function to see how the exactly same bits in memory can be interpreted differently.</p>
<ul>
<li>Floating-point numbers: <code>Float16</code>, <code>Float32</code>, <code>Float64</code> (default).</li>
</ul>
<p>You can type a <code>Float32</code> number by suffixing <code>f0</code>: <code>3.14f0</code>.</p>
<ul>
<li><p><code>Rational</code> type: <code>2 // 5</code> represents a rational number <span class="math inline">\(\frac{2}{5}\)</span>.</p></li>
<li><p><code>Complex</code> type: <code>1 + 2im</code>.</p></li>
</ul>
</section>
<section id="arithmetic-operations-for-integers" class="level4" data-number="2.1.3">
<h4 data-number="2.1.3" class="anchored" data-anchor-id="arithmetic-operations-for-integers"><span class="header-section-number">2.1.3</span> Arithmetic operations for integers</h4>
<ul>
<li><code>/</code> always gives floating-point number</li>
</ul>
<div id="7b9791e4" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fl">4</span> <span class="op">/</span> <span class="fl">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>2.0</code></pre>
</div>
</div>
<ul>
<li><code>÷</code> or <code>div()</code> gives the quotient</li>
</ul>
<div id="37848fdb" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fl">5</span> <span class="op">÷</span> <span class="fl">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>1</code></pre>
</div>
</div>
<div id="0cbb2f19" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">div</span>(<span class="fl">5</span>, <span class="fl">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>1</code></pre>
</div>
</div>
<ul>
<li><code>%</code> or <code>rem()</code> gives the remainder</li>
</ul>
<div id="d2dfe5b3" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fl">5</span> <span class="op">%</span> <span class="fl">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>2</code></pre>
</div>
</div>
<div id="63694f9d" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rem</span>(<span class="fl">5</span>, <span class="fl">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>2</code></pre>
</div>
</div>
<ul>
<li><code>divrem()</code> gives both quotient and remainder</li>
</ul>
<div id="d838766c" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">divrem</span>(<span class="fl">5</span>, <span class="fl">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>(1, 2)</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Typically, operations on the same type of values always give the same type of value, even though overflow may occur.</p>
<p>Even though overflow will occur, Julia won’t give any prompt.</p>
</div>
</div>
</section>
</section>
<section id="variables" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="variables"><span class="header-section-number">2.2</span> Variables</h3>
<p>In julia, identifiers can be used to give names to constants, variables, types, and functions.</p>
<p>Variables defining memory addresses where values are stored, are only references to values, because Julia allocates memory based on values, not variables.</p>
<p>In comparison with this, statically typed languages allocate memory based on variables, so you must first decalre the type of a variable (e.g., <code>int</code>) before using it, which will allocate a predefined size (which depends on the type of the variable) in a predefined location in memory to this variable. As a consequence, you should never attempt to assign a value that cannot fit inside the memory slot set aside for the variable to this variable.</p>
<ol type="1">
<li>The equal sign (<code>=</code>) operator is used to assign values to variables (i.e., let a variable point to a value):</li>
</ol>
<div id="521fb752" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fl">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>1</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Allowed variable names:</li>
</ol>
<ul>
<li><p>Leading characters: letters, underscore, Unicode code points greater than 00A0.</p></li>
<li><p>Subsequent characters: other Unicode code points.</p></li>
<li><p>Variable names containing only underscores can only be assigned values, which are immediately discarded.</p></li>
<li><p>Explicitly disallowed variable names: built-in keywords.</p></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>To type many special characters, like Unicode math symbols, you can type the backslashed LaTeX symbol name followed by tab.</p>
<p>If you find a symbol elsewhere, which you don’t know how to type, the REPL help will tell you: just type ? and then paste the symbol.</p>
</div>
</div>
<ol start="3" type="1">
<li>My own rules for clarity:</li>
</ol>
<ul>
<li><p>Can only contain letters, underscore, and numbers.</p></li>
<li><p>Can only start with letters.</p></li>
</ul>
<ol start="4" type="1">
<li>Two special variables:</li>
</ol>
<ul>
<li>Constants: defined with the <code>const</code> keyword.</li>
</ul>
<div id="e131ef2d" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> my_pi <span class="op">=</span> <span class="fl">3.14</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>3.14</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can still assign a new value <strong>with the same type as the original one</strong> to a constant, but a warning is printed.</p>
</div>
</div>
<ul>
<li>The <code>ans</code> variable: in interactive mode, Julia REPL assigns the value of the last expression to the <code>ans</code> (answer) variable.</li>
</ul>
<ol start="5" type="1">
<li>Literal coefficient</li>
</ol>
<p>In mathematics, <code>3×x + 2×y</code> may be written as <code>3x + 2y</code>. Julia lets you write a multiplication in the same manner. We refer to this as literal coefficient, which is a shorthand for multiplication between <strong>a number literal</strong> and <strong>a constant or variable</strong>:</p>
<div id="8223b812" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fl">3</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fl">2</span>x</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fl">2</span><span class="fu">*</span>(<span class="fl">3</span><span class="op">+</span><span class="fl">2</span>)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fl">2</span>(<span class="fl">3</span><span class="op">+</span><span class="fl">2</span>)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="fl">2</span><span class="op">*</span><span class="cn">π</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="fl">2</span>π</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="relation-and-logical-operations" class="level3" data-number="2.3">
<h3 data-number="2.3" class="anchored" data-anchor-id="relation-and-logical-operations"><span class="header-section-number">2.3</span> Relation and logical operations</h3>
<section id="relation-operations" class="level4" data-number="2.3.1">
<h4 data-number="2.3.1" class="anchored" data-anchor-id="relation-operations"><span class="header-section-number">2.3.1</span> Relation operations</h4>
<p><code>==, != or ≠, &lt;, &gt;, &lt;= or ≤, &gt;= or ≥</code></p>
<p>The operation result is <code>true</code> or <code>false</code>, which is <code>Bool</code> type.</p>
</section>
<section id="logical-operations" class="level4" data-number="2.3.2">
<h4 data-number="2.3.2" class="anchored" data-anchor-id="logical-operations"><span class="header-section-number">2.3.2</span> Logical operations</h4>
<p><code>&amp;&amp;, ||, !</code></p>
<p>The logical evaluation is lazy.</p>
<p>Suppose <code>i = 10</code>, and then <code>1 &lt;= i &lt;= 100</code> is equivalent to <code>i &gt;= 1 &amp;&amp; i &lt;= 100</code>.</p>
</section>
</section>
<section id="control-flow" class="level3" data-number="2.4">
<h3 data-number="2.4" class="anchored" data-anchor-id="control-flow"><span class="header-section-number">2.4</span> Control flow</h3>
<section id="comment" class="level4" data-number="2.4.1">
<h4 data-number="2.4.1" class="anchored" data-anchor-id="comment"><span class="header-section-number">2.4.1</span> Comment</h4>
<p>In Julial, you can give an inline comment by using <code>#</code>, or multiline comment by using <code>#=...=#</code>.</p>
</section>
<section id="compound-expressions" class="level4" data-number="2.4.2">
<h4 data-number="2.4.2" class="anchored" data-anchor-id="compound-expressions"><span class="header-section-number">2.4.2</span> Compound expressions</h4>
<p>To have a single expression which evaluates several subexpressions in order, returning the value of the last subexpression as its value.</p>
<ol type="1">
<li><code>;</code> chain</li>
</ol>
<p>Put all subexpressions separated by <code>;</code> inside parentheses.</p>
<div id="c4980e5f" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> (x <span class="op">=</span> <span class="fl">1</span>; y <span class="op">=</span> <span class="fl">2</span>; x <span class="op">+</span> y)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> (x <span class="op">=</span> <span class="fl">1</span>;</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>     y <span class="op">=</span> <span class="fl">2</span>;</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>     x <span class="op">+</span> y)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>3</code></pre>
</div>
</div>
<ol start="2" type="1">
<li><code>begin</code> block</li>
</ol>
<p>Put all subexpressions separated by a newline character between <code>begin</code> and <code>end</code> keywords.</p>
<p>You can also put all subexpressions in one line by separating them with <code>;</code>.</p>
<div id="a073131e" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> <span class="cf">begin</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="fl">1</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> <span class="fl">2</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    x <span class="op">+</span> y</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> <span class="cf">begin</span> x <span class="op">=</span> <span class="fl">1</span>; y <span class="op">=</span> <span class="fl">2</span>; x <span class="op">+</span> y <span class="cf">end</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>3</code></pre>
</div>
</div>
<p>This is quite useful for the inline function definition.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>For multiple statements, you can put them in one line and separate them with <code>;</code>, which is not the same thing as compound expressions:</p>
<div id="f2c88119" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fl">1</span> <span class="op">+</span> <span class="fl">2</span>; <span class="fu">println</span>(<span class="st">"x=</span><span class="sc">$</span>x<span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>x=3</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="short-circuit-evaluation" class="level4" data-number="2.4.3">
<h4 data-number="2.4.3" class="anchored" data-anchor-id="short-circuit-evaluation"><span class="header-section-number">2.4.3</span> Short-circuit evaluation</h4>
<ol type="1">
<li><p><code>cond &amp;&amp; expr</code>: evaluate <code>expr</code> if and only if <code>cond</code> is <code>true</code>.</p></li>
<li><p><code>cond || expr</code>: evaluate <code>expr</code> if and only if <code>cond</code> is <code>false</code>.</p></li>
</ol>
</section>
<section id="conditional-evaluation" class="level4" data-number="2.4.4">
<h4 data-number="2.4.4" class="anchored" data-anchor-id="conditional-evaluation"><span class="header-section-number">2.4.4</span> Conditional evaluation</h4>
<div id="29ed8e69" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> cond1</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    statements</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="cf">elseif</span> cond2</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    statements</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    statements</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ternary operator: <code>cond ? expr1 : expr2</code>, which is closely equivalent to <code>if cond expr1 else expr2</code>.</p>
</div>
</div>
</section>
<section id="looping" class="level4" data-number="2.4.5">
<h4 data-number="2.4.5" class="anchored" data-anchor-id="looping"><span class="header-section-number">2.4.5</span> Looping</h4>
<ol type="1">
<li><code>while</code></li>
</ol>
<div id="beb60c9f" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> cond</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    statements</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>‘for’</li>
</ol>
<div id="f7c749dd" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> var <span class="kw">in</span> iterable</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    statements</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For <code>for</code> loop, <code>var in iterable</code>, <code>var ∈ iterable</code>, and <code>var = iterable</code> are equivalent to one another!</p>
<div id="nte-memberoperator" class="callout callout-style-default callout-note callout-titled" title="Member operator `in` or `∈`">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note&nbsp;1: Member operator <code>in</code> or <code>∈</code>
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><code>in(collection)</code> or <code>∈(collection)</code> creates a function which checks whether its argument is in collection:</li>
</ol>
<div id="84c5cb6a" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="fu">in</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">10</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="fl">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>true</code></pre>
</div>
</div>
<p>Note: <code>start:stop</code> will generate a number sequence with step 1; <code>start:step:stop</code> with step <code>step</code>.</p>
<ol start="2" type="1">
<li><code>in(item, collection)</code> or <code>∈(item, collection)</code> determines whether an item is in the given collection:</li>
</ol>
<div id="c9a30476" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">in</span>(<span class="fl">1</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>true</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Sets check whether the item is equal to one of the elements:</li>
</ol>
<div id="dc2c9469" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span> <span class="kw">in</span> <span class="fu">Set</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>true</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Dicts look for <code>key=&gt;value</code> pairs:</li>
</ol>
<div id="7a98a5bd" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>(<span class="fl">1</span><span class="op">=&gt;</span><span class="fl">10</span>) <span class="kw">in</span> <span class="fu">Dict</span>(<span class="fl">1</span><span class="op">=&gt;</span><span class="fl">10</span>, <span class="fl">2</span><span class="op">=&gt;</span><span class="fl">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>true</code></pre>
</div>
</div>
<ol start="5" type="1">
<li><code>in.(items, collection)</code> or <code>items .∈ collection</code> checks whether each value in <code>items</code> and each value in <code>collection</code> at the corresponding position are the same one:</li>
</ol>
<p>If either <code>items</code> or <code>collection</code> contains only one element, it will be broadcasted to the same length as the longer.</p>
<div id="385c68dd" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">in</span>.([<span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">2</span>], [<span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>3-element BitVector:
 1
 0
 1</code></pre>
</div>
</div>
<ol start="6" type="1">
<li><code>in.(items, Ref(collection))</code> or <code>items .∈ Ref(collection)</code> checks whether each value in <code>items</code> is in <code>collection</code>:</li>
</ol>
<p><code>Ref(collection)</code> can also be written as <code>(collection,)</code> (i.e.&nbsp;wrap <code>collection</code> in a tuple or a <code>Ref</code>).</p>
<p>Note: create a tuple containing only one element with <code>(1,)</code>.</p>
<div id="d3a2a4e6" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">in</span>.([<span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">2</span>], <span class="fu">Ref</span>([<span class="fl">8</span>, <span class="fl">6</span>, <span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">3</span>, <span class="fl">2</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>3-element BitVector:
 1
 1
 1</code></pre>
</div>
</div>
<p><code>in.</code> does not support infix form!</p>
<p><code>in</code>, <code>∈</code>, and <code>.∈</code> support both forms!</p>
<p>In contrary to <code>∈</code> (<code>\in&lt;tab&gt;</code>), <code>∋</code> (<code>\ni&lt;tab&gt;</code>), and <code>.∈</code>, we have, <code>∉</code> (<code>\notin&lt;tab&gt;</code>), <code>∌</code> (<code>\nni&lt;tab&gt;</code>), and <code>.∉</code>.</p>
</div>
</div>
</section>
<section id="jump-out-of-loops" class="level4" data-number="2.4.6">
<h4 data-number="2.4.6" class="anchored" data-anchor-id="jump-out-of-loops"><span class="header-section-number">2.4.6</span> Jump out of loops</h4>
<ol type="1">
<li><p><code>break</code>: jump out of the loop in which <code>break</code> is.</p></li>
<li><p><code>continue</code>: stop an iteration and move on to the next one.</p></li>
<li><p><code>@goto name</code> and <code>@label name</code>: <code>@goto name</code> unconditionally jumps to the statement at the location <code>@label name</code>.</p></li>
</ol>
</section>
</section>
<section id="functions" class="level3" data-number="2.5">
<h3 data-number="2.5" class="anchored" data-anchor-id="functions"><span class="header-section-number">2.5</span> Functions</h3>
<section id="inline-functions" class="level4" data-number="2.5.1">
<h4 data-number="2.5.1" class="anchored" data-anchor-id="inline-functions"><span class="header-section-number">2.5.1</span> Inline functions</h4>
<p><code>&lt;function name&gt;(&lt;parameters&gt;) = &lt;expression&gt;</code>:</p>
<div id="421c386a" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cylinder_volume</span>(r, h) <span class="op">=</span> <span class="cn">π</span><span class="op">*</span>r<span class="op">^</span><span class="fl">2</span><span class="op">*</span>h</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cylinder_volume</span>(<span class="fl">5</span>, <span class="fl">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>235.61944901923448</code></pre>
</div>
</div>
</section>
<section id="multiline-functions" class="level4" data-number="2.5.2">
<h4 data-number="2.5.2" class="anchored" data-anchor-id="multiline-functions"><span class="header-section-number">2.5.2</span> Multiline functions</h4>
<div id="5f981106" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="op">&lt;</span><span class="kw">function</span> <span class="fu">name&gt;</span>(parameters)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In Julia, <code>return &lt;value&gt;</code> is not necessary. <strong>It is only used when you need to exit a function early; otherwise the value of the last expression will always be returned.</strong></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Functions are central to Julia! Various interfaces are achieved by functions even though they don’t look like functions.</p>
<ul>
<li>Infix form</li>
</ul>
<div id="40e643da" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fl">5</span> <span class="op">+</span> <span class="fl">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>8</code></pre>
</div>
</div>
<ul>
<li>Prefix form</li>
</ul>
<div id="673ba391" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">+</span>(<span class="fl">5</span> <span class="op">+</span> <span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>13</code></pre>
</div>
</div>
<p>If a function with a symbol name takes two arguments, we can use it by infix form:</p>
<div id="bf5e6a5f" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">↔</span>(x, y) <span class="op">=</span> x<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> y<span class="op">^</span><span class="fl">2</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="fl">6</span> <span class="op">↔</span> <span class="fl">6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>72</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="argument-passing-behaviour" class="level4" data-number="2.5.3">
<h4 data-number="2.5.3" class="anchored" data-anchor-id="argument-passing-behaviour"><span class="header-section-number">2.5.3</span> Argument passing behaviour</h4>
<p>Pass-by-sharing!</p>
</section>
<section id="specify-the-type-of-return-value" class="level4" data-number="2.5.4">
<h4 data-number="2.5.4" class="anchored" data-anchor-id="specify-the-type-of-return-value"><span class="header-section-number">2.5.4</span> Specify the type of return value</h4>
<p>You can specify the type of return value of a function in the form <code>FuncName(parameters)::ReturnType</code>.</p>
<p>If the type of return value is not the given type, a conversion is attempted with <code>convert()</code>.</p>
<div id="c877d751" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">foo</span>(x<span class="op">::</span><span class="dt">Int64</span>) <span class="op">::</span><span class="dt"> Int32 </span><span class="op">=</span> <span class="fl">2</span>x</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fu">foo</span>(<span class="fl">6</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>Int32</code></pre>
</div>
</div>
</section>
<section id="multiple-assignments-and-multiple-return-values" class="level4" data-number="2.5.5">
<h4 data-number="2.5.5" class="anchored" data-anchor-id="multiple-assignments-and-multiple-return-values"><span class="header-section-number">2.5.5</span> Multiple assignments and multiple return values</h4>
<ol type="1">
<li>Multiple assignments</li>
</ol>
<p>Achieved by using (named) tuples.</p>
<div id="af729d78" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>(a, b, c) <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>  <span class="co"># Assign each variable a value; parentheses are optional</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>_, _, a <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>  <span class="co"># Use _ to discard unwanted values</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>a, b<span class="op">...</span>, c <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span>  <span class="co"># a -&gt; 1, b -&gt; 2:5, c -&gt; 6; b... indicates that b is a collection (b doesn't need to be the final one)</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>(; b, a) <span class="op">=</span> (a<span class="op">=</span><span class="fl">1</span>, b<span class="op">=</span><span class="fl">2</span>, c<span class="op">=</span><span class="fl">3</span>)  <span class="co"># Assign values to variables based on names</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Multiple return values</li>
</ol>
</section>
<section id="parameter-types" class="level4" data-number="2.5.6">
<h4 data-number="2.5.6" class="anchored" data-anchor-id="parameter-types"><span class="header-section-number">2.5.6</span> Parameter types</h4>
<ol type="1">
<li><p>Positional parameters: non-optional; optional with defaults.</p></li>
<li><p>Keyword parameters: non-optional; optional with defaults.</p></li>
</ol>
<div id="fad7736b" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>(a, b <span class="op">=</span> <span class="fl">1</span>; c, d <span class="op">=</span> <span class="fl">2</span>)  <span class="co"># Keyword arguments are defined after ;</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Positional arguments: a, b (optional)</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Keyword arguments: c, d (optional)</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co"># When you pass arguments, either will be fine:</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>(<span class="fl">1</span>, <span class="fl">2</span>; c <span class="op">=</span> <span class="fl">3</span>, d <span class="op">=</span> <span class="fl">4</span>)  <span class="co"># Separated by ;</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>(<span class="fl">1</span>, <span class="fl">2</span>, c <span class="op">=</span> <span class="fl">3</span>, d <span class="op">=</span> <span class="fl">4</span>)  <span class="co"># Separated by ,</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Multiple dispatch only considers <strong>positional arguments</strong>.</p>
</div>
</div>
</section>
<section id="anonymous-functions" class="level4" data-number="2.5.7">
<h4 data-number="2.5.7" class="anchored" data-anchor-id="anonymous-functions"><span class="header-section-number">2.5.7</span> Anonymous functions</h4>
<p>Anonymous functions play an important role in functional programming.</p>
<p>An anonymous function can be defined in two ways:</p>
<ol type="1">
<li><p>Inline style: <code>(&lt;parameters&gt;) -&gt; &lt;expression&gt;</code> (<code>()</code> can be omitted if it only has a single parameter).</p></li>
<li><p>Multiline style:</p></li>
</ol>
<div id="e1ca85ad" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> (<span class="op">&lt;</span>parameters<span class="op">&gt;</span>)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="do-blocks" class="level5" data-number="2.5.7.1">
<h5 data-number="2.5.7.1" class="anchored" data-anchor-id="do-blocks"><span class="header-section-number">2.5.7.1</span> <code>do</code> blocks</h5>
<p>We can use <code>do</code> blocks to create mutiline anonymous functions.</p>
<p>The following two statements are equivalent:</p>
<div id="64845779" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(x <span class="op">-&gt;</span> <span class="cf">begin</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> x <span class="op">&lt;</span> <span class="fl">0</span> <span class="op">&amp;&amp;</span> <span class="fu">iseven</span>(x)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>                  <span class="cf">return</span> <span class="fl">0</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>              <span class="cf">elseif</span> x <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>                  <span class="cf">return</span> <span class="fl">1</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>              <span class="cf">else</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>                  <span class="cf">return</span> x</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>              <span class="cf">end</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>         <span class="cf">end</span>,</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>    [<span class="op">-</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>3-element Vector{Int64}:
 0
 1
 2</code></pre>
</div>
</div>
<div id="392c715c" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>([<span class="op">-</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">2</span>]) <span class="cf">do</span> x</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> x <span class="op">&lt;</span> <span class="fl">0</span> <span class="op">&amp;&amp;</span> <span class="fu">iseven</span>(x)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fl">0</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elseif</span> x <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fl">1</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> x</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>3-element Vector{Int64}:
 0
 1
 2</code></pre>
</div>
</div>
<p>In the above example, the <code>do x</code> syntax creates an anonymous function with argument <code>x</code> and passes it as the first argument to <code>map()</code>.</p>
<p>Similarly, <code>do x, y</code> will create a two-argument anonymous function but <code>do (x, y)</code> will create a one-argument anonymous function, whose argument is a tuple.</p>
<p><strong>In a word, we can use <code>do</code> blocks to create anonymous functions which are passed as the first argument to some higher-order functions, the first argument of which must be the <code>Function</code> type.</strong></p>
</section>
</section>
<section id="the-splat-operator-..." class="level4" data-number="2.5.8">
<h4 data-number="2.5.8" class="anchored" data-anchor-id="the-splat-operator-..."><span class="header-section-number">2.5.8</span> The splat operator <code>...</code></h4>
<p>The splat operator can be used to turn arrays or tuples into function arguments.</p>
<p>e.g.&nbsp;<code>foo([1, 2, 3]...)</code> is the same as <code>foo(1, 2, 3)</code>.</p>
<p>You can define a parameter which accepts a variable number of arguments by using the splat operator:</p>
<div id="3ef40e56" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># All arguments except the 1st will be stored in a tuple, assigned to args</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">var_f</span>(x, args<span class="op">...</span>)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="closure" class="level4" data-number="2.5.9">
<h4 data-number="2.5.9" class="anchored" data-anchor-id="closure"><span class="header-section-number">2.5.9</span> Closure</h4>
<p>A <em>closure</em> is a function that has captured some external state not supplied as an argument since the inner scope can use variables defined in an outter scope.</p>
<p>Anonymous functions are frequently used as closures.</p>
<div id="dda4a383" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">make_pow</span>(n<span class="op">::</span><span class="dt">Real</span>)  <span class="co"># Outer function</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> (x<span class="op">::</span><span class="dt">Real</span>)  <span class="co"># Inner function</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>        x<span class="op">^</span>n  <span class="co"># The inner function uses n defined outside it and n is not passed as an argument to it</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>pow2 <span class="op">=</span> <span class="fu">make_pow</span>(<span class="fl">2</span>)  <span class="co"># The returned function with n=2 is assigned to variable pow2</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>pow3 <span class="op">=</span> <span class="fu">make_pow</span>(<span class="fl">3</span>)</span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a><span class="fu">pow2</span>(<span class="fl">2</span>), <span class="fu">pow3</span>(<span class="fl">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>(4, 8)</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Performance of captured variable">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Performance of captured variable
</div>
</div>
<div class="callout-body-container callout-body">
<p>For the consideration of performance, if the type of a captured variable is already known, you would better <strong>add a type annotation to it</strong>. In addition, if the value of this captured variable need not be changed after the closure is created, <strong>you can indicate it with a <code>let</code> block</strong>:</p>
<div id="cc90df2c" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">abmult</span>(r<span class="op">::</span><span class="dt">Int</span>)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>    r1<span class="op">::</span><span class="dt">Int </span><span class="op">=</span> r  <span class="co"># Type annotation</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> r1 <span class="op">&lt;</span> <span class="fl">0</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>        r1 <span class="op">=</span> <span class="op">-</span>r1</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>    f <span class="op">=</span> <span class="kw">let</span> r1 <span class="op">=</span> r1  <span class="co"># Fix it</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>            x <span class="op">-&gt;</span> x <span class="op">*</span> r1</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">end</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> f</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="fu">abmult</span>(<span class="fl">10</span>)</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="fl">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>100</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="partial-function-application" class="level4" data-number="2.5.10">
<h4 data-number="2.5.10" class="anchored" data-anchor-id="partial-function-application"><span class="header-section-number">2.5.10</span> Partial function application</h4>
<p>Partial function application refers to the process of fixing a number of arguments to a function, producing another function accepting fewer arguments.</p>
<p>Obviously, closure is a way to achieve the partial function application.</p>
</section>
<section id="function-composition-vectorization-and-piping" class="level4" data-number="2.5.11">
<h4 data-number="2.5.11" class="anchored" data-anchor-id="function-composition-vectorization-and-piping"><span class="header-section-number">2.5.11</span> Function composition, vectorization and piping</h4>
<section id="function-composition" class="level5" data-number="2.5.11.1">
<h5 data-number="2.5.11.1" class="anchored" data-anchor-id="function-composition"><span class="header-section-number">2.5.11.1</span> Function composition</h5>
<p>The concept of function composition in Julia is the very concept of function composition in mathematics and the operation symbol is the same one: <code>∘</code>, typed using <code>\circ&lt;tab&gt;</code> (e.g.&nbsp;<code>(f ∘ g)(args...)</code> is the same as <code>f(g(args...))</code>).</p>
<div id="9cfe21b5" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>(sqrt <span class="op">∘</span> <span class="op">+</span>)(<span class="fl">3</span>, <span class="fl">6</span>)  <span class="co"># Equivalent to sqrt(+(3, 6))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>3.0</code></pre>
</div>
</div>
</section>
<section id="dot-syntax-for-vectorizing-functions" class="level5" data-number="2.5.11.2">
<h5 data-number="2.5.11.2" class="anchored" data-anchor-id="dot-syntax-for-vectorizing-functions"><span class="header-section-number">2.5.11.2</span> Dot syntax for vectorizing functions</h5>
<p>In Julia, vectorized functions are not required for performance, and indeed it is often beneficial to write your own loops, but they can still be convenient.</p>
<p>You can add a dot <code>.</code> <strong>after regular function names</strong> (e.g.&nbsp;<code>f</code>) or <strong>before special operators</strong> (e.g.&nbsp;<code>+</code>) to get their vectorized versions.</p>
<ol type="1">
<li>Operating on a single array:</li>
</ol>
<div id="7b46d6b9" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sin</span>.(A)  <span class="co"># Which is equivalent to map(sin, A) or broadcast(sin, A)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>3-element Vector{Float64}:
 0.8414709848078965
 0.9092974268256817
 0.1411200080598672</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Operating on multiple arrays (even of different shapes), or a mix of arrays and scalars:</li>
</ol>
<div id="566f8479" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fp</span>(x, y) <span class="op">=</span> <span class="fl">3</span>x <span class="op">+</span> <span class="fl">4</span>y</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> <span class="fl">4</span><span class="op">:</span><span class="fl">6</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a><span class="fu">fp</span>.(<span class="cn">pi</span>, A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>3-element Vector{Float64}:
 13.42477796076938
 17.42477796076938
 21.42477796076938</code></pre>
</div>
</div>
<div id="63fd2464" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fp</span>.(A, B)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>3-element Vector{Int64}:
 19
 26
 33</code></pre>
</div>
</div>
<ol start="3" type="1">
<li><p>Keyword arguments are not broadcasted over, but are simply passed through to each of the function.</p></li>
<li><p>Nested <code>f.(args...)</code> calls are fused into a single broadcast loop.</p></li>
</ol>
<div id="8ef8dc84" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sin</span>.(<span class="fu">cos</span>.(X))  <span class="co"># Equivalent to broadcast(x -&gt; sin(cos(x)), X)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>6-element Vector{Float64}:
  0.5143952585235492
 -0.4042391538522658
 -0.8360218615377305
 -0.6080830096407656
  0.2798733507685274
  0.819289219220601</code></pre>
</div>
</div>
<p>However, the fusion stops as soon as a “non-dot” function call is encountered (e.g.&nbsp;<code>sin.(sort(cos.(X)))</code>).</p>
<ol start="5" type="1">
<li>The maximum efficiency is typically achieved when the output array of a vectorized operation is pre-alllocated.</li>
</ol>
<div id="eb95496d" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10000</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="pp">@time</span> <span class="fu">sin</span>.(X)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  0.000109 seconds (3 allocations: 78.203 KiB)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>10000-element Vector{Float64}:
  0.8414709848078965
  0.9092974268256817
  0.1411200080598672
 -0.7568024953079282
 -0.9589242746631385
 -0.27941549819892586
  0.6569865987187891
  0.9893582466233818
  0.4121184852417566
 -0.5440211108893698
 -0.9999902065507035
 -0.5365729180004349
  0.4201670368266409
  ⋮
 -0.9534986003597155
 -0.26156028858731495
  0.6708553462651908
  0.9864896695694187
  0.39514994010172155
 -0.5594888219681838
 -0.9997361413354392
 -0.5208306628783247
  0.4369241250954582
  0.9929728874353159
  0.6360869563962336
 -0.30561438888825215</code></pre>
</div>
</div>
<div id="1015c4b3" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>Y <span class="op">=</span> <span class="fu">Vector</span><span class="dt">{Float64}</span>(<span class="cn">undef</span>, <span class="fl">10000</span>)  <span class="co"># Construct an uninitialized (undef) Vector{Float64} of length 10000</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="pp">@time</span> Y <span class="op">.=</span> <span class="fu">sin</span>.(X)  <span class="co"># Overwrite Y with sin.(X) in-place</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  0.010965 seconds (9.57 k allocations: 647.133 KiB, 98.74% compilation time)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="34">
<pre><code>10000-element Vector{Float64}:
  0.8414709848078965
  0.9092974268256817
  0.1411200080598672
 -0.7568024953079282
 -0.9589242746631385
 -0.27941549819892586
  0.6569865987187891
  0.9893582466233818
  0.4121184852417566
 -0.5440211108893698
 -0.9999902065507035
 -0.5365729180004349
  0.4201670368266409
  ⋮
 -0.9534986003597155
 -0.26156028858731495
  0.6708553462651908
  0.9864896695694187
  0.39514994010172155
 -0.5594888219681838
 -0.9997361413354392
 -0.5208306628783247
  0.4369241250954582
  0.9929728874353159
  0.6360869563962336
 -0.30561438888825215</code></pre>
</div>
</div>
<ol start="6" type="1">
<li>Using the <code>@.</code> macro to convert every function call, operation, and assignment in an expression into the “dotted” version.</li>
</ol>
<div id="a6efc3dc" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">2.0</span>, <span class="fl">3.0</span>]</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>Y <span class="op">=</span> <span class="fu">similar</span>(X)  <span class="co"># Pre-allocate the output array</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>@. Y <span class="op">=</span> <span class="fu">sin</span>(<span class="fu">cos</span>(X))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>3-element Vector{Float64}:
  0.5143952585235492
 -0.4042391538522658
 -0.8360218615377305</code></pre>
</div>
</div>
<ol start="7" type="1">
<li>Using vectorized piping operator.</li>
</ol>
<div id="d27c015c" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span><span class="op">:</span><span class="fl">6</span> <span class="op">.|&gt;</span> [x <span class="op">-&gt;</span> x<span class="op">-</span><span class="fl">1</span>, inv, x <span class="op">-&gt;</span> <span class="fl">2</span><span class="op">*</span>x, <span class="op">-</span>, isodd, iseven]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<pre><code>6-element Vector{Real}:
    0
    0.5
    6
   -4
 true
 true</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="`broadcast(f, As...)`">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>broadcast(f, As...)</code>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Broadcast the function <code>f</code> over the arrays, tuples, collections, Refs, and/or scalars <code>As</code>.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="Pre-allocating outputs">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pre-allocating outputs
</div>
</div>
<div class="callout-body-container callout-body">
<div id="7c6aff4c" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Vector</span><span class="dt">{Int}</span>(<span class="cn">undef</span>, <span class="fl">10</span>)  <span class="co"># Construct an uninitialized Vector{Int} of length 10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<pre><code>10-element Vector{Int64}:
 125676241024704
 125687895638864
 125687925047304
 125687767111376
 125687925047304
 125687925047304
               1
              -1
               1
 125676226543626</code></pre>
</div>
</div>
<div id="5ea4c222" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Matrix</span><span class="dt">{Float64}</span>(<span class="cn">undef</span>, <span class="fl">3</span>, <span class="fl">3</span>)  <span class="co"># Construct an uninitialized Matrix{Float64} of 3 by 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<pre><code>3×3 Matrix{Float64}:
 0.0  0.0  0.0
 0.0  0.0  0.0
 0.0  0.0  6.2098e-310</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="function-piping" class="level5" data-number="2.5.11.3">
<h5 data-number="2.5.11.3" class="anchored" data-anchor-id="function-piping"><span class="header-section-number">2.5.11.3</span> Function piping</h5>
<p>The pipe operator is <code>|&gt;</code>, which is used to chain together functions taking <strong>single</strong> arguments as inputs.</p>
<div id="7feda938" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span><span class="op">:</span><span class="fl">10</span> <span class="op">|&gt;</span> sum <span class="op">|&gt;</span> sqrt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>7.416198487095663</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="exception" class="level3" data-number="2.6">
<h3 data-number="2.6" class="anchored" data-anchor-id="exception"><span class="header-section-number">2.6</span> Exception</h3>
<p>Usage:</p>
<div id="d238a35a" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>try</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>some code which may raise some errors<span class="op">&gt;</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>catch <span class="op">&lt;</span>exception variable<span class="op">&gt;</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>some code dealing with exceptions<span class="op">&gt;</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>else</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>some code to be executed when no error occurs<span class="op">&gt;</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>finally</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>some code to be executed anyway<span class="op">&gt;</span></span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can use <code>throw()</code> to raise a given type of exception or use <code>error()</code> to raise an <code>ErrorException</code> directly.</p>
<p>Then you can use <code>isa()</code> to check whether the error type raised is the expected.</p>
<p>e.g.</p>
<div id="567d13d8" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="fl">2</span>, <span class="op">-</span><span class="fl">2</span>, <span class="ch">'a'</span>]</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> x</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>        y <span class="op">=</span> <span class="fu">sqrt</span>(i)</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">println</span>(<span class="st">"√"</span>, i, <span class="st">" = "</span>, y)</span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">catch</span> <span class="cn">e</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="fu">isa</span>(<span class="cn">e</span>, <span class="dt">DomainError</span>)</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>            <span class="fu">println</span>(<span class="st">"√"</span>, i, <span class="st">": </span><span class="sc">$</span>(i)<span class="st"> is out of domain"</span>)</span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>            <span class="fu">println</span>(<span class="st">"√"</span>, i, <span class="st">": </span><span class="sc">$</span>(i)<span class="st"> is an unsopported type"</span>)</span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb89-14"><a href="#cb89-14" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>√2 = 1.4142135623730951
√-2: -2 is out of domain
√a: a is an unsopported type</code></pre>
</div>
</div>
</section>
<section id="metaprogramming" class="level3" data-number="2.7">
<h3 data-number="2.7" class="anchored" data-anchor-id="metaprogramming"><span class="header-section-number">2.7</span> Metaprogramming</h3>
<div class="callout callout-style-default callout-note callout-titled" title="Key concepts">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Key concepts
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Abstract Syntax Tree (AST): a data structure used in computer science to represent the structure of a program or code snippet.</li>
<li>Higher-order functions: functions taking one or more functions as arguments and returning a function. All other functions are called first-order functions.</li>
<li>Closure: a function that has captured some external state not supplied as arguments to it since the inner scope can refer to variables defined in its outer scopes.</li>
<li>Reflection: the ability of a process to examine, introspect, and modify its own structure and behavior.</li>
</ol>
</div>
</div>
<section id="program-representation" class="level4" data-number="2.7.1">
<h4 data-number="2.7.1" class="anchored" data-anchor-id="program-representation"><span class="header-section-number">2.7.1</span> Program representation</h4>
<p>In a word, each Julia program starts its life as a string, which then is parsed into an object called expression of type <code>Expr</code>. The key point is that <strong>Julia code is internally represented as a data structure that is accessible from the language itself</strong>. It means that we can generate, examine, and modify Julia code like manipulating ordinary Julia objects within Julia.</p>
</section>
<section id="expressions-and-evaluation" class="level4" data-number="2.7.2">
<h4 data-number="2.7.2" class="anchored" data-anchor-id="expressions-and-evaluation"><span class="header-section-number">2.7.2</span> Expressions and evaluation</h4>
<p>The next questions are how to construct expressions of type <code>Expr</code>, and how to execute (evaluate) them?</p>
<section id="expressions" class="level5" data-number="2.7.2.1">
<h5 data-number="2.7.2.1" class="anchored" data-anchor-id="expressions"><span class="header-section-number">2.7.2.1</span> Expressions</h5>
<p>There are several ways to construct expressions:</p>
<ol type="1">
<li>From strings via <code>Meta.parse()</code>.</li>
</ol>
<div id="61dd69b2" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>prog <span class="op">=</span> <span class="st">"1 + 1"</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>ex1 <span class="op">=</span> <span class="bu">Meta</span>.<span class="fu">parse</span>(prog)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<pre><code>:(1 + 1)</code></pre>
</div>
</div>
<div id="7bf04821" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(ex1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<pre><code>Expr</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>Expr</code> objects contain two fields:</p>
<ol type="1">
<li><code>head</code>: a <code>Symbol</code> identifying the kind of expression.</li>
<li><code>args</code>: the expression arguments, which may be symbols, expressions, or literal values.</li>
</ol>
</div>
</div>
<ol start="2" type="1">
<li>Use <code>Expr()</code> constructor.</li>
</ol>
<div id="e1d911d7" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>ex2 <span class="op">=</span> <span class="fu">Expr</span>(<span class="op">:</span>call, <span class="op">:+</span>, <span class="fl">1</span>, <span class="fl">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<pre><code>:(1 + 1)</code></pre>
</div>
</div>
<div id="4712a6cf" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>ex1 <span class="op">==</span> ex2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<pre><code>true</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Quoting single/multiple statements of Julia code.</li>
</ol>
<p>The usual representation of a quote form in an AST is an <code>Expr</code> with <code>head</code> <code>:quote</code>.</p>
<ul>
<li>Quoting single statement of Julia code using <code>:</code> character, followed by paired parentheses:</li>
</ul>
<div id="64ed5e4f" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="op">:</span>(a <span class="op">+</span> b <span class="op">*</span> c <span class="op">+</span> <span class="fl">1</span>) <span class="op">|&gt;</span> typeof</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>Expr</code></pre>
</div>
</div>
<ul>
<li>Quoting multiple statements of Julia code using <code>quote ... end</code> blocks:</li>
</ul>
<div id="82c2da3f" class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> <span class="kw">quote</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="fl">1</span></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> <span class="fl">2</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>    x <span class="op">+</span> y</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(ex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<pre><code>Expr</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled" title="Interpolation">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Interpolation
</div>
</div>
<div class="callout-body-container callout-body">
<p>In contrast with expressions constructed using <code>Meta.parse()</code> or <code>Expr()</code>, expressions constructed by quoting single/multiple statements of Julia code allow us to interpolate literals or expressions into, quite similar with string interpolation:</p>
<div id="3af42ace" class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="fl">1</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="op">:</span>(<span class="op">$</span>a <span class="op">+</span> b)  <span class="co"># literals</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<pre><code>:(1 + b)</code></pre>
</div>
</div>
<div id="ef326c59" class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="op">:</span>(a <span class="kw">in</span> <span class="op">$:</span>((<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>)))  <span class="co"># expressions</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="48">
<pre><code>:(a in (1, 2, 3))</code></pre>
</div>
</div>
<p><strong>Splatting interpolation:</strong> you have an array of expressions and need them all to become arguments of the surrounding expression. This can be done with the syntax <code>$(xs...)</code>:</p>
<div id="c960c6fc" class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>args <span class="op">=</span> [<span class="op">:</span>x, <span class="op">:</span>y, <span class="op">:</span>z]</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="op">:</span>(<span class="fu">f</span>(<span class="fl">1</span>, <span class="op">$</span>(args<span class="op">...</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="49">
<pre><code>:(f(1, x, y, z))</code></pre>
</div>
</div>
</div>
</div>
<ul>
<li>Nested quote and interpolation:</li>
</ul>
<p>Naturally, it is possible for quote expressions to contain other quote expressions.</p>
<p>Understanding how interpolation works in these cases can be a bit tricky.</p>
<p>The basic principle is that <code>$x</code> works similarly to <code>eval(:x)</code>.</p>
<div id="7b42e9da" class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> x <span class="op">=</span> <span class="fl">100</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 100</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="kw">quote</span> <span class="op">$</span>x <span class="kw">end</span>  <span class="co"># x will be evaluated in a non-nested quote (this should be natrual for interpolation introduced above)</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="co"># quote</span></span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a><span class="co">#     #= REPL[13]:1 =#</span></span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a><span class="co">#     100</span></span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a><span class="co"># end</span></span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="kw">quote</span> <span class="kw">quote</span> <span class="op">$</span>x <span class="kw">end</span> <span class="kw">end</span>  <span class="co"># x won't be evaluated yet, because it belongs to the inner quote, not the outer quote</span></span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a><span class="co"># quote</span></span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a><span class="co">#     #= REPL[14]:1 =#</span></span>
<span id="cb109-13"><a href="#cb109-13" aria-hidden="true" tabindex="-1"></a><span class="co">#     $(Expr(:quote, quote</span></span>
<span id="cb109-14"><a href="#cb109-14" aria-hidden="true" tabindex="-1"></a><span class="co">#     #= REPL[14]:1 =#</span></span>
<span id="cb109-15"><a href="#cb109-15" aria-hidden="true" tabindex="-1"></a><span class="co">#     $(Expr(:$, :x))</span></span>
<span id="cb109-16"><a href="#cb109-16" aria-hidden="true" tabindex="-1"></a><span class="co"># end))</span></span>
<span id="cb109-17"><a href="#cb109-17" aria-hidden="true" tabindex="-1"></a><span class="co"># end</span></span>
<span id="cb109-18"><a href="#cb109-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-19"><a href="#cb109-19" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="kw">quote</span> <span class="kw">quote</span> <span class="op">$</span>x <span class="kw">end</span> <span class="kw">end</span> <span class="op">|&gt;</span> eval  <span class="co"># the inner quote will be evaluated and x will too as a consequence</span></span>
<span id="cb109-20"><a href="#cb109-20" aria-hidden="true" tabindex="-1"></a><span class="co"># quote</span></span>
<span id="cb109-21"><a href="#cb109-21" aria-hidden="true" tabindex="-1"></a><span class="co">#     #= REPL[15]:1 =#</span></span>
<span id="cb109-22"><a href="#cb109-22" aria-hidden="true" tabindex="-1"></a><span class="co">#     100</span></span>
<span id="cb109-23"><a href="#cb109-23" aria-hidden="true" tabindex="-1"></a><span class="co"># end</span></span>
<span id="cb109-24"><a href="#cb109-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-25"><a href="#cb109-25" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="kw">quote</span> <span class="kw">quote</span> <span class="op">$$</span>x <span class="kw">end</span> <span class="kw">end</span>  <span class="co"># the outer quote can interpolate values inside $ in the inner quote with multiple $s, which means x will be evaluated in this case</span></span>
<span id="cb109-26"><a href="#cb109-26" aria-hidden="true" tabindex="-1"></a><span class="co"># quote</span></span>
<span id="cb109-27"><a href="#cb109-27" aria-hidden="true" tabindex="-1"></a><span class="co">#     #= REPL[16]:1 =#</span></span>
<span id="cb109-28"><a href="#cb109-28" aria-hidden="true" tabindex="-1"></a><span class="co">#     $(Expr(:quote, quote</span></span>
<span id="cb109-29"><a href="#cb109-29" aria-hidden="true" tabindex="-1"></a><span class="co">#     #= REPL[16]:1 =#</span></span>
<span id="cb109-30"><a href="#cb109-30" aria-hidden="true" tabindex="-1"></a><span class="co">#     $(Expr(:$, 100))</span></span>
<span id="cb109-31"><a href="#cb109-31" aria-hidden="true" tabindex="-1"></a><span class="co"># end))</span></span>
<span id="cb109-32"><a href="#cb109-32" aria-hidden="true" tabindex="-1"></a><span class="co"># end</span></span>
<span id="cb109-33"><a href="#cb109-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-34"><a href="#cb109-34" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="kw">quote</span> <span class="kw">quote</span> <span class="kw">quote</span> <span class="op">$$</span>x <span class="kw">end</span> <span class="kw">end</span> <span class="kw">end</span>  <span class="co"># x won't be evaluated here, because the outer $ belongs to the innermost quote, and the inner $ belongs to the second quote</span></span>
<span id="cb109-35"><a href="#cb109-35" aria-hidden="true" tabindex="-1"></a><span class="co"># quote</span></span>
<span id="cb109-36"><a href="#cb109-36" aria-hidden="true" tabindex="-1"></a><span class="co">#     #= REPL[17]:1 =#</span></span>
<span id="cb109-37"><a href="#cb109-37" aria-hidden="true" tabindex="-1"></a><span class="co">#     $(Expr(:quote, quote</span></span>
<span id="cb109-38"><a href="#cb109-38" aria-hidden="true" tabindex="-1"></a><span class="co">#     #= REPL[17]:1 =#</span></span>
<span id="cb109-39"><a href="#cb109-39" aria-hidden="true" tabindex="-1"></a><span class="co">#     $(Expr(:quote, quote</span></span>
<span id="cb109-40"><a href="#cb109-40" aria-hidden="true" tabindex="-1"></a><span class="co">#     #= REPL[17]:1 =#</span></span>
<span id="cb109-41"><a href="#cb109-41" aria-hidden="true" tabindex="-1"></a><span class="co">#     $(Expr(:$, :($(Expr(:$, :x)))))</span></span>
<span id="cb109-42"><a href="#cb109-42" aria-hidden="true" tabindex="-1"></a><span class="co"># end))</span></span>
<span id="cb109-43"><a href="#cb109-43" aria-hidden="true" tabindex="-1"></a><span class="co"># end))</span></span>
<span id="cb109-44"><a href="#cb109-44" aria-hidden="true" tabindex="-1"></a><span class="co"># end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>QuoteNode</code>:</li>
</ul>
<p>In some situations, it is necessary to quote code without performing interpolation. This kind of quoting does not yet have syntax, but is represented internally as an object of type <code>QuoteNode</code>:</p>
<div id="362793a0" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="kw">quote</span> <span class="kw">quote</span> <span class="op">$</span>x <span class="kw">end</span> <span class="kw">end</span> <span class="op">|&gt;</span> eval  <span class="co"># with interpolation</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="co"># quote</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a><span class="co">#     #= REPL[34]:1 =#</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a><span class="co">#     100</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="co"># end</span></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="kw">quote</span> <span class="kw">quote</span> <span class="op">$</span>x <span class="kw">end</span> <span class="kw">end</span> <span class="op">|&gt;</span> QuoteNode <span class="op">|&gt;</span> eval  <span class="co"># wihout interpolation</span></span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a><span class="co"># quote</span></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a><span class="co">#     #= REPL[36]:1 =#</span></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a><span class="co">#     $(Expr(:quote, quote</span></span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a><span class="co">#     #= REPL[36]:1 =#</span></span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true" tabindex="-1"></a><span class="co">#     $(Expr(:$, :x))</span></span>
<span id="cb110-13"><a href="#cb110-13" aria-hidden="true" tabindex="-1"></a><span class="co"># end))</span></span>
<span id="cb110-14"><a href="#cb110-14" aria-hidden="true" tabindex="-1"></a><span class="co"># end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Note:</strong> the parser yields <code>QuoteNode</code>s for simple quoted items like symbols:</p>
<div id="36caaea4" class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dump</span>(<span class="bu">Meta</span>.<span class="fu">parse</span>(<span class="st">":x"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>QuoteNode
  value: Symbol x</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="Show expressions elegantly">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show expressions elegantly
</div>
</div>
<div class="callout-body-container callout-body">
<div id="485f99e9" class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dump</span>(<span class="bu">Meta</span>.<span class="fu">parse</span>(<span class="st">"1 + 1"</span>))</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="bu">Meta</span>.<span class="fu">show_sexpr</span>(<span class="bu">Meta</span>.<span class="fu">parse</span>(<span class="st">"(4 + 4) / 2"</span>))  <span class="co"># shows that Expr objects can be nested</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Expr
  head: Symbol call
  args: Array{Any}((3,))
    1: Symbol +
    2: Int64 1
    3: Int64 1
(:call, :/, (:call, :+, 4, 4), 2)</code></pre>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="Symbols">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Symbols
</div>
</div>
<div class="callout-body-container callout-body">
<p>A <code>Symbol</code> is an interned string, used as one building block of expressions.</p>
<p>A <code>Symbol</code> can be constructed in two ways:</p>
<div id="b1472dc4" class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using : character from valid identifiers</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="op">:</span>foo</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(s)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<pre><code>Symbol</code></pre>
</div>
</div>
<div id="57f168ee" class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using Symbol() constructor from any number of arguments by concatenating their string representations together</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Symbol</span>(<span class="op">:</span>var, <span class="st">"_"</span>, <span class="st">"sym"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="53">
<pre><code>:var_sym</code></pre>
</div>
</div>
<div id="2465e76b" class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sometimes extra parentheses around the argument to : are needed to avoid ambiguity in parsing</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="op">:</span>(<span class="op">::</span><span class="dt">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="54">
<pre><code>:(::)</code></pre>
</div>
</div>
<p><strong>Note:</strong> in the context of an expression, symbols are used to indicate access to variables; when an expression is evaluated, a symbol is replaced with the value bound to that symbol in the appropriate scope.</p>
</div>
</div>
</section>
<section id="evaluation" class="level5" data-number="2.7.2.2">
<h5 data-number="2.7.2.2" class="anchored" data-anchor-id="evaluation"><span class="header-section-number">2.7.2.2</span> Evaluation</h5>
<p>Given an expression object, one can cause Julia to evaluate (execute) it at <strong>global scope</strong> using <code>eval()</code> (for code block, use <code>@eval begin ... end</code>).</p>
<p>Every <code>module</code> has its own <code>eval()</code> function that evaluates expressions in its global scope.</p>
<p>Note the behaviors of variable <code>a</code> and symbol :<code>b</code> in the following code:</p>
<div id="91fdbde9" class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="fl">1</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> <span class="fu">Expr</span>(<span class="op">:</span>call, <span class="op">:+</span>, a, <span class="op">:</span>b)  <span class="co"># The value of the variable a at expression construction time is uesd as an immediate value in the expression; on the other hand, the symbol :b is used in the expression construction, so the value of the variable b at that time is irrelevant. Only when the expression is evaluated is the symbol :b resolved by looking up the value of the variable b.</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>a, b <span class="op">=</span> <span class="fl">0</span>, <span class="fl">2</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a><span class="fu">eval</span>(ex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="55">
<pre><code>3</code></pre>
</div>
</div>
</section>
</section>
<section id="code-generation" class="level4" data-number="2.7.3">
<h4 data-number="2.7.3" class="anchored" data-anchor-id="code-generation"><span class="header-section-number">2.7.3</span> Code generation</h4>
<p>By means of expressions along with its interpolation, and evaluation, one extremely useful feature of Julia is the capability to generate and manipulate Julia code within Julia itself. Such as defining functions returning <code>Expr</code> objects, defining methods programmatically, etc.</p>
<div id="03716631" class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> MyNumber</span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>    x<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> op <span class="op">=</span> (<span class="op">:</span>sin, <span class="op">:</span>cos, <span class="op">:</span>tan, <span class="op">:</span>log, <span class="op">:</span>exp)</span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">eval</span>(<span class="kw">quote</span></span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Base</span>.<span class="op">$</span><span class="fu">op</span>(a<span class="op">::</span><span class="dt">MyNumber</span>) <span class="op">=</span> <span class="fu">MyNumber</span>(<span class="op">$</span><span class="fu">op</span>(a.x))</span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span>)</span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb123-10"><a href="#cb123-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-11"><a href="#cb123-11" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fu">MyNumber</span>(<span class="cn">π</span>)</span>
<span id="cb123-12"><a href="#cb123-12" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="fu">sin</span>(x))</span>
<span id="cb123-13"><a href="#cb123-13" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="fu">cos</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>MyNumber(1.2246467991473532e-16)
MyNumber(-1.0)</code></pre>
</div>
</div>
</section>
<section id="macros" class="level4" data-number="2.7.4">
<h4 data-number="2.7.4" class="anchored" data-anchor-id="macros"><span class="header-section-number">2.7.4</span> Macros</h4>
<p>Macros provide a mechanism to include generated code in the final body of a program.</p>
<p>A macro maps a tuple of arguments (including symbols, literal values, and expressions, which hints that all the other arguments passed to a macro are considered as expressions, except symbols and literal values) to a returned expression, which is compiled directly rather than requiring a runtime <code>eval()</code> call. This means that the returned expression is compiled <strong>at parse time</strong>. This is why we can include generated code in the final body of a program using macros.</p>
<ol type="1">
<li><strong>Defining macros:</strong></li>
</ol>
<div id="b432dac5" class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="kw">macro</span> <span class="fu">&lt;NAME&gt;</span>(<span class="op">&lt;</span>arguments<span class="op">&gt;</span>)</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>    body  <span class="co"># return an expression at last</span></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For example,</p>
<div id="ea889df9" class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="kw">macro</span> <span class="fu">sayhello</span>(name)</span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">:</span>(<span class="fu">println</span>(<span class="st">"Hello, "</span>, <span class="op">$</span>name))</span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a><span class="pp">@sayhello</span>(<span class="st">"human"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Hello, human</code></pre>
</div>
</div>
<p>When <code>@sayhello</code> is encountered, the quoted expression is expanded to interpolate the value of the argument into the final expression. Then, the compiler will replace all instances of <code>@sayhello</code> with <code>:(Main.println("Hello, ", "human"))</code>. When <code>@sayhello</code> is entered in the REPL, the expression executes immediately, thus we only see the evaluation result. We can view the returned expression using the function <code>macroexpand()</code> or macro <code>@macroexpand</code>:</p>
<div id="35511a3b" class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@macroexpand</span> <span class="pp">@sayhello</span>(<span class="st">"human"</span>)  <span class="co"># equivalent to macroexpand(Main, :(@sayhello("human")))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="58">
<pre><code>:(Main.println("Hello, ", "human"))</code></pre>
</div>
</div>
<ol start="2" type="1">
<li><strong>Why macros?</strong></li>
</ol>
<p>Macros are necessary because they execute when code is parsed; therefore, macros allow the programmer to generate and include fragments of customized code before the full program is run.</p>
<div id="0c6e3b48" class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="kw">macro</span> <span class="fu">twostep</span>(arg)</span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(<span class="st">"I execute at parse time. The argument is: "</span>, arg)</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">:</span>(<span class="fu">println</span>(<span class="st">"I execute at runtime. The argument is: "</span>, <span class="op">$</span>arg))</span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> <span class="pp">@macroexpand</span> <span class="pp">@twostep</span> <span class="op">:</span>(<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>)</span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="fu">typeof</span>(ex))</span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="fu">repr</span>(ex))  <span class="co"># equivalent to show(ex), because repr() actually calls show() and then returns a string</span></span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a><span class="fu">eval</span>(ex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>I execute at parse time. The argument is: :((1, 2, 3))
Expr
:(Main.println("I execute at runtime. The argument is: ", $(Expr(:copyast, :($(QuoteNode(:((1, 2, 3)))))))))
I execute at runtime. The argument is: (1, 2, 3)</code></pre>
</div>
</div>
<ol start="3" type="1">
<li><strong>Macro invocation</strong></li>
</ol>
<div id="a1882745" class="cell" data-execution_count="72">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># separated by white space</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="pp">@name</span> expr1 expr2 <span class="op">...</span></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a><span class="co"># separated by ,</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a><span class="pp">@name</span>(expr1, expr2, <span class="op">...</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Note:</strong></p>
<div id="f3e8cb6e" class="cell" data-execution_count="73">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co"># there is only an argument here - a tuple</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="pp">@name</span> (expr1, expr2, <span class="op">...</span>)</span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a><span class="pp">@name</span>[a b] <span class="op">*</span> c  <span class="co"># no space and parenthesis between the macro name and the argument, which is the unique argument to this macro</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a><span class="co"># is equivalent to</span></span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a><span class="pp">@name</span>([a b]) <span class="op">*</span> c</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Note:</strong> again, macros receive their arguments as expressions, literals, and symbols. You can explore the macro arguments using the <code>show()</code> function within the macro body.</p>
<p><strong>Note:</strong> in addition to the given argument list, every macro is passed extra two arguments named <code>__source__</code>, and <code>__module__</code>.</p>
<ul>
<li><p><code>__source__</code> argument provides information if the form of a <code>LineNumberNode</code> object about the parser location of the <code>@</code> sign <strong>from the macro invocation</strong>. The location information can be accessed by referencing <code>__source__.line</code>, and <code>__source__.file</code>. It can also be used for other useful purposes, such as implementing the <code>@__LINE__</code>, <code>@__FILE__</code>, and <code>@__DIR__</code> macros.</p></li>
<li><p><code>__module__</code> argument provides information in the form of a <code>Module</code> object about the expansion context of the macro invocation. This allows macros to look up contextual information, such as existing bindings.</p></li>
</ul>
<ol start="4" type="1">
<li><strong>Hygiene</strong></li>
</ol>
<p>How to resolve variables within a macro result in an appropriate scope?</p>
<p>In short, we have several concerns:</p>
<ul>
<li><p>Macros must ensure that the variables they introduce in their returned expressions do not accidentally clash with existing variables in the surrounding code they expand into.</p></li>
<li><p>Conversely, the expressions that are passed into a macro as arguments are often expected to evaluate in the context of the surrounding code, interacting with and modifying the existing variables.</p></li>
<li><p>In addition, a macro may be called in a different module from where it was defined. In this case we need to ensure that all global variables are resolved in the correct module.</p></li>
</ul>
<p>Julia’s macro expander solves these problems in the following way:</p>
<ul>
<li>First, variables within a macro result are classified as either local or global. A variable is considered local if and only if <strong>it is assigned to declared local</strong>, or <strong>used as a function argument name</strong>. Otherwise, it is considered global. Local variables are then <strong>renamed to be unique</strong> via <code>gensym()</code> function, and global variables are resolved <strong>within the macro definition environment</strong>.</li>
</ul>
<p>The above rules can meet the following expectations:</p>
<div id="2ecb86d6" class="cell" data-execution_count="74">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co"># here, we want t0, t1, and val to be private temporary variables,</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and we want time_ns() and println() refer to the time_ns() and println() functions in Julia Base,</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="co"># not to any time_ns() and println() functions the user might have</span></span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a><span class="kw">macro</span> <span class="fu">time</span>(ex)</span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">quote</span></span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">local</span> t0 <span class="op">=</span> <span class="fu">time_ns</span>()</span>
<span id="cb134-7"><a href="#cb134-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">local</span> val <span class="op">=</span> <span class="op">$</span>ex</span>
<span id="cb134-8"><a href="#cb134-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">local</span> t1 <span class="op">=</span> <span class="fu">time_ns</span>()</span>
<span id="cb134-9"><a href="#cb134-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">println</span>(<span class="st">"elapsed time: "</span>, (t1<span class="op">-</span>t0)<span class="op">/</span><span class="fl">1e9</span>, <span class="st">" seconds"</span>)</span>
<span id="cb134-10"><a href="#cb134-10" aria-hidden="true" tabindex="-1"></a>        val</span>
<span id="cb134-11"><a href="#cb134-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb134-12"><a href="#cb134-12" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>But sometimes, we want some variables <strong>in the user expression</strong> to be resolved <strong>in the macro call environment</strong>. To achieve this goal, we can put the user expression in the <code>esc()</code> function, which means “escaping”. An expression wrapped in this manner is left alone by the macro expander and simply pasted into the output verbatim. Therefore it will be resolved in the macro call environment.</li>
</ul>
<p>The above rules can meet the following expectations:</p>
<div id="fd1e5e2f" class="cell" data-execution_count="75">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># suppose that the user has already defined a time_ns() function, different from the time_ns() function in the Julia Base,</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and he call @time in this way:</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a><span class="pp">@time</span> <span class="fu">time_ns</span>()</span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a><span class="co"># obviously, we just want time_ns() contained in the user expression to be resolved in the macro call environment, instead of the macro definition environment.</span></span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a><span class="co"># so this is why we need esc().</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="5" type="1">
<li><strong>Macro dispatch</strong></li>
</ol>
<p>Macro dispatch is based on <strong>the types of AST</strong> that are handed to the macro, not the types that AST evaluates to at runtime.</p>
<p>For example:</p>
<ul>
<li><p><code>Expr</code>: contains many different <code>head</code>s.</p></li>
<li><p><code>Symbol</code></p></li>
<li><p>Literal values: <code>Int64</code>, <code>Float64</code>, <code>String</code>, <code>Char</code>, etc.</p></li>
<li><p><code>QuoteNode</code></p></li>
<li><p><code>LineNumberNode</code></p></li>
</ul>
<p>and so on.</p>
</section>
<section id="non-standard-string-and-command-literals" class="level4" data-number="2.7.5">
<h4 data-number="2.7.5" class="anchored" data-anchor-id="non-standard-string-and-command-literals"><span class="header-section-number">2.7.5</span> Non-standard string and command literals</h4>
<ol type="1">
<li>Standard string literals</li>
</ol>
<p>For example, <code>"abc"</code>, <code>"""abc"""</code>.</p>
<ol start="2" type="1">
<li>Non-standard string literals</li>
</ol>
<p>To provide some convenient methods to generate some special objects using non-standard string literals.</p>
<div id="9fe58324" class="cell" data-execution_count="76">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="kw">macro</span> <span class="fu">r_str</span>(pattern, flags<span class="op">...</span>)</span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Regex</span>(pattern, flags<span class="op">...</span>)</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="st">r"^http"</span>  <span class="co"># equivalent to call @r_str "^http" to produce a regular expression object rather than a string</span></span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a><span class="co"># how to define a non-standard string literal</span></span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true" tabindex="-1"></a><span class="kw">macro</span> <span class="fu">&lt;name&gt;_str</span>(str)  <span class="co"># affixing _str after the formal macro name</span></span>
<span id="cb136-9"><a href="#cb136-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb136-10"><a href="#cb136-10" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb136-11"><a href="#cb136-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-12"><a href="#cb136-12" aria-hidden="true" tabindex="-1"></a><span class="co"># add a flag</span></span>
<span id="cb136-13"><a href="#cb136-13" aria-hidden="true" tabindex="-1"></a><span class="kw">macro</span> <span class="fu">&lt;name&gt;_str</span>(str, flag)  <span class="co"># flag is also a String type</span></span>
<span id="cb136-14"><a href="#cb136-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>  <span class="co"># the return value may depend on the flag content (different flags with different return values)</span></span>
<span id="cb136-15"><a href="#cb136-15" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb136-16"><a href="#cb136-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-17"><a href="#cb136-17" aria-hidden="true" tabindex="-1"></a><span class="co"># how to call</span></span>
<span id="cb136-18"><a href="#cb136-18" aria-hidden="true" tabindex="-1"></a>name<span class="st">"str"</span>flag</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>Standard command literals</li>
</ol>
<p>For example, <code>`echo hello, world`</code>.</p>
<div id="647ae7b7" class="cell" data-execution_count="77">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generate a Cmd from the str string which represents the shell command(s) to be executed</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="kw">macro</span> <span class="fu">cmd</span>(str)</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>    cmd_ex <span class="op">=</span> <span class="fu">shell_parse</span>(str, special<span class="op">=</span>shell_special, filename<span class="op">=</span><span class="fu">String</span>(__source__.file))[<span class="fl">1</span>]</span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">:</span>(<span class="fu">cmd_gen</span>(<span class="op">$</span>(<span class="fu">esc</span>(cmd_ex))))</span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a><span class="co"># if you want to call shell_parse() and cmd_gen(), you need do it in the forms of Base.shell_parse() and Base.cmd_gen(), respectively</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li>Non-standard command literals</li>
</ol>
<div id="f05bbebe" class="cell" data-execution_count="78">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="kw">macro</span> <span class="fu">echo_cmd</span>(str)</span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>    cmd_str <span class="op">=</span> <span class="fu">string</span>(<span class="st">"echo "</span>, str)</span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">:</span>(<span class="pp">@cmd</span> <span class="op">$</span>cmd_str)</span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> echo<span class="ss">`hello, world`</span></span>
<span id="cb138-7"><a href="#cb138-7" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(c)</span>
<span id="cb138-8"><a href="#cb138-8" aria-hidden="true" tabindex="-1"></a><span class="fu">show</span>(c)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>`echo hello, world`</code></pre>
</div>
</div>
</section>
<section id="generated-functions" class="level4" data-number="2.7.6">
<h4 data-number="2.7.6" class="anchored" data-anchor-id="generated-functions"><span class="header-section-number">2.7.6</span> Generated functions</h4>
<p>How to generate specialized code depending on only <strong>the types of their arguments</strong> using <strong>generated functions</strong> (argument names refer to types, and the code should return an expression)?</p>
<p>The capability of multiple dispatch can also be achieved by using generated functions, which is defined by prefixing <code>@generated</code> before a normal function definition, but we’d better obey some rules when defining generated functions.</p>
<p>Of course, we can define an optionally-generated function containing a generated version and a normal version by using <code>if @generated ... else ...</code> in a normal function body. Statements after <code>if @generated</code> is the generated one and after <code>else</code> the normal one. The compiler may use the generated one if convenient; otherwise it may choose to use the normal implementation instead.</p>
</section>
</section>
<section id="types" class="level3" data-number="2.8">
<h3 data-number="2.8" class="anchored" data-anchor-id="types"><span class="header-section-number">2.8</span> Types</h3>
<section id="basics-1" class="level4" data-number="2.8.1">
<h4 data-number="2.8.1" class="anchored" data-anchor-id="basics-1"><span class="header-section-number">2.8.1</span> Basics</h4>
<p>In Julia, all are objects having a type, and types are first-class objects.</p>
<ul>
<li><p>You can use <code>typeof()</code> to get the type of any object.</p></li>
<li><p>You can find the supertype of any type with <code>supertype()</code>: the root of type hierarchy is <code>Any</code>.</p></li>
<li><p>You can find the subtypes of any type with <code>subtypes()</code>: if there is no subtype for a given type, it will return <code>Type[]</code>.</p></li>
<li><p>You can check whether a type is a subtype of the other with the <code>&lt;:</code> operator (e.g.&nbsp;<code>String &lt;: Any</code>).</p></li>
<li><p>Seeing that you created an empty array with the type <code>Integer</code>, then you can only add elements with the type <code>Integer</code> or its subtypes to this array.</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Primitive and composite types">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Primitive and composite types
</div>
</div>
<div class="callout-body-container callout-body">
<p>We can roughly divide all types into primitive types (concrete types whose data consists of plain old bits) and composite types (derived from primitive types or other composite types). On the other hand, we can also devide all types into abstract types (with zero fields) and concrete types (with fields).</p>
<p>In Julia, there are three primitive types: integers, floating-point numbers and characters. You can use the function <code>isprimitivetype()</code> to check whether a type is a primitive type (e.g.&nbsp;<code>isprimitivetype(Int8)</code>).</p>
<p>It’s possible to define new primitive types in Julia by using <code>primitive type ... end</code>.</p>
</div>
</div>
<p>You can create composite types from primitive types or composite types:</p>
<ul>
<li>Definition of an <strong>immutable</strong> composite type:</li>
</ul>
<div id="6b015a3f" class="cell" data-execution_count="79">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> TypeName</span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Defining typed fields here</span></span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>e.g.</p>
<div id="950850d8" class="cell" data-execution_count="80">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Archer</span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>    name<span class="op">::</span><span class="dt">String</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>    health<span class="op">::</span><span class="dt">Int</span></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>    arrows<span class="op">::</span><span class="dt">Int</span></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-7"><a href="#cb141-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Once the composite type Archer is defined, you can instantiate the Archer object</span></span>
<span id="cb141-8"><a href="#cb141-8" aria-hidden="true" tabindex="-1"></a>william <span class="op">=</span> <span class="fu">Archer</span>(<span class="st">"William Tell"</span>, <span class="fl">30</span>, <span class="fl">24</span>)</span>
<span id="cb141-9"><a href="#cb141-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-10"><a href="#cb141-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Then access the values of fileds by using dot operator</span></span>
<span id="cb141-11"><a href="#cb141-11" aria-hidden="true" tabindex="-1"></a>william.name, william.health, william.arrows</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In Julia, <code>::</code> is used to annotate variables and expression with types.</p>
<p><code>x::T</code> means variable <code>x</code> should have type <code>T</code>.</p>
</div>
</div>
<ul>
<li>Definition of a <strong>mutable</strong> composite type:</li>
</ul>
<div id="0ed168f3" class="cell" data-execution_count="81">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="kw">mutable struct</span> TypeName</span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Defining typed fields here</span></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Definition of abstract type: <code>abstract type TypeName end</code>.</li>
</ul>
<p>Obviously, the type created by using <code>struct</code> is a concrete type.</p>
<p>You can create objects of a concrete type but not of an abstract type.</p>
<p>An abstract type cannot have any fields. Only concrete types can have fields or a value.</p>
<p>The purpose of abstract types is to facilitate the construction of type hierarchy.</p>
<p>A <strong>composite</strong> type is a concrete type with fields; a <strong>primitive</strong> type is a concrete type with a single value.</p>
<ul>
<li>You can use the subtype operator <code>&lt;:</code> to create a <strong>concrete</strong> or <strong>abstract</strong> subtype of an <strong>abstract</strong> type.</li>
</ul>
<div id="ec62a1ab" class="cell" data-execution_count="82">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="kw">abstract type</span> Warrior <span class="kw">end</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Archer is a subtype of Warrior</span></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> ArcherSoldier <span class="op">&lt;:</span><span class="dt"> Warrior</span></span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a>    name<span class="op">::</span><span class="dt">String</span></span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a>    health<span class="op">::</span><span class="dt">Int</span></span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true" tabindex="-1"></a>    arrows<span class="op">::</span><span class="dt">Int</span></span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb143-9"><a href="#cb143-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-10"><a href="#cb143-10" aria-hidden="true" tabindex="-1"></a><span class="fu">supertype</span>(ArcherSoldier)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="61">
<pre><code>Warrior</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Different with object-oriented languages, composite types in Julia <strong>can only have fields</strong>, and <strong>cannot have methods bound to them</strong>.</p>
</div>
</div>
<p>After creating concrete types, you can make objects of them (i.e.&nbsp;instantiate them) with arguments.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can only make objects of <strong>concrete types</strong>!</p>
</div>
</div>
<p>e.g.</p>
<div id="40a7d7b9" class="cell" data-execution_count="83">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="kw">mutable struct</span> TestType</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>    a<span class="op">::</span><span class="dt">Int64</span></span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>    b<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-6"><a href="#cb145-6" aria-hidden="true" tabindex="-1"></a>t1 <span class="op">=</span> <span class="fu">TestType</span>(<span class="fl">1</span>, <span class="fl">10.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="62">
<pre><code>TestType(1, 10.5)</code></pre>
</div>
</div>
<p>You can instantiate objects of <code>TestType</code> in this way <code>t1 = TestType(1, 10.5)</code>, because Julia automatically creates a special function called <strong>constructor</strong> with the same name as your type. A constructor is responsible for making an instance (object) of the type it is associated with. Julia adds <strong>two methods</strong> to the constructor function, which takes the same number of arguments as you have fields. <strong>One method uses type annotations for its arguments, as specified for each field in the <code>struct</code></strong>. <strong>The other takes arguments of <code>Any</code> type</strong>.</p>
<div id="0ee805c8" class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(TestType)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="63">
# 2 methods for type constructor:<ul><li> TestType(a::<b>Int64</b>, b::<b>Float64</b>) in Main at In[62]:2</li> <li> TestType(a, b) in Main at In[62]:2</li> </ul>
</div>
</div>
<div id="9d30bdd0" class="cell" data-execution_count="85">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">TestType</span>(a<span class="op">::</span><span class="dt">Int64</span>)</span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">TestType</span>(a, a)</span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(TestType)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="64">
# 3 methods for type constructor:<ul><li> TestType(a::<b>Int64</b>) in Main at In[64]:1</li> <li> TestType(a::<b>Int64</b>, b::<b>Float64</b>) in Main at In[62]:2</li> <li> TestType(a, b) in Main at In[62]:2</li> </ul>
</div>
</div>
<div id="d9699130" class="cell" data-execution_count="86">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">TestType</span>(<span class="fl">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="65">
<pre><code>TestType(100, 100.0)</code></pre>
</div>
</div>
<p>Surely, you can add methods to this constructor function outside of <code>struct</code> in the same manner as any other fucntion, called <strong>outer constructor</strong>.</p>
<p>In addition, you can define accessors (getters and setters) as well as other functions accepted arguments of this type to achieve some tasks.</p>
<p>You can only provide types without concrete parameters to define a function tied to types (this type of function are usually used to get some properties of a type, independent of its objects):</p>
<div id="02aa6019" class="cell" data-execution_count="87">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">toy</span>(<span class="op">::</span><span class="dt">TestType</span>) <span class="op">=</span> <span class="fl">100</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> <span class="fu">TestType</span>(<span class="fl">100</span>)</span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a><span class="fu">toy</span>(t)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="66">
<pre><code>100</code></pre>
</div>
</div>
<p>In functions (including outer constructors) you defined outside of <code>struct</code>, you can easily check whether user-provided arguments are valid or not. But how can we check this when instantiating objects of a concrete type by using constructors Julia created?</p>
<p>To solve this problem, we need to define the constructor inside of <code>struct</code>, called <strong>inner constructor</strong>. Once you do this, you tell Julia that you don’t want it to create constructor methods automatically (i.e.&nbsp;disable this manner). Then, users can only use the constructor you defined to instantiate objects of a concrete type.</p>
<div id="79f6f713" class="cell" data-execution_count="88">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="kw">mutable struct</span> TempType</span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>    a<span class="op">::</span><span class="dt">Int64</span></span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>    b<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>    diff<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">TempType</span>(a<span class="op">::</span><span class="dt">Int64</span>, b<span class="op">::</span><span class="dt">Float64</span>)</span>
<span id="cb153-7"><a href="#cb153-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">new</span>(a, b, b <span class="op">-</span> a)  <span class="co"># We don't want users to provide the value of diff, which is defined as the difference of b and a</span></span>
<span id="cb153-8"><a href="#cb153-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb153-9"><a href="#cb153-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In inner constructor, you need use <code>new()</code> (which is only available inside an inner constructor) to instantiate objects of a concrete type, which accepts <strong>zero or more</strong> arguments <strong>but never more aguments than the number of fields in your composite type</strong>, because creating an inner constructor removes all constructor methods created by Julia. Feilds with missing values will be set to random values.</p>
</div>
</div>
<div id="6b96507a" class="cell" data-execution_count="89">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(TempType)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="68">
# 1 method for type constructor:<ul><li> TempType(a::<b>Int64</b>, b::<b>Float64</b>) in Main at In[67]:6</li> </ul>
</div>
</div>
<div id="0032baad" class="cell" data-execution_count="90">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">TempType</span>(<span class="fl">1</span>, <span class="fl">10.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="69">
<pre><code>TempType(1, 10.5, 9.5)</code></pre>
</div>
</div>
<div id="fb27d27f" class="cell" data-execution_count="91">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This will raise an error</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="fu">TempType</span>(<span class="fl">1</span>, <span class="fl">10.5</span>, <span class="fl">9.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>MethodError: no method matching TempType(::Int64, ::Float64, ::Float64)

Closest candidates are:
  TempType(::Int64, ::Float64)
<span class="ansi-bright-black-fg">   @</span> <span class="ansi-magenta-fg">Main</span> <span style="text-decoration:underline" class="ansi-bright-black-fg">In[67]:6</span>


Stacktrace:
 [1] top-level scope
   @ In[70]:3</pre>
</div>
</div>
</div>
</section>
<section id="multiple-dispatch" class="level4" data-number="2.8.2">
<h4 data-number="2.8.2" class="anchored" data-anchor-id="multiple-dispatch"><span class="header-section-number">2.8.2</span> Multiple dispatch</h4>
<section id="how-does-multiple-dispatch-work" class="level5" data-number="2.8.2.1">
<h5 data-number="2.8.2.1" class="anchored" data-anchor-id="how-does-multiple-dispatch-work"><span class="header-section-number">2.8.2.1</span> How does multiple dispatch work</h5>
<div id="a47d4439" class="cell" data-execution_count="92">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">myadd</span>(x<span class="op">::</span><span class="dt">Int</span>, y<span class="op">::</span><span class="dt">Int</span>)</span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">"The sum is: "</span>)</span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">printstyled</span>(x <span class="op">+</span> y, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, bold <span class="op">=</span> <span class="cn">true</span>, color <span class="op">=</span> <span class="op">:</span>red)</span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-6"><a href="#cb158-6" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">myadd</span>(x<span class="op">::</span><span class="dt">String</span>, y<span class="op">::</span><span class="dt">String</span>)</span>
<span id="cb158-7"><a href="#cb158-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">"The concatenated string is: "</span>)</span>
<span id="cb158-8"><a href="#cb158-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">printstyled</span>(<span class="fu">join</span>([x, y]), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, bold <span class="op">=</span> <span class="cn">true</span>, color <span class="op">=</span> <span class="op">:</span>red)</span>
<span id="cb158-9"><a href="#cb158-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb158-10"><a href="#cb158-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-11"><a href="#cb158-11" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">myadd</span>(x<span class="op">::</span><span class="dt">Char</span>, y<span class="op">::</span><span class="dt">Char</span>)</span>
<span id="cb158-12"><a href="#cb158-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">"The character is: "</span>)</span>
<span id="cb158-13"><a href="#cb158-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">printstyled</span>(<span class="fu">Char</span>(<span class="fu">Int</span>(x) <span class="op">+</span> <span class="fu">Int</span>(y)), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, bold <span class="op">=</span> <span class="cn">true</span>, color <span class="op">=</span> <span class="op">:</span>red)</span>
<span id="cb158-14"><a href="#cb158-14" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb158-15"><a href="#cb158-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-16"><a href="#cb158-16" aria-hidden="true" tabindex="-1"></a><span class="fu">myadd</span>(<span class="fl">1</span>, <span class="fl">1</span>)</span>
<span id="cb158-17"><a href="#cb158-17" aria-hidden="true" tabindex="-1"></a><span class="fu">myadd</span>(<span class="st">"abc"</span>, <span class="st">"def"</span>)</span>
<span id="cb158-18"><a href="#cb158-18" aria-hidden="true" tabindex="-1"></a><span class="fu">myadd</span>(<span class="ch">'W'</span>, <span class="ch">'Y'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The sum is: 2
The concatenated string is: abcdef
The character is: °</code></pre>
</div>
</div>
<p>How does Julia know which function should be called in this situation?</p>
<ul>
<li><p>In fact, we defined three <strong>methods</strong>, attached to the function <code>myadd</code>, instead of three <strong>functions</strong> above.</p></li>
<li><p>In Julia, functions are just names. Without attached methods, they cannot do anything. <strong>Code is always stored inside methods</strong>. <strong>The type of arguments</strong> determines which method will get executed <strong>at runtime</strong>.</p></li>
<li><p>You can use <code>methods()</code> to check how many methods a function contains (e.g.&nbsp;<code>methods(myadd)</code>).</p></li>
<li><p>If some parameters without types specified, the type will be <code>Any</code> (i.e.&nbsp;accept all types of values).</p></li>
<li><p>You can only define functions without methods:</p></li>
</ul>
<div id="0c2a4a33" class="cell" data-execution_count="93">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> func_no_method <span class="kw">end</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a><span class="fu">func_no_method</span>(<span class="fl">1</span>, <span class="fl">1</span>)  <span class="co"># Attempt to call a function with no methods</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: MethodError: no method matching func_no_method(::Int64, ::Int64)
MethodError: no method matching func_no_method(::Int64, ::Int64)

Stacktrace:
 [1] top-level scope
   @ In[72]:3</code></pre>
</div>
</div>
<div id="3c8e25d6" class="cell" data-execution_count="94">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">func_not_defined</span>(<span class="fl">1</span>, <span class="fl">1</span>)  <span class="co"># Attempt to call a function not defined</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: UndefVarError: `func_not_defined` not defined
UndefVarError: `func_not_defined` not defined

Stacktrace:
 [1] top-level scope
   @ In[73]:2</code></pre>
</div>
</div>
</section>
<section id="the-way-julia-selects-the-correct-method-of-a-function-for-each-situation" class="level5" data-number="2.8.2.2">
<h5 data-number="2.8.2.2" class="anchored" data-anchor-id="the-way-julia-selects-the-correct-method-of-a-function-for-each-situation"><span class="header-section-number">2.8.2.2</span> The way Julia selects the correct method of a function for each situation</h5>
<p>Internally, Julia has a list of functions. Every function enters another list containing the methods, which deals with different argument type combinations.</p>
<ol type="1">
<li><p>First, Julia matches the function name (i.e.&nbsp;the called function should be defined).</p></li>
<li><p>Then, Julia matches the type combination of arguments and parameters (i.e.&nbsp;the combination of types of arguments passed = the combination of types of parameters defined in a method).</p></li>
</ol>
<p>In contrast with multiple dispatch, what method is used is decided only by the type of the first argument in single dispatch or object-oriented languages (i.e.&nbsp;in <code>a.join(b)</code>, the function (method) used is only decided by the object <code>a</code>, not decided by both <code>a</code> and <code>b</code>, because in object-oriented languages, various attributes and fuctions (methods) are bound to objects of a class). If you defined a function multiple times with arguments of different types in object-oriented languages, the previous will be overwritten by the latter.</p>
<p>In statically typed languages which allows you to define a function multiple times with arguments of different types, when the code gts compiled, the compiler will pick the right function. But the selection process can only be done during compilation, it cannot be done during execution, which Julia can do.</p>
<p>i.e.&nbsp;statically typed languages cannot deal with such a situation:</p>
<div id="2d6efa15" class="cell" data-execution_count="95">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">f1</span>(a<span class="op">::</span><span class="dt">Warrior</span>, b<span class="op">::</span><span class="dt">Warrior</span>)</span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">f2</span>(a, b)</span>
<span id="cb164-3"><a href="#cb164-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Some other statements</span></span>
<span id="cb164-4"><a href="#cb164-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the function <code>f1</code>, defined above, <code>a</code> and <code>b</code> must be subtypes of the <code>Warrior</code> type. Suppose that the function <code>f1</code> is designed to allow accepting and dealing with these <code>a</code> and <code>b</code> with differnt subtypes of <code>Warrior</code>. When compiling the method <code>f1</code>, it only knows that <code>a</code> and <code>b</code> must be subtypes of <code>Warrior</code> but cannot know what concrete types they have. Then it won’t pick up the right method of <code>f2</code> (suppose <code>f2</code> has at least two methods bound to it).</p>
</section>
</section>
<section id="conversion-and-promotion" class="level4" data-number="2.8.3">
<h4 data-number="2.8.3" class="anchored" data-anchor-id="conversion-and-promotion"><span class="header-section-number">2.8.3</span> Conversion and promotion</h4>
<section id="why-do-we-need-type-promotion" class="level5" data-number="2.8.3.1">
<h5 data-number="2.8.3.1" class="anchored" data-anchor-id="why-do-we-need-type-promotion"><span class="header-section-number">2.8.3.1</span> Why do we need type promotion</h5>
<p>Inside a microprocessor, mathematical operations are always performed <strong>between identical types of numbers</strong>.</p>
<p>Thus, when dealing with expressions composed of different number types, all higher-level programming languages have to convert all arguments in the expression <strong>to the same number type</strong>.</p>
<p>But <strong>what should this common number type be</strong>? Figuring out this common type if what promotion is all about.</p>
<p>In most mainstream languages, the mechanisms and rules governing number promotion are hardwired into the language and detaild in the specifications of the language.</p>
<p>But Julia promotion rules are defined in the standard library, not in the internals of the Julia JIT compiler. This allows you to <strong>extend</strong> the existing system, <strong>not modifying it</strong>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can use the <code>@edit</code> macro to explore the Julia source code.</p>
<p>By prefixing with the <code>@edit</code> macro, Julia jumps to the definition of the function called to handled the expression (e.g.&nbsp;<code>@edit 1+1</code>).</p>
<p>Before using this, you may need to set the environment variable <code>JULIA_EDITOR</code> in your OS.</p>
</div>
</div>
</section>
<section id="how-does-type-promotion-work" class="level5" data-number="2.8.3.2">
<h5 data-number="2.8.3.2" class="anchored" data-anchor-id="how-does-type-promotion-work"><span class="header-section-number">2.8.3.2</span> How does type promotion work</h5>
<p>Julia performs type promotion by calling the <code>promote()</code> function, which promotes all arguments to a least common denominator.</p>
<p>e.g.&nbsp;every arithmetic operation on some <code>Number</code> in Julia first calls <code>promote()</code> before performing the actual arithmetic operation.</p>
<p>e.g.&nbsp;here, <code>promote()</code> promotes an integer and a floating-point number to floating-point numbers.</p>
<div id="18a79158" class="cell" data-execution_count="96">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">promote</span>(<span class="fl">1</span>, <span class="fl">2.5</span>)  <span class="co"># It returns a tuple</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="74">
<pre><code>(1.0, 2.5)</code></pre>
</div>
</div>
</section>
<section id="how-does-conversion-work" class="level5" data-number="2.8.3.3">
<h5 data-number="2.8.3.3" class="anchored" data-anchor-id="how-does-conversion-work"><span class="header-section-number">2.8.3.3</span> How does conversion work</h5>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Conversion means converting from one type to another <strong>related</strong> type.</p>
<p>This is totally different from <strong>parsing a text string to produce a number</strong>, because a string and a number are not related types.</p>
</div>
</div>
<p>For number type conversion, it is recommended to use the constructor of the type you want to convert to.</p>
<div id="c31b3a1f" class="cell" data-execution_count="97">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Int8</span>(<span class="fl">32</span>)  <span class="co"># Convert a number of Int64 to Int8</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="75">
<pre><code>32</code></pre>
</div>
</div>
<p>Different from using type constructors, Julia calls the <code>convert()</code> function to achieve this.</p>
<div id="8a083e45" class="cell" data-execution_count="98">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">convert</span>(<span class="dt">Int8</span>, <span class="fl">32</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="76">
<pre><code>32</code></pre>
</div>
</div>
<p>The first argument of <code>convert()</code> is a type object (we know that all are objects in Julia).</p>
<p>Actually, the type of <code>Int64</code> is <code>Type{Int64}</code>.</p>
<div id="d6697c0a" class="cell" data-execution_count="99">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Int64</span> isa <span class="dt">Type</span>{<span class="dt">Int64</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="77">
<pre><code>true</code></pre>
</div>
</div>
<p>You can regard <code>Type</code> as a function, accepting a type argument <code>T</code>, and then returning the type of <code>T</code> - <code>Type{T}</code>.</p>
</section>
<section id="an-example-extending-the-type-system" class="level5" data-number="2.8.3.4">
<h5 data-number="2.8.3.4" class="anchored" data-anchor-id="an-example-extending-the-type-system"><span class="header-section-number">2.8.3.4</span> An example extending the type system</h5>
<p>Here we give an example of defining units for angles (redian/degree) and related operations.</p>
<section id="defining-unit-types-and-constructors" class="level6" data-number="2.8.3.4.1">
<h6 data-number="2.8.3.4.1" class="anchored" data-anchor-id="defining-unit-types-and-constructors"><span class="header-section-number">2.8.3.4.1</span> Defining unit types and constructors</h6>
<div id="dff1fc59" class="cell" data-execution_count="100">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="kw">abstract type</span> Angle <span class="kw">end</span>  <span class="co"># The super type of Radian and Degree</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Radian <span class="op">&lt;:</span><span class="dt"> Angle</span></span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a>    radians<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-6"><a href="#cb173-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Defining customized constructor</span></span>
<span id="cb173-7"><a href="#cb173-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">Radian</span>(radians<span class="op">::</span><span class="dt">Number</span>=<span class="fl">0.0</span>)</span>
<span id="cb173-8"><a href="#cb173-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">new</span>(radians)</span>
<span id="cb173-9"><a href="#cb173-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb173-10"><a href="#cb173-10" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb173-11"><a href="#cb173-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-12"><a href="#cb173-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 1 degree = 60 minutes</span></span>
<span id="cb173-13"><a href="#cb173-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 1 minute = 60 seconds</span></span>
<span id="cb173-14"><a href="#cb173-14" aria-hidden="true" tabindex="-1"></a><span class="co"># degrees, minutes, seconds (DMS)</span></span>
<span id="cb173-15"><a href="#cb173-15" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> DMS <span class="op">&lt;:</span><span class="dt"> Angle</span></span>
<span id="cb173-16"><a href="#cb173-16" aria-hidden="true" tabindex="-1"></a>    seconds<span class="op">::</span><span class="dt">Int</span></span>
<span id="cb173-17"><a href="#cb173-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-18"><a href="#cb173-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Defining customized constructor</span></span>
<span id="cb173-19"><a href="#cb173-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">DMS</span>(degrees<span class="op">::</span><span class="dt">Integer</span>=<span class="fl">0</span>, minutes<span class="op">::</span><span class="dt">Integer</span>=<span class="fl">0</span>, seconds<span class="op">::</span><span class="dt">Integer</span>=<span class="fl">0</span>)</span>
<span id="cb173-20"><a href="#cb173-20" aria-hidden="true" tabindex="-1"></a>        <span class="fu">new</span>(degrees <span class="op">*</span> <span class="fl">60</span> <span class="op">*</span> <span class="fl">60</span> <span class="op">+</span> minutes <span class="op">*</span> <span class="fl">60</span> <span class="op">+</span> seconds)</span>
<span id="cb173-21"><a href="#cb173-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb173-22"><a href="#cb173-22" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="defining-accessors" class="level6" data-number="2.8.3.4.2">
<h6 data-number="2.8.3.4.2" class="anchored" data-anchor-id="defining-accessors"><span class="header-section-number">2.8.3.4.2</span> Defining accessors</h6>
<div id="443c5929" class="cell" data-execution_count="101">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">radians</span>(radian<span class="op">::</span><span class="dt">Radian</span>) <span class="op">=</span> radian.radians</span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a><span class="fu">seconds</span>(dms<span class="op">::</span><span class="dt">DMS</span>) <span class="op">=</span> dms.seconds <span class="op">%</span> <span class="fl">60</span></span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-5"><a href="#cb174-5" aria-hidden="true" tabindex="-1"></a><span class="fu">minutes</span>(dms<span class="op">::</span><span class="dt">DMS</span>) <span class="op">=</span> (dms.seconds <span class="op">÷</span> <span class="fl">60</span>) <span class="op">%</span> <span class="fl">60</span></span>
<span id="cb174-6"><a href="#cb174-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-7"><a href="#cb174-7" aria-hidden="true" tabindex="-1"></a><span class="fu">degrees</span>(dms<span class="op">::</span><span class="dt">DMS</span>) <span class="op">=</span> (dms.seconds <span class="op">÷</span> <span class="fl">60</span>) <span class="op">÷</span> <span class="fl">60</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="79">
<pre><code>degrees (generic function with 1 method)</code></pre>
</div>
</div>
</section>
<section id="displaying-angles" class="level6" data-number="2.8.3.4.3">
<h6 data-number="2.8.3.4.3" class="anchored" data-anchor-id="displaying-angles"><span class="header-section-number">2.8.3.4.3</span> Displaying angles</h6>
<p>The Julia REPL environment uses the <code>show(io::IO, data)</code> to display data of some specific type to the user.</p>
<div id="c08e1ff9" class="cell" data-execution_count="102">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Base</span>: show</span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">show</span>(io<span class="op">::</span><span class="dt">IO</span>, radian<span class="op">::</span><span class="dt">Radian</span>)</span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(io, <span class="fu">radians</span>(radian), <span class="st">"rad"</span>)</span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb176-6"><a href="#cb176-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-7"><a href="#cb176-7" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">show</span>(io<span class="op">::</span><span class="dt">IO</span>, dms<span class="op">::</span><span class="dt">DMS</span>)</span>
<span id="cb176-8"><a href="#cb176-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(io, <span class="fu">degrees</span>(dms), <span class="st">"° "</span>, <span class="fu">minutes</span>(dms), <span class="st">"' "</span>, <span class="fu">seconds</span>(dms), <span class="st">"''"</span>)</span>
<span id="cb176-9"><a href="#cb176-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="80">
<pre><code>show (generic function with 383 methods)</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Here, we only want to attach new methods to the <code>show()</code> function, which is already defined in the Base package.</p>
<p>So we need to first import the <code>show()</code> function from the Base package; otherwise, it will automatically create a new function named <code>show</code>, which belongs to the namespace of Main, instead of Base, and then attach the newly defined method to this function.</p>
</div>
</div>
</section>
<section id="defining-type-conversions" class="level6" data-number="2.8.3.4.4">
<h6 data-number="2.8.3.4.4" class="anchored" data-anchor-id="defining-type-conversions"><span class="header-section-number">2.8.3.4.4</span> Defining type conversions</h6>
<div id="9333cba5" class="cell" data-execution_count="103">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Base</span>: convert</span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Radian</span>(dms<span class="op">::</span><span class="dt">DMS</span>) <span class="op">=</span> <span class="fu">Radian</span>(<span class="fu">deg2rad</span>(dms.seconds <span class="op">/</span> <span class="fl">3600</span>))</span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a><span class="fu">DMS</span>(radian<span class="op">::</span><span class="dt">Radian</span>) <span class="op">=</span> <span class="fu">DMS</span>(<span class="fu">floor</span>(<span class="dt">Int</span>, <span class="fu">rad2deg</span>(radian.radians) <span class="op">*</span> <span class="fl">3600</span>))</span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-6"><a href="#cb178-6" aria-hidden="true" tabindex="-1"></a><span class="fu">convert</span>(<span class="op">::</span><span class="dt">Type{Radian}</span>, dms<span class="op">::</span><span class="dt">DMS</span>) <span class="op">=</span> <span class="fu">Radian</span>(dms)</span>
<span id="cb178-7"><a href="#cb178-7" aria-hidden="true" tabindex="-1"></a><span class="fu">convert</span>(<span class="op">::</span><span class="dt">Type{DMS}</span>, radian<span class="op">::</span><span class="dt">Radian</span>) <span class="op">=</span> <span class="fu">DMS</span>(radian)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="81">
<pre><code>convert (generic function with 233 methods)</code></pre>
</div>
</div>
</section>
<section id="defining-type-promotions" class="level6" data-number="2.8.3.4.5">
<h6 data-number="2.8.3.4.5" class="anchored" data-anchor-id="defining-type-promotions"><span class="header-section-number">2.8.3.4.5</span> Defining type promotions</h6>
<p>In fact, <code>promote()</code> does its job by calling the <code>promote_rule()</code> function.</p>
<div id="879cad48" class="cell" data-execution_count="104">
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Base</span>: promote_rule</span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a><span class="co"># If an expression contains both Radian and DMS, convert DMS into Radian</span></span>
<span id="cb180-4"><a href="#cb180-4" aria-hidden="true" tabindex="-1"></a><span class="fu">promote_rule</span>(<span class="op">::</span><span class="dt">Type{Radian}</span>, <span class="op">::</span><span class="dt">Type{DMS}</span>) <span class="op">=</span> Radian</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="82">
<pre><code>promote_rule (generic function with 135 methods)</code></pre>
</div>
</div>
</section>
<section id="defining-arithmetic-operations" class="level6" data-number="2.8.3.4.6">
<h6 data-number="2.8.3.4.6" class="anchored" data-anchor-id="defining-arithmetic-operations"><span class="header-section-number">2.8.3.4.6</span> Defining arithmetic operations</h6>
<div id="58b3aa4d" class="cell" data-execution_count="105">
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Base</span>: +, -</span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true" tabindex="-1"></a><span class="co"># If an expression contains both Radian and DMS, convert DMS into Radian, and then perform arithmetic operations of Radian</span></span>
<span id="cb182-4"><a href="#cb182-4" aria-hidden="true" tabindex="-1"></a><span class="fu">+</span>(θ<span class="op">::</span><span class="dt">Angle</span>, α<span class="op">::</span><span class="dt">Angle</span>) <span class="op">=</span> <span class="fu">+</span>(<span class="fu">promote</span>(θ, α)<span class="op">...</span>)</span>
<span id="cb182-5"><a href="#cb182-5" aria-hidden="true" tabindex="-1"></a><span class="fu">-</span>(θ<span class="op">::</span><span class="dt">Angle</span>, α<span class="op">::</span><span class="dt">Angle</span>) <span class="op">=</span> <span class="fu">-</span>(<span class="fu">promote</span>(θ, α)<span class="op">...</span>)</span>
<span id="cb182-6"><a href="#cb182-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-7"><a href="#cb182-7" aria-hidden="true" tabindex="-1"></a><span class="fu">+</span>(θ<span class="op">::</span><span class="dt">Radian</span>, α<span class="op">::</span><span class="dt">Radian</span>) <span class="op">=</span> <span class="fu">Radian</span>(θ.radians <span class="op">+</span> α.radians)</span>
<span id="cb182-8"><a href="#cb182-8" aria-hidden="true" tabindex="-1"></a><span class="fu">-</span>(θ<span class="op">::</span><span class="dt">Radian</span>, α<span class="op">::</span><span class="dt">Radian</span>) <span class="op">=</span> <span class="fu">Radian</span>(θ.radians <span class="op">-</span> α.radians)</span>
<span id="cb182-9"><a href="#cb182-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-10"><a href="#cb182-10" aria-hidden="true" tabindex="-1"></a><span class="fu">+</span>(θ<span class="op">::</span><span class="dt">DMS</span>, α<span class="op">::</span><span class="dt">DMS</span>) <span class="op">=</span> <span class="fu">DMS</span>(θ.seconds <span class="op">+</span> α.seconds)</span>
<span id="cb182-11"><a href="#cb182-11" aria-hidden="true" tabindex="-1"></a><span class="fu">-</span>(θ<span class="op">::</span><span class="dt">DMS</span>, α<span class="op">::</span><span class="dt">DMS</span>) <span class="op">=</span> <span class="fu">DMS</span>(θ.seconds <span class="op">-</span> α.seconds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="83">
<pre><code>- (generic function with 219 methods)</code></pre>
</div>
</div>
</section>
<section id="making-pretty-literals-by-using-literal-coefficients" class="level6" data-number="2.8.3.4.7">
<h6 data-number="2.8.3.4.7" class="anchored" data-anchor-id="making-pretty-literals-by-using-literal-coefficients"><span class="header-section-number">2.8.3.4.7</span> Making pretty literals by using literal coefficients</h6>
<div id="69234500" class="cell" data-execution_count="106">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Base</span>: *, /</span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a><span class="fu">*</span>(coeff<span class="op">::</span><span class="dt">Number</span>, dms<span class="op">::</span><span class="dt">DMS</span>) <span class="op">=</span> <span class="fu">DMS</span>(<span class="fl">0</span>, <span class="fl">0</span>, coeff <span class="op">*</span> dms.seconds)</span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a><span class="fu">*</span>(dms<span class="op">::</span><span class="dt">DMS</span>, coeff<span class="op">::</span><span class="dt">Number</span>) <span class="op">=</span> coeff <span class="op">*</span> dms</span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a><span class="op">/</span>(dms<span class="op">::</span><span class="dt">DMS</span>, denom<span class="op">::</span><span class="dt">Number</span>) <span class="op">=</span> <span class="fu">DMS</span>(<span class="fl">0</span>, <span class="fl">0</span>, dms.seconds <span class="op">/</span> denom)</span>
<span id="cb184-6"><a href="#cb184-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-7"><a href="#cb184-7" aria-hidden="true" tabindex="-1"></a><span class="fu">*</span>(coeff<span class="op">::</span><span class="dt">Number</span>, radian<span class="op">::</span><span class="dt">Radian</span>) <span class="op">=</span> <span class="fu">Radian</span>(coeff <span class="op">*</span> radian.radians)</span>
<span id="cb184-8"><a href="#cb184-8" aria-hidden="true" tabindex="-1"></a><span class="fu">*</span>(radian<span class="op">::</span><span class="dt">Radian</span>, coeff<span class="op">::</span><span class="dt">Number</span>) <span class="op">=</span> coeff <span class="op">*</span> radian</span>
<span id="cb184-9"><a href="#cb184-9" aria-hidden="true" tabindex="-1"></a><span class="op">/</span>(radian<span class="op">::</span><span class="dt">Radian</span>, denom<span class="op">::</span><span class="dt">Number</span>) <span class="op">=</span> <span class="fu">Radian</span>(radian.radians <span class="op">/</span> denom)</span>
<span id="cb184-10"><a href="#cb184-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-11"><a href="#cb184-11" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> ° <span class="op">=</span> <span class="fu">DMS</span>(<span class="fl">1</span>)</span>
<span id="cb184-12"><a href="#cb184-12" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> rad <span class="op">=</span> <span class="fu">Radian</span>(<span class="fl">1.0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="84">
<pre><code>1.0rad</code></pre>
</div>
</div>
</section>
<section id="overriding-standard-sin-and-cos-functions-to-only-accept-dms-and-radian" class="level6" data-number="2.8.3.4.8">
<h6 data-number="2.8.3.4.8" class="anchored" data-anchor-id="overriding-standard-sin-and-cos-functions-to-only-accept-dms-and-radian"><span class="header-section-number">2.8.3.4.8</span> Overriding standard <code>sin()</code> and <code>cos()</code> functions to only accept <code>DMS</code> and <code>Radian</code></h6>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the following code snippet, we do not import <code>sin()</code> and <code>cos()</code> from the Base package, instead of overriding them (i.e.&nbsp;create a function and then attach the newly defined method to it).</p>
</div>
</div>
<div id="1fffb1d6" class="cell" data-execution_count="107">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The standard sin() and cos() only accept numbers regarded as the radian</span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sin</span>(rad<span class="op">::</span><span class="dt">Radian</span>) <span class="op">=</span> <span class="bu">Base</span>.<span class="fu">sin</span>(rad.radians)</span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cos</span>(rad<span class="op">::</span><span class="dt">Radian</span>) <span class="op">=</span> <span class="bu">Base</span>.<span class="fu">cos</span>(rad.radians)</span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-5"><a href="#cb186-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sin</span>(dms<span class="op">::</span><span class="dt">DMS</span>) <span class="op">=</span> <span class="fu">sin</span>(<span class="fu">Radian</span>(dms))</span>
<span id="cb186-6"><a href="#cb186-6" aria-hidden="true" tabindex="-1"></a><span class="fu">cos</span>(dms<span class="op">::</span><span class="dt">DMS</span>) <span class="op">=</span> <span class="fu">cos</span>(<span class="fu">Radian</span>(dms))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="representing-unknown-values" class="level4" data-number="2.8.4">
<h4 data-number="2.8.4" class="anchored" data-anchor-id="representing-unknown-values"><span class="header-section-number">2.8.4</span> Representing unknown values</h4>
<ol type="1">
<li><code>nothing</code>: indicates something not existed.</li>
</ol>
<p>The <code>nothing</code> object is an instance of the type <code>Nothing</code>, which is a composite type without any fields.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Every instance of a composite type with zero fields is the same obeject.</p>
<div id="b968d7f9" class="cell" data-execution_count="108">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> MyNothing</span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># No fields defined here</span></span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-5"><a href="#cb187-5" aria-hidden="true" tabindex="-1"></a>obj1 <span class="op">=</span> <span class="fu">MyNothing</span>()</span>
<span id="cb187-6"><a href="#cb187-6" aria-hidden="true" tabindex="-1"></a>obj2 <span class="op">=</span> <span class="fu">MyNothing</span>()</span>
<span id="cb187-7"><a href="#cb187-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-8"><a href="#cb187-8" aria-hidden="true" tabindex="-1"></a>obj1 <span class="op">==</span> obj2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="85">
<pre><code>true</code></pre>
</div>
</div>
<p>Instances of different composite types with zero fields are different.</p>
<div id="c8935bce" class="cell" data-execution_count="109">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> AgainNothing</span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># No fields defined here</span></span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true" tabindex="-1"></a>obj1 <span class="op">=</span> <span class="fu">MyNothing</span>()</span>
<span id="cb189-6"><a href="#cb189-6" aria-hidden="true" tabindex="-1"></a>obj2 <span class="op">=</span> <span class="fu">AgainNothing</span>()</span>
<span id="cb189-7"><a href="#cb189-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-8"><a href="#cb189-8" aria-hidden="true" tabindex="-1"></a>obj1 <span class="op">==</span> obj2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="86">
<pre><code>false</code></pre>
</div>
</div>
</div>
</div>
<ol start="2" type="1">
<li><code>missing</code>: indicates something, which should have existed, but missing due to some reason (i.e.&nbsp;unlike <code>nothing</code>, missing data actually exists in the real world, but we don’t know what it is).</li>
</ol>
<p>The concept of <code>missing</code>, which is of type <code>Missing</code>, a composite type with zero fields, is the same as that in statistics.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Any expression containing <code>missing</code> will be evaluated to <code>missing</code>!</p>
<p>You can use <code>skipmissing()</code> to filter <code>missing</code> out.</p>
</div>
</div>
<ol start="3" type="1">
<li><code>NaN</code>: indicates something, which is <strong>Not a Number</strong>.</li>
</ol>
<p><strong>Similarly, <code>NaN</code> also propagates through all calculations.</strong></p>
<p>The only difference of the propagation behaviour between <code>NaN</code> and <code>missing</code> is that <code>NaN</code> always returns <code>false</code> when <code>NaN</code> is used in a comparison expression, where <code>missing</code> always returns <code>missing</code>:</p>
<div id="aa5c313b" class="cell" data-execution_count="110">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="cn">missing</span> <span class="op">&lt;</span> <span class="fl">10</span>, <span class="cn">NaN</span> <span class="op">&lt;</span> <span class="fl">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="87">
<pre><code>(missing, false)</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>0/0</code> returns <code>NaN</code>.</p>
<p>In other words, <code>0/0</code> may be a valid number somewhere else, but now it doesn’t belong to any number we have already defined; thus it is regarded as <code>NaN</code>.</p>
</div>
</div>
<ol start="4" type="1">
<li><code>#undef</code>: indicates something undefined (i.e.&nbsp;a variable was not instantiated to a known value).</li>
</ol>
<p>e.g.&nbsp;Julia allows the construction of composite objects with uninitialized fields; however, it will throw an exception if you try to access an uninitialized field:</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Both <code>firstname</code> and <code>lastname</code> in the type <code>Person</code> have no type annotations. If you define them with type annotations, Julia will automatically instantiate them to some values based on their types.</p>
<p>In other words, if some fields have no type annotations, then Julia has no way of guessing what the fields should be initialized to.</p>
</div>
</div>
<div id="bd9eaca3" class="cell" data-execution_count="111">
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Person</span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>    firstname</span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>    lastname</span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Person</span>(firstname<span class="op">::</span><span class="dt">String</span>, lastname<span class="op">::</span><span class="dt">String</span>) <span class="op">=</span> <span class="fu">new</span>(firstname, lastname)  <span class="co"># This allows you to instantiate instances of Person with arguments</span></span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Person</span>() <span class="op">=</span> <span class="fu">new</span>()  <span class="co"># This allows you to instantiate instances of Person without arguments</span></span>
<span id="cb193-6"><a href="#cb193-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb193-7"><a href="#cb193-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-8"><a href="#cb193-8" aria-hidden="true" tabindex="-1"></a>friend <span class="op">=</span> <span class="fu">Person</span>()</span>
<span id="cb193-9"><a href="#cb193-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-10"><a href="#cb193-10" aria-hidden="true" tabindex="-1"></a>friend</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="88">
<pre><code>Person(#undef, #undef)</code></pre>
</div>
</div>
<div id="33a8fea8" class="cell" data-execution_count="112">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>friend.firstname</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: UndefRefError: access to undefined reference
UndefRefError: access to undefined reference

Stacktrace:
 [1] getproperty(x::Person, f::Symbol)
   @ Base ./Base.jl:37
 [2] top-level scope
   @ In[89]:2</code></pre>
</div>
</div>
<section id="to-solve-infinite-chain-of-initialization-using-parametric-type" class="level5" data-number="2.8.4.1">
<h5 data-number="2.8.4.1" class="anchored" data-anchor-id="to-solve-infinite-chain-of-initialization-using-parametric-type"><span class="header-section-number">2.8.4.1</span> To solve infinite chain of initialization using parametric type</h5>
<p>A parametric type can be regarded as a function which accepts type parameters, and then returns a new type.</p>
<p>e.g.&nbsp;if <code>P</code> is a parametric type, and <code>T</code> is a type, then <code>P{T}</code> returns a new type.</p>
<p>You can think of a parametric type as a template to make an actual type:</p>
<div id="acef7981" class="cell" data-execution_count="113">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">3</span>)  <span class="co"># Equivalent to UnitRange(1, 3)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="90">
<pre><code>UnitRange{Int64}</code></pre>
</div>
</div>
<div id="64422de9" class="cell" data-execution_count="114">
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a>FloatRange <span class="op">=</span> <span class="dt">UnitRange</span>{<span class="dt">Float64</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="91">
<pre><code>UnitRange{Float64}</code></pre>
</div>
</div>
<div id="05315ccf" class="cell" data-execution_count="115">
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">FloatRange</span>(<span class="fl">1</span>, <span class="fl">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="92">
<pre><code>1.0:3.0</code></pre>
</div>
</div>
<p>We can use the <code>Union</code> parametric type to solve infinite chain of initialization. <code>Union</code> accetps one or more type parameters, and then return a new type which can serve as placeholders for any of the types listed as type parameters.</p>
<div id="524e2de0" class="cell" data-execution_count="116">
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f1</span>(x<span class="op">::</span><span class="dt">Union{Int, String}</span>) <span class="op">=</span> x<span class="op">^</span><span class="fl">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="93">
<pre><code>f1 (generic function with 1 method)</code></pre>
</div>
</div>
<div id="056d4d71" class="cell" data-execution_count="117">
<div class="sourceCode cell-code" id="cb205"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f1</span>(<span class="fl">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="94">
<pre><code>27</code></pre>
</div>
</div>
<div id="95ca8125" class="cell" data-execution_count="118">
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f1</span>(<span class="st">"hello"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="95">
<pre><code>"hellohellohello"</code></pre>
</div>
</div>
<div id="7c33ff8b" class="cell" data-execution_count="119">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f1</span>(<span class="fl">1.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>MethodError: no method matching f1(::Float64)

Closest candidates are:
  f1(<span class="ansi-bright-red-fg">::Union{Int64, String}</span>)
<span class="ansi-bright-black-fg">   @</span> <span class="ansi-magenta-fg">Main</span> <span style="text-decoration:underline" class="ansi-bright-black-fg">In[93]:1</span>


Stacktrace:
 [1] top-level scope
   @ In[96]:2</pre>
</div>
</div>
</div>
<p>Now let’s solve the problem of infinite chain of initialization using parametric type:</p>
<div id="1b155835" class="cell" data-execution_count="120">
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Wagon</span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true" tabindex="-1"></a>    cargo<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb210-3"><a href="#cb210-3" aria-hidden="true" tabindex="-1"></a>    next<span class="op">::</span><span class="dt">Union{Wagon, Nothing}  </span><span class="co"># next can be an object of either Wagon or Nothing</span></span>
<span id="cb210-4"><a href="#cb210-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb210-5"><a href="#cb210-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-6"><a href="#cb210-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the total tons of cargo in the train</span></span>
<span id="cb210-7"><a href="#cb210-7" aria-hidden="true" tabindex="-1"></a><span class="fu">cargo</span>(w<span class="op">::</span><span class="dt">Wagon</span>) <span class="op">=</span> w.cargo <span class="op">+</span> <span class="fu">cargo</span>(w.next)</span>
<span id="cb210-8"><a href="#cb210-8" aria-hidden="true" tabindex="-1"></a><span class="fu">cargo</span>(<span class="op">::</span><span class="dt">Nothing</span>) <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb210-9"><a href="#cb210-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-10"><a href="#cb210-10" aria-hidden="true" tabindex="-1"></a>train <span class="op">=</span> <span class="fu">Wagon</span>(<span class="fl">6</span>, <span class="fu">Wagon</span>(<span class="fl">8</span>, <span class="fu">Wagon</span>(<span class="fl">10</span>, <span class="cn">nothing</span>)))</span>
<span id="cb210-11"><a href="#cb210-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-12"><a href="#cb210-12" aria-hidden="true" tabindex="-1"></a><span class="fu">cargo</span>(train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="97">
<pre><code>24.0</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="collections" class="level3" data-number="2.9">
<h3 data-number="2.9" class="anchored" data-anchor-id="collections"><span class="header-section-number">2.9</span> Collections</h3>
<p>Collections are objects that store and organize other objects.</p>
<section id="strings" class="level4" data-number="2.9.1">
<h4 data-number="2.9.1" class="anchored" data-anchor-id="strings"><span class="header-section-number">2.9.1</span> Strings</h4>
<p>In computer memory, everything is a number, including characters.</p>
<ul>
<li>A character (<code>Char</code> type) is quoted by <code>''</code>.</li>
</ul>
<div id="0331ad1c" class="cell" data-execution_count="121">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Int8</span>(<span class="ch">'A'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="98">
<pre><code>65</code></pre>
</div>
</div>
<div id="098cc205" class="cell" data-execution_count="122">
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Char</span>(<span class="fl">65</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="99">
<pre><code>'A': ASCII/Unicode U+0041 (category Lu: Letter, uppercase)</code></pre>
</div>
</div>
<p>You can add a number to a character, which returns a new character corresponding to the sum:</p>
<div id="008dfba3" class="cell" data-execution_count="123">
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="ch">'A'</span> <span class="op">+</span> <span class="fl">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="100">
<pre><code>'D': ASCII/Unicode U+0044 (category Lu: Letter, uppercase)</code></pre>
</div>
</div>
<ul>
<li>A string is quoted by <code>""</code> or `<code>""""""</code>.</li>
</ul>
<p>Long lines in strings can be broken up by preceding the newline with a backslash (<code>\</code>):</p>
<div id="1bff2532" class="cell" data-execution_count="124">
<div class="sourceCode cell-code" id="cb218"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="st">"This is a long \</span></span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="st">line"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="101">
<pre><code>"This is a long line"</code></pre>
</div>
</div>
<p>Merging elements into a string by <code>join()</code>:</p>
<div id="f939cc07" class="cell" data-execution_count="125">
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a>chars <span class="op">=</span> <span class="ch">'A'</span><span class="op">:</span><span class="ch">'Z'</span></span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb220-3"><a href="#cb220-3" aria-hidden="true" tabindex="-1"></a><span class="fu">join</span>(chars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="102">
<pre><code>"ABCDEFGHIJKLMNOPQRSTUVWXYZ"</code></pre>
</div>
</div>
<p>Splitting a string into characters by <code>collect()</code>:</p>
<div id="66262fc8" class="cell" data-execution_count="126">
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">collect</span>(<span class="st">"HELLO"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="103">
<pre><code>5-element Vector{Char}:
 'H': ASCII/Unicode U+0048 (category Lu: Letter, uppercase)
 'E': ASCII/Unicode U+0045 (category Lu: Letter, uppercase)
 'L': ASCII/Unicode U+004C (category Lu: Letter, uppercase)
 'L': ASCII/Unicode U+004C (category Lu: Letter, uppercase)
 'O': ASCII/Unicode U+004F (category Lu: Letter, uppercase)</code></pre>
</div>
</div>
<p>In fact, you can <code>collect()</code> any iterable objects into an array.</p>
<section id="unicode-and-utf-8" class="level5" data-number="2.9.1.1">
<h5 data-number="2.9.1.1" class="anchored" data-anchor-id="unicode-and-utf-8"><span class="header-section-number">2.9.1.1</span> Unicode and UTF-8</h5>
<p>Text strings in Julia are Unicode, encoded in UTF-8 format.</p>
<p>In Unicode, each character is given a number (<strong>code point</strong>), encoded by several bytes (<strong>code units</strong>) in computer.</p>
<p>UTF-8 is the current Unicode scheme used, which uses a variable number of bytes (1-4 bytes) per character to encode characters in computer.</p>
<p>You can use <code>codepoint()</code> to get the code point of a character, and <code>ncodeunits()</code> to get the code units of a character.</p>
<p>In addition, UTF-8 is backward compatible with ASCII (encoding each character with 1 byte). You can use <code>isascii()</code> to check whether a character is a ASCII character.</p>
<div id="4c79fe4c" class="cell" data-execution_count="127">
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="fu">codepoint</span>(<span class="ch">'A'</span>), <span class="fu">ncodeunits</span>(<span class="ch">'A'</span>), <span class="fu">isascii</span>(<span class="ch">'A'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="104">
<pre><code>(0x00000041, 1, true)</code></pre>
</div>
</div>
<p>As a consequence, you can type a character by typing either the character itself or its code point.</p>
<div id="185b3680" class="cell" data-execution_count="128">
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="ch">'A'</span>, <span class="ch">'\U41'</span>, <span class="fu">Char</span>(<span class="bn">0x00000041</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="105">
<pre><code>('A', 'A', 'A')</code></pre>
</div>
</div>
</section>
<section id="string-indexing" class="level5" data-number="2.9.1.2">
<h5 data-number="2.9.1.2" class="anchored" data-anchor-id="string-indexing"><span class="header-section-number">2.9.1.2</span> String indexing</h5>
<p>You can use subscript index to index each character in a string, but the step between indices is not always 1. It may be an integer greater than 1.</p>
<p>You can combine the following functions to get correct indices for each character in a string:</p>
<ul>
<li><p><code>firstindex()</code>: return the first index in a string.</p></li>
<li><p><code>lastindex()</code>: return the last index in a string.</p></li>
<li><p><code>nextind(s, i)</code>: return the next index of the element following index <code>i</code> in <code>s</code>.</p></li>
<li><p><code>eachindex()</code>: return the indices of each element.</p></li>
<li><p>Using <code>for</code> loop to iterate a string.</p></li>
</ul>
<div id="e0bab768" class="cell" data-execution_count="129">
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">"123一二三"</span></span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="fu">firstindex</span>(s)</span>
<span id="cb228-4"><a href="#cb228-4" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> i <span class="op">&lt;=</span> <span class="fu">lastindex</span>(s)</span>
<span id="cb228-5"><a href="#cb228-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>((i, s[i]))</span>
<span id="cb228-6"><a href="#cb228-6" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="fu">nextind</span>(s, i)</span>
<span id="cb228-7"><a href="#cb228-7" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(1, '1')
(2, '2')
(3, '3')
(4, '一')
(7, '二')
(10, '三')</code></pre>
</div>
</div>
<div id="459928c2" class="cell" data-execution_count="130">
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> s</span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(i)</span>
<span id="cb230-3"><a href="#cb230-3" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1
2
3
一
二
三</code></pre>
</div>
</div>
<div id="ed2a6d6c" class="cell" data-execution_count="131">
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="fu">eachindex</span>(s)</span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>((i, s[i]))</span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(1, '1')
(2, '2')
(3, '3')
(4, '一')
(7, '二')
(10, '三')</code></pre>
</div>
</div>
</section>
<section id="string-operations" class="level5" data-number="2.9.1.3">
<h5 data-number="2.9.1.3" class="anchored" data-anchor-id="string-operations"><span class="header-section-number">2.9.1.3</span> String operations</h5>
<ol type="1">
<li>Splitting strings</li>
</ol>
<div id="b22f015f" class="cell" data-execution_count="132">
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="fu">split</span>(<span class="st">"abc_def_ghi"</span>, <span class="st">"_"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="109">
<pre><code>3-element Vector{SubString{String}}:
 "abc"
 "def"
 "ghi"</code></pre>
</div>
</div>
<div id="4e3831c3" class="cell" data-execution_count="133">
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="fu">split</span>(<span class="st">"abcAdefBghi"</span>, isuppercase)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="110">
<pre><code>3-element Vector{SubString{String}}:
 "abc"
 "def"
 "ghi"</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Converting letters between uppercases and lowercases</li>
</ol>
<div id="6fc8736b" class="cell" data-execution_count="134">
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(uppercasefirst, <span class="fu">split</span>(<span class="st">"abc_def_ghi"</span>, <span class="st">"_"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="111">
<pre><code>3-element Vector{String}:
 "Abc"
 "Def"
 "Ghi"</code></pre>
</div>
</div>
<div id="2db7758a" class="cell" data-execution_count="135">
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="fu">isuppercase</span>(<span class="ch">'A'</span>)  <span class="co"># Check whether a single letter is in the form of uppercase</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="112">
<pre><code>true</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Joining substrings</li>
</ol>
<div id="1c0e017e" class="cell" data-execution_count="136">
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="fu">join</span>([<span class="st">"abc"</span>, <span class="st">"def"</span>, <span class="st">"ghi"</span>], <span class="st">"_"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="113">
<pre><code>"abc_def_ghi"</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Reading from and writing to the clipboard</li>
</ol>
<div id="a951baed" class="cell" data-execution_count="137">
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Write to the clipboard</span></span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a><span class="fu">clipboard</span>(<span class="st">"Hello, world!"</span>)</span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-4"><a href="#cb244-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Read from the clipboard</span></span>
<span id="cb244-5"><a href="#cb244-5" aria-hidden="true" tabindex="-1"></a><span class="fu">clipboard</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="114">
<pre><code>"Hello, world!"</code></pre>
</div>
</div>
<p>On Linux, <code>clipboard()</code> works only when you have installed the <code>xsel</code> or <code>xclip</code> commands.</p>
<ol start="5" type="1">
<li>Finding whether a substring is existed in a string by using <code>find*</code> functions</li>
</ol>
<div id="30228377" class="cell" data-execution_count="138">
<div class="sourceCode cell-code" id="cb246"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="fu">findall</span>(<span class="st">"abc"</span>, <span class="st">"abc_def_abc"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="115">
<pre><code>2-element Vector{UnitRange{Int64}}:
 1:3
 9:11</code></pre>
</div>
</div>
<div id="b16b880c" class="cell" data-execution_count="139">
<div class="sourceCode cell-code" id="cb248"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="fu">findall</span>(isuppercase, <span class="st">"AaBbCc"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="116">
<pre><code>3-element Vector{Int64}:
 1
 3
 5</code></pre>
</div>
</div>
<ol start="6" type="1">
<li>Converting between numbers and strings</li>
</ol>
<div id="e3328eb6" class="cell" data-execution_count="140">
<div class="sourceCode cell-code" id="cb250"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="fu">parse</span>(<span class="dt">Float64</span>, <span class="st">"3.14"</span>)  <span class="co"># The default base is 10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="117">
<pre><code>3.14</code></pre>
</div>
</div>
<div id="2230b246" class="cell" data-execution_count="141">
<div class="sourceCode cell-code" id="cb252"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="fu">parse</span>(<span class="dt">Int</span>, <span class="st">"1010101"</span>, base <span class="op">=</span> <span class="fl">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="118">
<pre><code>85</code></pre>
</div>
</div>
<div id="23685d5b" class="cell" data-execution_count="142">
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="fu">string</span>(<span class="fl">100</span>)  <span class="co"># The default base is 10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="119">
<pre><code>"100"</code></pre>
</div>
</div>
<div id="7bb4db7b" class="cell" data-execution_count="143">
<div class="sourceCode cell-code" id="cb256"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="fu">string</span>(<span class="fl">100</span>, base <span class="op">=</span> <span class="fl">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="120">
<pre><code>"1100100"</code></pre>
</div>
</div>
<ol start="7" type="1">
<li>String concatenation</li>
</ol>
<div id="e422aabc" class="cell" data-execution_count="144">
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a>fruit <span class="op">=</span> <span class="st">"apple"</span></span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-3"><a href="#cb258-3" aria-hidden="true" tabindex="-1"></a><span class="fu">string</span>(<span class="st">"This is a(an) "</span>, fruit, <span class="st">", made in China."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="121">
<pre><code>"This is a(an) apple, made in China."</code></pre>
</div>
</div>
<div id="49e859b6" class="cell" data-execution_count="145">
<div class="sourceCode cell-code" id="cb260"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="st">"This is a(an) "</span> <span class="op">*</span> fruit <span class="op">*</span> <span class="st">", made in China."</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="122">
<pre><code>"This is a(an) apple, made in China."</code></pre>
</div>
</div>
<ol start="8" type="1">
<li>String interpolation</li>
</ol>
<div id="a0724547" class="cell" data-execution_count="146">
<div class="sourceCode cell-code" id="cb262"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="st">"This is a(an) </span><span class="sc">$</span>fruit<span class="st">, made in China."</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="123">
<pre><code>"This is a(an) apple, made in China."</code></pre>
</div>
</div>
<div id="616943f7" class="cell" data-execution_count="147">
<div class="sourceCode cell-code" id="cb264"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="st">"This is a(an) </span><span class="sc">$</span>(fruit)<span class="st">, made in China."</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="124">
<pre><code>"This is a(an) apple, made in China."</code></pre>
</div>
</div>
<ol start="9" type="1">
<li>String formatting</li>
</ol>
<p>You can use macros <code>@printf</code> and <code>@sprintf</code> to perform string formatting. These two macros are defined in the Printf module.</p>
<p>In Julia, macros are distinguished from functions with the <code>@</code> prefix.</p>
<p>A macro is akin to a code generator; the call site of a macro gets replaced with other code.</p>
<ul>
<li><code>@printf</code> outputs the result to the console:</li>
</ul>
<div id="c338f4d6" class="cell" data-execution_count="148">
<div class="sourceCode cell-code" id="cb266"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Printf</span></span>
<span id="cb266-2"><a href="#cb266-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb266-3"><a href="#cb266-3" aria-hidden="true" tabindex="-1"></a><span class="pp">@printf</span>(<span class="st">"π = %0.2f"</span>, <span class="cn">pi</span>)  <span class="co"># Output pi (floating-point number) with two digits</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>π = 3.14</code></pre>
</div>
</div>
<ul>
<li><code>@sprintf</code> returns the result as a string.</li>
</ul>
<div id="88551cc1" class="cell" data-execution_count="149">
<div class="sourceCode cell-code" id="cb268"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@sprintf</span>(<span class="st">"π = %0.2f"</span>, <span class="cn">pi</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="126">
<pre><code>"π = 3.14"</code></pre>
</div>
</div>
<p>For a systematic specification of the format, see <a href="https://cplusplus.com/reference/cstdio/printf">here</a>.</p>
</section>
<section id="nonstandard-string-literals" class="level5" data-number="2.9.1.4">
<h5 data-number="2.9.1.4" class="anchored" data-anchor-id="nonstandard-string-literals"><span class="header-section-number">2.9.1.4</span> Nonstandard string literals</h5>
<p>In Julia, you cannot express very large numbers as number literals, so you have to express them as strings that get parsed later.</p>
<p>e.g.</p>
<div id="34e92295" class="cell" data-execution_count="150">
<div class="sourceCode cell-code" id="cb270"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="fl">3.14e600</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>ParseError:
<span class="ansi-bright-black-fg"># Error @ </span>]8;;file:///home/dell/YRArchive/NeuroBorder/Blogs/Computer/posts/Programming/Julia/julia_syntax_basics/In[127]#2:1\<span class="ansi-bright-black-fg">In[127]:2:1</span>]8;;\

<span style="background-color:rgb(120,70,70)">3.14e600</span>
<span class="ansi-bright-black-fg">└──────┘ ── </span><span class="ansi-bright-red-fg">overflow in floating point literal</span>

Stacktrace:
 [1] top-level scope
   @ In[127]:2</pre>
</div>
</div>
</div>
<div id="d2898385" class="cell" data-execution_count="151">
<div class="sourceCode cell-code" id="cb271"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fu">parse</span>(<span class="dt">BigFloat</span>, <span class="st">"3.14e600"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="128">
<pre><code>3.140000000000000000000000000000000000000000000000000000000000000000000000000003e+600</code></pre>
</div>
</div>
<div id="6ba78ac0" class="cell" data-execution_count="152">
<div class="sourceCode cell-code" id="cb273"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="129">
<pre><code>BigFloat</code></pre>
</div>
</div>
<p>If you put such a expression into a loop, then it will be run at least once in each loop:</p>
<div id="92074238" class="cell" data-execution_count="153">
<div class="sourceCode cell-code" id="cb275"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span>
<span id="cb275-2"><a href="#cb275-2" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="fu">parse</span>(<span class="dt">BigFloat</span>, <span class="st">"3.14e600"</span>)</span>
<span id="cb275-3"><a href="#cb275-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(x)</span>
<span id="cb275-4"><a href="#cb275-4" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3.140000000000000000000000000000000000000000000000000000000000000000000000000003e+600
3.140000000000000000000000000000000000000000000000000000000000000000000000000003e+600
3.140000000000000000000000000000000000000000000000000000000000000000000000000003e+600
3.140000000000000000000000000000000000000000000000000000000000000000000000000003e+600</code></pre>
</div>
</div>
<p>This will damage the performance of your program.</p>
<p>To avoid having to parse strings to create objects such as <code>BigFloat</code> in each loop, Julia provides special string literals such as <code>big"3.14e600"</code>.</p>
<p>Julia will parse such a string literal only once for a <code>for</code> loop in your program, but run them many times (i.e.&nbsp;it won’t be parsed in each loop).</p>
<p>In other words, these objects such as <code>BigFloat</code> are created at parse time, rather than runtime.</p>
<ol type="1">
<li>DateFormat strings</li>
</ol>
<ul>
<li>In the following code, the <code>DateFormat</code> object will be created in each loop:</li>
</ul>
<div id="5a29adb4" class="cell" data-execution_count="154">
<div class="sourceCode cell-code" id="cb277"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Dates</span></span>
<span id="cb277-2"><a href="#cb277-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-3"><a href="#cb277-3" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> [<span class="st">"21/7"</span>, <span class="st">"8/12"</span>, <span class="st">"28/2"</span>]</span>
<span id="cb277-4"><a href="#cb277-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-5"><a href="#cb277-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> s <span class="kw">in</span> dates</span>
<span id="cb277-6"><a href="#cb277-6" aria-hidden="true" tabindex="-1"></a>    date <span class="op">=</span> <span class="fu">Date</span>(s, <span class="fu">DateFormat</span>(<span class="st">"dd/mm"</span>))  <span class="co"># Convert a date string into a date object</span></span>
<span id="cb277-7"><a href="#cb277-7" aria-hidden="true" tabindex="-1"></a>    date_str <span class="op">=</span> <span class="bu">Dates</span>.<span class="fu">format</span>(date, <span class="fu">DateFormat</span>(<span class="st">"E-u"</span>))  <span class="co"># Convert a date object into a date string with given date format</span></span>
<span id="cb277-8"><a href="#cb277-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(date_str)</span>
<span id="cb277-9"><a href="#cb277-9" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Saturday-Jul
Saturday-Dec
Wednesday-Feb</code></pre>
</div>
</div>
<ul>
<li>In the following code, the <code>DateFormat</code> object will be created once, but the code becomes less clear at the first glance:</li>
</ul>
<div id="a6efe590" class="cell" data-execution_count="155">
<div class="sourceCode cell-code" id="cb279"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Dates</span></span>
<span id="cb279-2"><a href="#cb279-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb279-3"><a href="#cb279-3" aria-hidden="true" tabindex="-1"></a>informat <span class="op">=</span> <span class="fu">DateFormat</span>(<span class="st">"dd/mm"</span>)</span>
<span id="cb279-4"><a href="#cb279-4" aria-hidden="true" tabindex="-1"></a>outformat <span class="op">=</span> <span class="fu">DateFormat</span>(<span class="st">"E-u"</span>)</span>
<span id="cb279-5"><a href="#cb279-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb279-6"><a href="#cb279-6" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> [<span class="st">"21/7"</span>, <span class="st">"8/12"</span>, <span class="st">"28/2"</span>]</span>
<span id="cb279-7"><a href="#cb279-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb279-8"><a href="#cb279-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> s <span class="kw">in</span> dates</span>
<span id="cb279-9"><a href="#cb279-9" aria-hidden="true" tabindex="-1"></a>    date <span class="op">=</span> <span class="fu">Date</span>(s, informat)  <span class="co"># Convert a date string into a date object</span></span>
<span id="cb279-10"><a href="#cb279-10" aria-hidden="true" tabindex="-1"></a>    date_str <span class="op">=</span> <span class="bu">Dates</span>.<span class="fu">format</span>(date, outformat)  <span class="co"># Convert a date object into a date string with given date format</span></span>
<span id="cb279-11"><a href="#cb279-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(date_str)</span>
<span id="cb279-12"><a href="#cb279-12" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Saturday-Jul
Saturday-Dec
Wednesday-Feb</code></pre>
</div>
</div>
<ul>
<li>We can use the <code>dateformat</code> literal to solve this problem:</li>
</ul>
<div id="ad7f99ce" class="cell" data-execution_count="156">
<div class="sourceCode cell-code" id="cb281"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Dates</span></span>
<span id="cb281-2"><a href="#cb281-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb281-3"><a href="#cb281-3" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> [<span class="st">"21/7"</span>, <span class="st">"8/12"</span>, <span class="st">"28/2"</span>]</span>
<span id="cb281-4"><a href="#cb281-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb281-5"><a href="#cb281-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> s <span class="kw">in</span> dates</span>
<span id="cb281-6"><a href="#cb281-6" aria-hidden="true" tabindex="-1"></a>    date <span class="op">=</span> <span class="fu">Date</span>(s, dateformat<span class="st">"dd/mm"</span>)  <span class="co"># Convert a date string into a date object</span></span>
<span id="cb281-7"><a href="#cb281-7" aria-hidden="true" tabindex="-1"></a>    date_str <span class="op">=</span> <span class="bu">Dates</span>.<span class="fu">format</span>(date, dateformat<span class="st">"E-u"</span>)  <span class="co"># Convert a date object into a date string with given date format</span></span>
<span id="cb281-8"><a href="#cb281-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(date_str)</span>
<span id="cb281-9"><a href="#cb281-9" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Saturday-Jul
Saturday-Dec
Wednesday-Feb</code></pre>
</div>
</div>
<p>For detailed date format specifications, see <code>?DateFormat</code>.</p>
<ol start="2" type="1">
<li>Raw strings</li>
</ol>
<p>In regular Julia strings, characters such as <code>$</code> and <code>\n</code> have special meaning.</p>
<p>If you just want every character in a string to be literal, you need to prefix special characters with a <code>\</code> to escape them.</p>
<p>But the more convenient way is to prefix a string with <code>raw</code> to tell Julia that this is a raw string, which means that every character in it is literal.</p>
<div id="18ddf807" class="cell" data-execution_count="157">
<div class="sourceCode cell-code" id="cb283"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb283-1"><a href="#cb283-1" aria-hidden="true" tabindex="-1"></a>num <span class="op">=</span> <span class="fl">100</span></span>
<span id="cb283-2"><a href="#cb283-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb283-3"><a href="#cb283-3" aria-hidden="true" tabindex="-1"></a><span class="st">raw"What? $(num)?"</span>  <span class="co"># num won't be replaced by its actual value</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="134">
<pre><code>"What? \$(num)?"</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Regular expressions</li>
</ol>
<p>In Julia, you can create a <code>Regex</code> object by prefixing your regular expression string with a <code>r</code>.</p>
<div id="c2ac485c" class="cell" data-execution_count="158">
<div class="sourceCode cell-code" id="cb285"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">"E-mail address: 123456@qq.com"</span></span>
<span id="cb285-2"><a href="#cb285-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb285-3"><a href="#cb285-3" aria-hidden="true" tabindex="-1"></a><span class="fu">replace</span>(s, <span class="st">r"</span><span class="sc">\d+</span><span class="ch">(?</span><span class="st">=@</span><span class="ch">)</span><span class="st">"</span> <span class="op">=&gt;</span> <span class="st">"abcdef"</span>)  <span class="co"># Replace matched part with the pair value</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="135">
<pre><code>"E-mail address: abcdef@qq.com"</code></pre>
</div>
</div>
<p>In the following code, <code>match(r, s)</code> will search for the first match of the regular expression <code>r</code> in <code>s</code> and return a <code>RegexMatch</code> object containing the match, or <code>nothing</code> if the match failed.</p>
<div id="09b34272" class="cell" data-execution_count="159">
<div class="sourceCode cell-code" id="cb287"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb287-1"><a href="#cb287-1" aria-hidden="true" tabindex="-1"></a>rx <span class="op">=</span> <span class="st">r"</span><span class="sc">\d+</span><span class="st">:</span><span class="sc">\d+</span><span class="st">"</span></span>
<span id="cb287-2"><a href="#cb287-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-3"><a href="#cb287-3" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> <span class="fu">match</span>(rx, <span class="st">"11:30 in the morning; 12:00 in the noon"</span>)</span>
<span id="cb287-4"><a href="#cb287-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-5"><a href="#cb287-5" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="136">
<pre><code>RegexMatch("11:30")</code></pre>
</div>
</div>
<p>If some parts of the regular expression are contained within parentheses, then these matched parts will be extracted out alone from the matched string, and you can retrieve these parts by indices:</p>
<div id="dd770fda" class="cell" data-execution_count="160">
<div class="sourceCode cell-code" id="cb289"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a>rx <span class="op">=</span> <span class="st">r"</span><span class="ch">(</span><span class="sc">\d+</span><span class="ch">)</span><span class="st">:</span><span class="ch">(</span><span class="sc">\d+</span><span class="ch">)</span><span class="st">"</span></span>
<span id="cb289-2"><a href="#cb289-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-3"><a href="#cb289-3" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> <span class="fu">match</span>(rx, <span class="st">"11:30 in the morning; 12:00 in the noon"</span>)</span>
<span id="cb289-4"><a href="#cb289-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-5"><a href="#cb289-5" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="137">
<pre><code>RegexMatch("11:30", 1="11", 2="30")</code></pre>
</div>
</div>
<div id="f59b8047" class="cell" data-execution_count="161">
<div class="sourceCode cell-code" id="cb291"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a>m[<span class="fl">1</span>], m[<span class="fl">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="138">
<pre><code>("11", "30")</code></pre>
</div>
</div>
<p>Further, you can give these parts names (<code>?&lt;name&gt;</code>) so you can retrieve them by names instead of indices:</p>
<div id="bb4ba61a" class="cell" data-execution_count="162">
<div class="sourceCode cell-code" id="cb293"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true" tabindex="-1"></a>rx <span class="op">=</span> <span class="st">r"</span><span class="ch">(?</span><span class="st">&lt;hour&gt;</span><span class="sc">\d+</span><span class="ch">)</span><span class="st">:</span><span class="ch">(?</span><span class="st">&lt;minute&gt;</span><span class="sc">\d+</span><span class="ch">)</span><span class="st">"</span></span>
<span id="cb293-2"><a href="#cb293-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb293-3"><a href="#cb293-3" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> <span class="fu">match</span>(rx, <span class="st">"11:30 in the morning; 12:00 in the noon"</span>)</span>
<span id="cb293-4"><a href="#cb293-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb293-5"><a href="#cb293-5" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="139">
<pre><code>RegexMatch("11:30", hour="11", minute="30")</code></pre>
</div>
</div>
<div id="f8dba7b3" class="cell" data-execution_count="163">
<div class="sourceCode cell-code" id="cb295"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb295-1"><a href="#cb295-1" aria-hidden="true" tabindex="-1"></a>m[<span class="st">"hour"</span>], m[<span class="st">"minute"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="140">
<pre><code>("11", "30")</code></pre>
</div>
</div>
<p>In addition, you can also iterate over a <code>RegexMatch</code> object, and many functions applicable to dictionaries also works with the <code>RegexMatch</code> object.</p>
<ol start="4" type="1">
<li>Number literals with <code>big</code></li>
</ol>
<p>You can use the <code>big</code> number literal to create extremely large numbers:</p>
<div id="1d355fc3" class="cell" data-execution_count="164">
<div class="sourceCode cell-code" id="cb297"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb297-1"><a href="#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(big<span class="st">"100"</span>)  <span class="co"># BigInt</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="141">
<pre><code>BigInt</code></pre>
</div>
</div>
<div id="fd602dfd" class="cell" data-execution_count="165">
<div class="sourceCode cell-code" id="cb299"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb299-1"><a href="#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(big<span class="st">"1e600"</span>)  <span class="co"># BigFloat</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="142">
<pre><code>BigFloat</code></pre>
</div>
</div>
<ol start="5" type="1">
<li>Defining your own number literals with macros</li>
</ol>
<div id="6950f32e" class="cell" data-execution_count="166">
<div class="sourceCode cell-code" id="cb301"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb301-1"><a href="#cb301-1" aria-hidden="true" tabindex="-1"></a><span class="kw">macro</span> <span class="fu">int8_str</span>(s)  <span class="co"># For a string literal with the prefix foo, such as foo"100", write foo_str</span></span>
<span id="cb301-2"><a href="#cb301-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(<span class="st">"hello"</span>)  <span class="co"># You can check how many times the "hello" will be printed when you call this macro in a loop</span></span>
<span id="cb301-3"><a href="#cb301-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">parse</span>(<span class="dt">Int8</span>, s)  <span class="co"># Parse the number string and return an 8-bit number</span></span>
<span id="cb301-4"><a href="#cb301-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="143">
<pre><code>@int8_str (macro with 1 method)</code></pre>
</div>
</div>
<div id="5a3eafec" class="cell" data-execution_count="167">
<div class="sourceCode cell-code" id="cb303"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb303-1"><a href="#cb303-1" aria-hidden="true" tabindex="-1"></a>total <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb303-2"><a href="#cb303-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb303-3"><a href="#cb303-3" aria-hidden="true" tabindex="-1"></a><span class="co"># The "hello" will be printed only once,</span></span>
<span id="cb303-4"><a href="#cb303-4" aria-hidden="true" tabindex="-1"></a><span class="co"># which indicates that the 8-bit integer is created when the program is parsed,</span></span>
<span id="cb303-5"><a href="#cb303-5" aria-hidden="true" tabindex="-1"></a><span class="co"># not each time it is run</span></span>
<span id="cb303-6"><a href="#cb303-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> _ <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span>
<span id="cb303-7"><a href="#cb303-7" aria-hidden="true" tabindex="-1"></a>    total <span class="op">+=</span> int8<span class="st">"10"</span></span>
<span id="cb303-8"><a href="#cb303-8" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>hello</code></pre>
</div>
</div>
<div id="da920c2d" class="cell" data-execution_count="168">
<div class="sourceCode cell-code" id="cb305"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true" tabindex="-1"></a>total</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="145">
<pre><code>40</code></pre>
</div>
</div>
<ol start="6" type="1">
<li>MIME types</li>
</ol>
<p>MIME means Multipurpose Internet Mail Extensions, which is used as a standard to identify the file types across devices because Windows usually uses a filename extension to indicate the type of a file, while Unix-like system stores the file type in special attributes.</p>
<p>In Julia, you can create a MIME type object in the following way:</p>
<div id="8f9b6909" class="cell" data-execution_count="169">
<div class="sourceCode cell-code" id="cb307"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb307-1"><a href="#cb307-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MIME</span>(<span class="st">"text/html"</span>)  <span class="co"># This denotes that the type of this file is a HTML page</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="146">
<pre><code>MIME type text/html</code></pre>
</div>
</div>
<div id="a8882063" class="cell" data-execution_count="170">
<div class="sourceCode cell-code" id="cb309"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb309-1"><a href="#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="kw">ans</span>)  <span class="co"># The above MIME object with the type of MIME{Symbol("text/html")}.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="147">
<pre><code>MIME{Symbol("text/html")}</code></pre>
</div>
</div>
<p>Now we know that <code>MIME</code> type is a parametric type. When you pass <code>"text/html"</code> to its constructor, the concrete type of the object is <code>MIME{Symbol("text/html")}</code>. This is long and cumbersome to write so this is why Julia offers the shortcut <code>MIME"text/html"</code>, <strong>which is a concrete MIME type, not an object</strong>.</p>
<div id="a349aea1" class="cell" data-execution_count="171">
<div class="sourceCode cell-code" id="cb311"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb311-1"><a href="#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="fu">say_hello</span>(<span class="op">::</span><span class="dt">MIME"text/plain"</span>) <span class="op">=</span> <span class="st">"hello world"</span></span>
<span id="cb311-2"><a href="#cb311-2" aria-hidden="true" tabindex="-1"></a><span class="fu">say_hello</span>(<span class="op">::</span><span class="dt">MIME"text/html"</span>) <span class="op">=</span> <span class="st">"&lt;h1&gt;hello world&lt;/h1&gt;"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="148">
<pre><code>say_hello (generic function with 2 methods)</code></pre>
</div>
</div>
<div id="1736e850" class="cell" data-execution_count="172">
<div class="sourceCode cell-code" id="cb313"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb313-1"><a href="#cb313-1" aria-hidden="true" tabindex="-1"></a><span class="fu">say_hello</span>(<span class="fu">MIME</span>(<span class="st">"text/plain"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="149">
<pre><code>"hello world"</code></pre>
</div>
</div>
<div id="171915ab" class="cell" data-execution_count="173">
<div class="sourceCode cell-code" id="cb315"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb315-1"><a href="#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="fu">say_hello</span>(<span class="fu">MIME</span>(<span class="st">"text/html"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="150">
<pre><code>"&lt;h1&gt;hello world&lt;/h1&gt;"</code></pre>
</div>
</div>
</section>
</section>
<section id="arrays" class="level4" data-number="2.9.2">
<h4 data-number="2.9.2" class="anchored" data-anchor-id="arrays"><span class="header-section-number">2.9.2</span> Arrays</h4>
<section id="types-of-arrays" class="level5" data-number="2.9.2.1">
<h5 data-number="2.9.2.1" class="anchored" data-anchor-id="types-of-arrays"><span class="header-section-number">2.9.2.1</span> Types of arrays</h5>
<ol type="1">
<li>1D array</li>
</ol>
<ul>
<li>Column vector (type <code>Vector</code>)</li>
</ul>
<p>Elements are separated by <code>,</code> inside <code>[]</code>.</p>
<p>Creating a column vector with default data type:</p>
<div id="9e32ee8d" class="cell" data-execution_count="174">
<div class="sourceCode cell-code" id="cb317"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb317-1"><a href="#cb317-1" aria-hidden="true" tabindex="-1"></a>column_vector <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="151">
<pre><code>3-element Vector{Int64}:
 1
 2
 3</code></pre>
</div>
</div>
<p>Creating a column vector with given data type:</p>
<div id="64dd611d" class="cell" data-execution_count="175">
<div class="sourceCode cell-code" id="cb319"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb319-1"><a href="#cb319-1" aria-hidden="true" tabindex="-1"></a>column_vector <span class="op">=</span> <span class="dt">Int8</span>[<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="152">
<pre><code>3-element Vector{Int8}:
 1
 2
 3</code></pre>
</div>
</div>
<p>You can check what type each element in an array is by using the <code>eltype()</code> function. If an array contains different types of elements, it will return <code>Any</code>.</p>
<ul>
<li>Row vector (1 by n matrix, type <code>Matrix</code>)</li>
</ul>
<p>Elements are separated by space.</p>
<div id="04ceb049" class="cell" data-execution_count="176">
<div class="sourceCode cell-code" id="cb321"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true" tabindex="-1"></a>row_vector <span class="op">=</span> [<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="153">
<pre><code>1×3 Matrix{Int64}:
 1  2  3</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>2D array (type <code>Matrix</code>)</li>
</ol>
<p>Rows are separated by <code>;</code>.</p>
<div id="9fac5b60" class="cell" data-execution_count="177">
<div class="sourceCode cell-code" id="cb323"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb323-1"><a href="#cb323-1" aria-hidden="true" tabindex="-1"></a>matrix <span class="op">=</span> [<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span>;</span>
<span id="cb323-2"><a href="#cb323-2" aria-hidden="true" tabindex="-1"></a>          <span class="fl">4</span> <span class="fl">5</span> <span class="fl">6</span>;</span>
<span id="cb323-3"><a href="#cb323-3" aria-hidden="true" tabindex="-1"></a>          <span class="fl">7</span> <span class="fl">8</span> <span class="fl">9</span>]</span>
<span id="cb323-4"><a href="#cb323-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb323-5"><a href="#cb323-5" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb323-6"><a href="#cb323-6" aria-hidden="true" tabindex="-1"></a>matrix <span class="op">=</span> [<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span>; <span class="fl">4</span> <span class="fl">5</span> <span class="fl">6</span>; <span class="fl">7</span> <span class="fl">8</span> <span class="fl">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="154">
<pre><code>3×3 Matrix{Int64}:
 1  2  3
 4  5  6
 7  8  9</code></pre>
</div>
</div>
<p>Columns are separated by space:</p>
<div id="b32ad987" class="cell" data-execution_count="178">
<div class="sourceCode cell-code" id="cb325"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb325-1"><a href="#cb325-1" aria-hidden="true" tabindex="-1"></a>matrix <span class="op">=</span> [[<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>] [<span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>] [<span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">9</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="155">
<pre><code>3×3 Matrix{Int64}:
 1  4  7
 2  5  8
 3  6  9</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Array (type <code>Array</code>)</li>
</ol>
<p>The dimension of an array is greater than 2.</p>
<div id="328c4bee" class="cell" data-execution_count="179">
<div class="sourceCode cell-code" id="cb327"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb327-1"><a href="#cb327-1" aria-hidden="true" tabindex="-1"></a><span class="fu">zeros</span>(<span class="dt">Int64</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>)  <span class="co"># two rows, three columns, and four slices</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="156">
<pre><code>2×3×4 Array{Int64, 3}:
[:, :, 1] =
 0  0  0
 0  0  0

[:, :, 2] =
 0  0  0
 0  0  0

[:, :, 3] =
 0  0  0
 0  0  0

[:, :, 4] =
 0  0  0
 0  0  0</code></pre>
</div>
</div>
</section>
<section id="creating-arrays-by-specific-functions" class="level5" data-number="2.9.2.2">
<h5 data-number="2.9.2.2" class="anchored" data-anchor-id="creating-arrays-by-specific-functions"><span class="header-section-number">2.9.2.2</span> Creating arrays by specific functions</h5>
<p><code>zeros()</code>, <code>ones()</code>, <code>fill()</code>, <code>rand()</code>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Arrays can contain any type of element.</p>
<p>You can check the type of an object by using either <code>typeof()</code>, which <strong>reports the types of the object itself and its elements</strong>; or <code>eltype()</code>, which <strong>only reports the type of its elements</strong>.</p>
<p>Julia will guess the type of elements in an array if it’s not given explicitly when an array is created.</p>
<p>If an array contains different types of elements, then the type of elements in this array will be <code>Any</code>, which means that you can store any type of values.</p>
<p>When you add elements to an array by using <code>push!()</code>, it will check <strong>whether the type of elements to be added is consistent with the type of elements in this array</strong>, or <strong>whether the type of elements to be added can be converted to the type of elements in this array</strong>. If both failed, Julia will raise an error!</p>
</div>
</div>
</section>
<section id="accessing-array-attributes" class="level5" data-number="2.9.2.3">
<h5 data-number="2.9.2.3" class="anchored" data-anchor-id="accessing-array-attributes"><span class="header-section-number">2.9.2.3</span> Accessing array attributes</h5>
<ol type="1">
<li><p><code>size()</code>: the size of each dimension of an array.</p></li>
<li><p><code>eltype()</code>: the type of elements in an array.</p></li>
<li><p><code>typeof()</code>: the type of the object itself and its elements.</p></li>
<li><p><code>ndims()</code>: the dimension of an array.</p></li>
<li><p><code>length()</code>: total number of elements in an array.</p></li>
<li><p><code>reshape()</code>: change the shape of an array.</p></li>
<li><p><code>norm()</code>: magnitude of a vector, calculated by the following formula (this function comes from the package LinearAlgebra).</p></li>
</ol>
<p><span class="math display">\[
\|A\|_p = \left(\sum_{i=1}^n |a_i|^p \right)^{1/p}
\]</span></p>
</section>
<section id="operartions-on-arrays" class="level5" data-number="2.9.2.4">
<h5 data-number="2.9.2.4" class="anchored" data-anchor-id="operartions-on-arrays"><span class="header-section-number">2.9.2.4</span> Operartions on arrays</h5>
<p>Suppose we have:</p>
<div id="91fbac24" class="cell" data-execution_count="180">
<div class="sourceCode cell-code" id="cb329"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb329-1"><a href="#cb329-1" aria-hidden="true" tabindex="-1"></a>amounts <span class="op">=</span> [<span class="fl">4</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">8</span>, <span class="fl">1</span>, <span class="fl">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="157">
<pre><code>6-element Vector{Int64}:
  4
  2
  5
  8
  1
 10</code></pre>
</div>
</div>
<div id="824b79e1" class="cell" data-execution_count="181">
<div class="sourceCode cell-code" id="cb331"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb331-1"><a href="#cb331-1" aria-hidden="true" tabindex="-1"></a>prices <span class="op">=</span> [<span class="fl">15.0</span>, <span class="fl">2.5</span>, <span class="fl">3.8</span>, <span class="fl">9.0</span>, <span class="fl">10.5</span>, <span class="fl">8.5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="158">
<pre><code>6-element Vector{Float64}:
 15.0
  2.5
  3.8
  9.0
 10.5
  8.5</code></pre>
</div>
</div>
<p>Note: both <code>amounts</code> and <code>prices</code> are <strong>column vectors</strong>.</p>
<ul>
<li><code>sum()</code></li>
</ul>
<div id="94de61d7" class="cell" data-execution_count="182">
<div class="sourceCode cell-code" id="cb333"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb333-1"><a href="#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(amounts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="159">
<pre><code>30</code></pre>
</div>
</div>
<ul>
<li><p><code>push!()</code>: insert one or more items into a collection.</p></li>
<li><p><code>sort()</code> or <code>sort!()</code></p></li>
</ul>
<div id="5063951e" class="cell" data-execution_count="183">
<div class="sourceCode cell-code" id="cb335"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb335-1"><a href="#cb335-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Not modify input in place</span></span>
<span id="cb335-2"><a href="#cb335-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(amounts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="160">
<pre><code>6-element Vector{Int64}:
  1
  2
  4
  5
  8
 10</code></pre>
</div>
</div>
<div id="8d0ae80e" class="cell" data-execution_count="184">
<div class="sourceCode cell-code" id="cb337"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb337-1"><a href="#cb337-1" aria-hidden="true" tabindex="-1"></a>amounts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="161">
<pre><code>6-element Vector{Int64}:
  4
  2
  5
  8
  1
 10</code></pre>
</div>
</div>
<div id="7e4e9f05" class="cell" data-execution_count="185">
<div class="sourceCode cell-code" id="cb339"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb339-1"><a href="#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modify input in place</span></span>
<span id="cb339-2"><a href="#cb339-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort!</span>(amounts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="162">
<pre><code>6-element Vector{Int64}:
  1
  2
  4
  5
  8
 10</code></pre>
</div>
</div>
<div id="4954d0e4" class="cell" data-execution_count="186">
<div class="sourceCode cell-code" id="cb341"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb341-1"><a href="#cb341-1" aria-hidden="true" tabindex="-1"></a>amounts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="163">
<pre><code>6-element Vector{Int64}:
  1
  2
  4
  5
  8
 10</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>By convention, Julia functions never modify any of their inputs in place.</p>
<p>If it is necessary to modify inputs in place, Julia has established the convention of tacking on an exclamation mark (<code>!</code>) to the name of any function which modifies its input in place instead of returning a modified version.</p>
</div>
</div>
<ul>
<li>Element-wise operations: <code>.+, .-, .*, ./</code>.</li>
</ul>
<div id="31cb765f" class="cell" data-execution_count="187">
<div class="sourceCode cell-code" id="cb343"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb343-1"><a href="#cb343-1" aria-hidden="true" tabindex="-1"></a>amounts <span class="op">.*</span> prices</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="164">
<pre><code>6-element Vector{Float64}:
 15.0
  5.0
 15.2
 45.0
 84.0
 85.0</code></pre>
</div>
</div>
<ul>
<li><p>Performing statistics by <code>using Statistics</code>.</p></li>
<li><p>Performing operations of linear algebra by <code>using LinearAlgebra</code>.</p></li>
</ul>
</section>
<section id="slicing-and-dicing-an-array" class="level5" data-number="2.9.2.5">
<h5 data-number="2.9.2.5" class="anchored" data-anchor-id="slicing-and-dicing-an-array"><span class="header-section-number">2.9.2.5</span> Slicing and dicing an array</h5>
<p><strong>Elements in a Julia array are numbered starting from 1 (i.e.&nbsp;1-based indexing)!</strong></p>
<div id="973e4a01" class="cell" data-execution_count="188">
<div class="sourceCode cell-code" id="cb345"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb345-1"><a href="#cb345-1" aria-hidden="true" tabindex="-1"></a>vec <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="165">
<pre><code>6-element Vector{Int64}:
 1
 2
 3
 4
 5
 6</code></pre>
</div>
</div>
<ol type="1">
<li>Accessing elements by using <code>[index]</code>.</li>
</ol>
<p>For arrays with dimension greater than 1, you can use <code>[dim1, dim2, ...]</code>.</p>
<div id="a9b42424" class="cell" data-execution_count="189">
<div class="sourceCode cell-code" id="cb347"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb347-1"><a href="#cb347-1" aria-hidden="true" tabindex="-1"></a>vec[<span class="fl">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="166">
<pre><code>3</code></pre>
</div>
</div>
<p>Of course, subsetting and then assignment is supported:</p>
<div id="4c4fb5da" class="cell" data-execution_count="190">
<div class="sourceCode cell-code" id="cb349"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb349-1"><a href="#cb349-1" aria-hidden="true" tabindex="-1"></a>vec[<span class="fl">3</span>] <span class="op">=</span> <span class="fl">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="167">
<pre><code>100</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Using <code>begin</code> and <code>end</code> to access the first and last element.</li>
</ol>
<div id="d46c7ed5" class="cell" data-execution_count="191">
<div class="sourceCode cell-code" id="cb351"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb351-1"><a href="#cb351-1" aria-hidden="true" tabindex="-1"></a>vec[begin], vec[<span class="kw">end</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="168">
<pre><code>(1, 6)</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Using <code>:</code> to access all elements of some dimension.</li>
</ol>
<div id="f33aa801" class="cell" data-execution_count="192">
<div class="sourceCode cell-code" id="cb353"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb353-1"><a href="#cb353-1" aria-hidden="true" tabindex="-1"></a>vec[<span class="op">:</span>]  <span class="co"># Access the whole vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="169">
<pre><code>6-element Vector{Int64}:
   1
   2
 100
   4
   5
   6</code></pre>
</div>
</div>
<div id="44e66432" class="cell" data-execution_count="193">
<div class="sourceCode cell-code" id="cb355"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb355-1"><a href="#cb355-1" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> <span class="fu">rand</span>(<span class="dt">Int64</span>, <span class="fl">3</span>, <span class="fl">3</span>)</span>
<span id="cb355-2"><a href="#cb355-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb355-3"><a href="#cb355-3" aria-hidden="true" tabindex="-1"></a>A[<span class="op">:</span>, <span class="fl">1</span>]  <span class="co"># Access the 1st column</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="170">
<pre><code>3-element Vector{Int64}:
 7442145766253688090
 5112851899044297171
 8458841958258592913</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>All slice operations return <strong>copies</strong> of data.</p>
<div id="5c47ca12" class="cell" data-execution_count="194">
<div class="sourceCode cell-code" id="cb357"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb357-1"><a href="#cb357-1" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> <span class="fu">collect</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">6</span>)</span>
<span id="cb357-2"><a href="#cb357-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb357-3"><a href="#cb357-3" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> A[<span class="fl">4</span><span class="op">:</span><span class="kw">end</span>]</span>
<span id="cb357-4"><a href="#cb357-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb357-5"><a href="#cb357-5" aria-hidden="true" tabindex="-1"></a>B[<span class="fl">1</span>] <span class="op">=</span> <span class="fl">100</span></span>
<span id="cb357-6"><a href="#cb357-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb357-7"><a href="#cb357-7" aria-hidden="true" tabindex="-1"></a>B</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="171">
<pre><code>3-element Vector{Int64}:
 100
   5
   6</code></pre>
</div>
</div>
<div id="303f8e96" class="cell" data-execution_count="195">
<div class="sourceCode cell-code" id="cb359"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb359-1"><a href="#cb359-1" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="172">
<pre><code>6-element Vector{Int64}:
 1
 2
 3
 4
 5
 6</code></pre>
</div>
</div>
<p>Instead, to avoid copying data during slicing an array, you can prefix the <code>@view</code> macro to the slice operations, since it will only return a <em>view</em> of subset of the array.</p>
<div id="33003d7f" class="cell" data-execution_count="196">
<div class="sourceCode cell-code" id="cb361"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb361-1"><a href="#cb361-1" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> <span class="fu">collect</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">6</span>)</span>
<span id="cb361-2"><a href="#cb361-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-3"><a href="#cb361-3" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> <span class="pp">@view</span> A[<span class="fl">4</span><span class="op">:</span><span class="kw">end</span>]</span>
<span id="cb361-4"><a href="#cb361-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-5"><a href="#cb361-5" aria-hidden="true" tabindex="-1"></a>B[<span class="fl">1</span>] <span class="op">=</span> <span class="fl">100</span></span>
<span id="cb361-6"><a href="#cb361-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-7"><a href="#cb361-7" aria-hidden="true" tabindex="-1"></a>B</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="173">
<pre><code>3-element view(::Vector{Int64}, 4:6) with eltype Int64:
 100
   5
   6</code></pre>
</div>
</div>
<div id="8e347dc1" class="cell" data-execution_count="197">
<div class="sourceCode cell-code" id="cb363"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb363-1"><a href="#cb363-1" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="174">
<pre><code>6-element Vector{Int64}:
   1
   2
   3
 100
   5
   6</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="combining-arrays" class="level5" data-number="2.9.2.6">
<h5 data-number="2.9.2.6" class="anchored" data-anchor-id="combining-arrays"><span class="header-section-number">2.9.2.6</span> Combining arrays</h5>
<p><code>cat()</code>, <code>hcat()</code>, and <code>vcat()</code>.</p>
</section>
</section>
<section id="tuples" class="level4" data-number="2.9.3">
<h4 data-number="2.9.3" class="anchored" data-anchor-id="tuples"><span class="header-section-number">2.9.3</span> Tuples</h4>
<p>Elements are separated by <code>,</code> inside <code>()</code>.</p>
<div id="887b8e5e" class="cell" data-execution_count="198">
<div class="sourceCode cell-code" id="cb365"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb365-1"><a href="#cb365-1" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> (<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="175">
<pre><code>(1, 2, 3)</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Creating a tuple containing only one element with <code>(1,)</code> (i.e.&nbsp;adding a <code>,</code> after the element).</p>
<p>Tuples are <strong>immutable</strong> once created.</p>
</div>
</div>
<section id="named-tuples" class="level5" data-number="2.9.3.1">
<h5 data-number="2.9.3.1" class="anchored" data-anchor-id="named-tuples"><span class="header-section-number">2.9.3.1</span> Named tuples</h5>
<div id="5cf2b21d" class="cell" data-execution_count="199">
<div class="sourceCode cell-code" id="cb367"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb367-1"><a href="#cb367-1" aria-hidden="true" tabindex="-1"></a>student <span class="op">=</span> (name <span class="op">=</span> <span class="st">"Bob"</span>, score  <span class="op">=</span> <span class="fl">99</span>, height <span class="op">=</span> <span class="fl">2</span>)</span>
<span id="cb367-2"><a href="#cb367-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb367-3"><a href="#cb367-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Index by Symbol or dot</span></span>
<span id="cb367-4"><a href="#cb367-4" aria-hidden="true" tabindex="-1"></a>student[<span class="op">:</span>name], student.name</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="176">
<pre><code>("Bob", "Bob")</code></pre>
</div>
</div>
<div id="8bcef0a3" class="cell" data-execution_count="200">
<div class="sourceCode cell-code" id="cb369"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb369-1"><a href="#cb369-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Symbol &lt;==&gt; String</span></span>
<span id="cb369-2"><a href="#cb369-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Symbol</span>(<span class="st">"price"</span>), <span class="fu">string</span>(<span class="op">:</span>price)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="177">
<pre><code>(:price, "price")</code></pre>
</div>
</div>
</section>
</section>
<section id="dictionaries" class="level4" data-number="2.9.4">
<h4 data-number="2.9.4" class="anchored" data-anchor-id="dictionaries"><span class="header-section-number">2.9.4</span> Dictionaries</h4>
<p>A dictionary is made up of <strong>a number of pairs of <code>key =&gt; value</code></strong>, where key and value can be any type of values.</p>
<section id="creating-a-dictionary" class="level5" data-number="2.9.4.1">
<h5 data-number="2.9.4.1" class="anchored" data-anchor-id="creating-a-dictionary"><span class="header-section-number">2.9.4.1</span> Creating a dictionary</h5>
<ul>
<li>Creating a pair with the arrow operator <code>=&gt;</code>:</li>
</ul>
<div id="ded8f538" class="cell" data-execution_count="201">
<div class="sourceCode cell-code" id="cb371"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb371-1"><a href="#cb371-1" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="ch">'a'</span> <span class="op">=&gt;</span> <span class="fl">1</span>  <span class="co"># This is a pair with type Pair</span></span>
<span id="cb371-2"><a href="#cb371-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb371-3"><a href="#cb371-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="178">
<pre><code>Pair{Char, Int64}</code></pre>
</div>
</div>
<div id="6a9e48ae" class="cell" data-execution_count="202">
<div class="sourceCode cell-code" id="cb373"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb373-1"><a href="#cb373-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dump</span>(p)  <span class="co"># You can use dump() to look at the fields of any value</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Pair{Char, Int64}
  first: Char 'a'
  second: Int64 1</code></pre>
</div>
</div>
<div id="3e06288d" class="cell" data-execution_count="203">
<div class="sourceCode cell-code" id="cb375"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb375-1"><a href="#cb375-1" aria-hidden="true" tabindex="-1"></a><span class="co"># From the output of dump(), we can easily see how to get values of a pair</span></span>
<span id="cb375-2"><a href="#cb375-2" aria-hidden="true" tabindex="-1"></a><span class="co"># This will generate a tuple by putting several values in one line by separating them with a comma</span></span>
<span id="cb375-3"><a href="#cb375-3" aria-hidden="true" tabindex="-1"></a><span class="co"># the functions first() and last() are versatile for ordered collections</span></span>
<span id="cb375-4"><a href="#cb375-4" aria-hidden="true" tabindex="-1"></a>p.first, p.second, <span class="fu">first</span>(p), <span class="fu">last</span>(p), p[<span class="fl">1</span>], p[<span class="fl">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="180">
<pre><code>('a', 1, 'a', 1, 'a', 1)</code></pre>
</div>
</div>
<ul>
<li>You can provide a list of pairs to create a dictionary:</li>
</ul>
<div id="4a4dfeb1" class="cell" data-execution_count="204">
<div class="sourceCode cell-code" id="cb377"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb377-1"><a href="#cb377-1" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> <span class="fu">Dict</span>(<span class="ch">'a'</span> <span class="op">=&gt;</span> <span class="fl">1</span>, <span class="ch">'b'</span> <span class="op">=&gt;</span> <span class="fl">2</span>, <span class="ch">'c'</span> <span class="op">=&gt;</span> <span class="fl">3</span>)</span>
<span id="cb377-2"><a href="#cb377-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3"><a href="#cb377-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="181">
<pre><code>Dict{Char, Int64}</code></pre>
</div>
</div>
<div id="db65f996" class="cell" data-execution_count="205">
<div class="sourceCode cell-code" id="cb379"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb379-1"><a href="#cb379-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dump</span>(d)  <span class="co"># Checking the fields of a dictionary</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Dict{Char, Int64}
  slots: Array{UInt8}((16,)) UInt8[0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf4, 0xad, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe3, 0x00]
  keys: Array{Char}((16,))
    1: Char '\x45\x25\x0c\x70'
    2: Char '\x00\x00\x72\x4d'
    3: Char '\0'
    4: Char '\0'
    5: Char '\x45\x25\x0c\x80'
    ...
    12: Char '\0'
    13: Char '\xfa\xc3\x49\x40'
    14: Char '\x00\x00\x72\x4f'
    15: Char 'b'
    16: Char '\0'
  vals: Array{Int64}((16,)) [125687889696240, 125687835083712, 125687889696256, 125687835083712, 125687889696272, 125687835083712, 125687889696304, 1, 3, 125687835083712, 125687925050896, 125687835083712, 125687925051472, 125687835083712, 2, 125687835083712]
  ndel: Int64 0
  count: Int64 3
  age: UInt64 0x0000000000000003
  idxfloor: Int64 8
  maxprobe: Int64 1</code></pre>
</div>
</div>
<ul>
<li>Passing an array of pairs to the dictionary constructor:</li>
</ul>
<div id="15cebbdc" class="cell" data-execution_count="206">
<div class="sourceCode cell-code" id="cb381"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb381-1"><a href="#cb381-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [<span class="ch">'a'</span> <span class="op">=&gt;</span> <span class="fl">1</span>, <span class="ch">'b'</span> <span class="op">=&gt;</span> <span class="fl">2</span>, <span class="ch">'c'</span> <span class="op">=&gt;</span> <span class="fl">3</span>]</span>
<span id="cb381-2"><a href="#cb381-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb381-3"><a href="#cb381-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Dict</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="183">
<pre><code>Dict{Char, Int64} with 3 entries:
  'a' =&gt; 1
  'c' =&gt; 3
  'b' =&gt; 2</code></pre>
</div>
</div>
<ul>
<li>Passing an array of tuples containing only <strong>two</strong> elements to <code>Dict()</code>:</li>
</ul>
<div id="9080f643" class="cell" data-execution_count="207">
<div class="sourceCode cell-code" id="cb383"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb383-1"><a href="#cb383-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [(<span class="ch">'a'</span> <span class="op">=&gt;</span> <span class="fl">1</span>), (<span class="ch">'b'</span> <span class="op">=&gt;</span> <span class="fl">2</span>), (<span class="ch">'c'</span> <span class="op">=&gt;</span> <span class="fl">3</span>)]</span>
<span id="cb383-2"><a href="#cb383-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb383-3"><a href="#cb383-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Dict</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="184">
<pre><code>Dict{Char, Int64} with 3 entries:
  'a' =&gt; 1
  'c' =&gt; 3
  'b' =&gt; 2</code></pre>
</div>
</div>
<ul>
<li>Creating an empty dictionary:</li>
</ul>
<div id="c283a2cd" class="cell" data-execution_count="208">
<div class="sourceCode cell-code" id="cb385"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb385-1"><a href="#cb385-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Dict</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="185">
<pre><code>Dict{Any, Any}()</code></pre>
</div>
</div>
<ul>
<li>Creating an empty dictionary with given types of keys and values:</li>
</ul>
<div id="6dcc2923" class="cell" data-execution_count="209">
<div class="sourceCode cell-code" id="cb387"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb387-1"><a href="#cb387-1" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> <span class="fu">Dict</span><span class="dt">{String, Int64}</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="186">
<pre><code>Dict{String, Int64}()</code></pre>
</div>
</div>
<p>In the above case, you must provide the keys and values with matched types as set above:</p>
<div id="3ca4bf02" class="cell" data-execution_count="210">
<div class="sourceCode cell-code" id="cb389"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb389-1"><a href="#cb389-1" aria-hidden="true" tabindex="-1"></a>d[<span class="st">"a"</span>] <span class="op">=</span> <span class="fl">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="187">
<pre><code>1</code></pre>
</div>
</div>
<div id="476d4135" class="cell" data-execution_count="211">
<div class="sourceCode cell-code" id="cb391"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb391-1"><a href="#cb391-1" aria-hidden="true" tabindex="-1"></a>d[<span class="ch">'b'</span>] <span class="op">=</span> <span class="fl">2</span>  <span class="co"># This will raise an error, because the type of 'b' is Char, not String</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>MethodError: Cannot `convert` an object of type <span class="ansi-bright-green-fg">Char</span> to an object of type <span class="ansi-bright-red-fg">String</span>

Closest candidates are:
  convert(::Type{String}, <span class="ansi-bright-red-fg">::StringManipulation.Decoration</span>)
<span class="ansi-bright-black-fg">   @</span> <span class="ansi-cyan-fg">StringManipulation</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/local/share/julia/packages/StringManipulation/bMZ2A/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">decorations.jl:365</span>
  convert(::Type{String}, <span class="ansi-bright-red-fg">::JuliaSyntax.Kind</span>)
<span class="ansi-bright-black-fg">   @</span> <span class="ansi-green-fg">JuliaSyntax</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/local/share/julia/packages/JuliaSyntax/BHOG8/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">kinds.jl:975</span>
  convert(::Type{String}, <span class="ansi-bright-red-fg">::Base.JuliaSyntax.Kind</span>)
<span class="ansi-bright-black-fg">   @</span> <span class="ansi-bright-black-fg">Base</span> <span class="ansi-bright-black-fg">/cache/build/tester-amdci4-10/julialang/julia-release-1-dot-10/base/JuliaSyntax/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">kinds.jl:975</span>
  ...


Stacktrace:
 [1] setindex!(h::Dict{String, Int64}, v0::Int64, key0::Char)
   @ Base ./dict.jl:367
 [2] top-level scope
   @ In[188]:1</pre>
</div>
</div>
</div>
<ul>
<li>Creating a dictionary from two separate arrays zipped by <code>zip()</code> function:</li>
</ul>
<div id="0c6496ea" class="cell" data-execution_count="212">
<div class="sourceCode cell-code" id="cb392"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb392-1"><a href="#cb392-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Dict</span>(<span class="fu">zip</span>(<span class="ch">'a'</span><span class="op">:</span><span class="ch">'c'</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="189">
<pre><code>Dict{Char, Int64} with 3 entries:
  'a' =&gt; 1
  'c' =&gt; 3
  'b' =&gt; 2</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>zip()</code> function can zip the corresponding values in a list of arrays into paired tuples, until any of them is exhausted.</p>
<div id="b44d9615" class="cell" data-execution_count="213">
<div class="sourceCode cell-code" id="cb394"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb394-1"><a href="#cb394-1" aria-hidden="true" tabindex="-1"></a><span class="fu">collect</span>(<span class="fu">zip</span>(<span class="ch">'a'</span><span class="op">:</span><span class="ch">'c'</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="ch">'A'</span><span class="op">:</span><span class="ch">'C'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="190">
<pre><code>3-element Vector{Tuple{Char, Int64, Char}}:
 ('a', 1, 'A')
 ('b', 2, 'B')
 ('c', 3, 'C')</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="accessing-elements" class="level5" data-number="2.9.4.2">
<h5 data-number="2.9.4.2" class="anchored" data-anchor-id="accessing-elements"><span class="header-section-number">2.9.4.2</span> Accessing elements</h5>
<div id="fa4791a3" class="cell" data-execution_count="214">
<div class="sourceCode cell-code" id="cb396"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb396-1"><a href="#cb396-1" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> <span class="fu">Dict</span>(i <span class="op">=&gt;</span> j <span class="cf">for</span> (i, j) <span class="kw">in</span> <span class="fu">zip</span>(<span class="ch">'A'</span><span class="op">:</span><span class="ch">'F'</span>, <span class="ch">'a'</span><span class="op">:</span><span class="ch">'f'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="191">
<pre><code>Dict{Char, Char} with 6 entries:
  'C' =&gt; 'c'
  'D' =&gt; 'd'
  'A' =&gt; 'a'
  'E' =&gt; 'e'
  'F' =&gt; 'f'
  'B' =&gt; 'b'</code></pre>
</div>
</div>
<ul>
<li>By key:</li>
</ul>
<div id="da1a4055" class="cell" data-execution_count="215">
<div class="sourceCode cell-code" id="cb398"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb398-1"><a href="#cb398-1" aria-hidden="true" tabindex="-1"></a>d[<span class="ch">'F'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="192">
<pre><code>'f': ASCII/Unicode U+0066 (category Ll: Letter, lowercase)</code></pre>
</div>
</div>
<p>-By <code>get(dict, key, default)</code>: if the <code>key</code> is not in the <code>dict</code>, it will return the <code>default</code>, instead of raising an error.</p>
<div id="da6143de" class="cell" data-execution_count="216">
<div class="sourceCode cell-code" id="cb400"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb400-1"><a href="#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get</span>(d, <span class="ch">'Z'</span>, <span class="op">-</span><span class="fl">1</span>)  <span class="co">#</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="193">
<pre><code>-1</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can use <code>keys()</code> and <code>values()</code> to get all keys and values, respectively.</p>
<p>You can check whether a dictionary contains a key by using <code>haskey(dict, key)</code>.</p>
</div>
</div>
</section>
</section>
<section id="sets" class="level4" data-number="2.9.5">
<h4 data-number="2.9.5" class="anchored" data-anchor-id="sets"><span class="header-section-number">2.9.5</span> Sets</h4>
<ol type="1">
<li>Creating sets</li>
</ol>
<div id="b48813cc" class="cell" data-execution_count="217">
<div class="sourceCode cell-code" id="cb402"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb402-1"><a href="#cb402-1" aria-hidden="true" tabindex="-1"></a>fruits <span class="op">=</span> <span class="fu">Set</span>([<span class="st">"apple"</span>, <span class="st">"banana"</span>, <span class="st">"peach"</span>, <span class="st">"pear"</span>, <span class="st">"orange"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="194">
<pre><code>Set{String} with 5 elements:
  "peach"
  "pear"
  "orange"
  "banana"
  "apple"</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Properties of sets</li>
</ol>
<p>The set in Julia is the very set in mathematics.</p>
<p>For a given set S, the following hold:</p>
<ul>
<li><p>Each element x is either in S or not in S.</p></li>
<li><p>Elements are unordered in S.</p></li>
<li><p>There are no duplicate elements in S.</p></li>
</ul>
<ol start="3" type="1">
<li>Set-specific operations</li>
</ol>
<ul>
<li><p>Union: <code>∪</code> or <code>union()</code>.</p></li>
<li><p>Intersection: <code>∩</code> or <code>intersect()</code>.</p></li>
<li><p>Difference: <code>setdiff()</code>.</p></li>
</ul>
<p>Certainly, you can check whether an element belongs to a set or not (see <a href="#nte-memberoperator" class="quarto-xref">Note&nbsp;1</a>), as well as whether a set is a (proper) subset of the other (see <a href="#nte-subsetoperator" class="quarto-xref">Note&nbsp;2</a>).</p>
<div id="nte-subsetoperator" class="callout callout-style-default callout-note callout-titled" title="Subset operator `⊆`">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note&nbsp;2: Subset operator <code>⊆</code>
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can use <code>issubset()</code>, <code>⊆</code>, <code>⊇</code>, or <code>⊈</code> to judge the relationship between any two sets.</p>
</div>
</div>
</section>
<section id="collection-comprehension" class="level4" data-number="2.9.6">
<h4 data-number="2.9.6" class="anchored" data-anchor-id="collection-comprehension"><span class="header-section-number">2.9.6</span> Collection comprehension</h4>
<p>An example in terms of an array: <code>[F(x, y, ...) for x = rx, y = ry, ...]</code>, where the latter <code>for</code> is nested within the former one, and generated values can be filtered using the <code>if</code> keyword.</p>
<div id="6115ec36" class="cell" data-execution_count="218">
<div class="sourceCode cell-code" id="cb404"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb404-1"><a href="#cb404-1" aria-hidden="true" tabindex="-1"></a>[i for i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span> if i<span class="op">%</span><span class="fl">2</span> <span class="op">==</span> <span class="fl">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="195">
<pre><code>5-element Vector{Int64}:
  2
  4
  6
  8
 10</code></pre>
</div>
</div>
<div id="aae1c240" class="cell" data-execution_count="219">
<div class="sourceCode cell-code" id="cb406"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb406-1"><a href="#cb406-1" aria-hidden="true" tabindex="-1"></a>[(i, j, k) for (i, j, k) <span class="kw">in</span> <span class="fu">zip</span>(<span class="ch">'A'</span><span class="op">:</span><span class="ch">'F'</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="ch">'a'</span><span class="op">:</span><span class="ch">'f'</span>)]  <span class="co"># For (i, j, k), () is mandatory</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="196">
<pre><code>6-element Vector{Tuple{Char, Int64, Char}}:
 ('A', 1, 'a')
 ('B', 2, 'b')
 ('C', 3, 'c')
 ('D', 4, 'd')
 ('E', 5, 'e')
 ('F', 6, 'f')</code></pre>
</div>
</div>
<div id="d7f0aaf4" class="cell" data-execution_count="220">
<div class="sourceCode cell-code" id="cb408"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb408-1"><a href="#cb408-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Dict</span>(<span class="ch">'A'</span><span class="op">+</span>i <span class="op">=&gt;</span> i<span class="op">+</span><span class="fl">1</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="fl">0</span><span class="op">:</span><span class="fl">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="197">
<pre><code>Dict{Char, Int64} with 11 entries:
  'K' =&gt; 11
  'J' =&gt; 10
  'I' =&gt; 9
  'H' =&gt; 8
  'E' =&gt; 5
  'B' =&gt; 2
  'C' =&gt; 3
  'D' =&gt; 4
  'A' =&gt; 1
  'G' =&gt; 7
  'F' =&gt; 6</code></pre>
</div>
</div>
<div id="20a65c7d" class="cell" data-execution_count="221">
<div class="sourceCode cell-code" id="cb410"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb410-1"><a href="#cb410-1" aria-hidden="true" tabindex="-1"></a>[[j for j <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span>] for i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="198">
<pre><code>3-element Vector{Vector{Int64}}:
 [1, 2, 3, 4, 5, 6]
 [1, 2, 3, 4, 5, 6]
 [1, 2, 3, 4, 5, 6]</code></pre>
</div>
</div>
<p>You can specify the type of elements generated by prefixing with a wanted type:</p>
<div id="b3b7ce80" class="cell" data-execution_count="222">
<div class="sourceCode cell-code" id="cb412"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb412-1"><a href="#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Vector</span>{<span class="dt">Float64</span>}[[j for j <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span>] for i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="199">
<pre><code>3-element Vector{Vector{Float64}}:
 [1.0, 2.0, 3.0, 4.0, 5.0, 6.0]
 [1.0, 2.0, 3.0, 4.0, 5.0, 6.0]
 [1.0, 2.0, 3.0, 4.0, 5.0, 6.0]</code></pre>
</div>
</div>
</section>
<section id="generator" class="level4" data-number="2.9.7">
<h4 data-number="2.9.7" class="anchored" data-anchor-id="generator"><span class="header-section-number">2.9.7</span> Generator</h4>
<p>Collection comprehensions can also be written <strong>without the enclosing brackets</strong>, producing an object known as a generator.</p>
<div id="44a60636" class="cell" data-execution_count="223">
<div class="sourceCode cell-code" id="cb414"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb414-1"><a href="#cb414-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fl">1</span><span class="op">/</span>n<span class="op">^</span><span class="fl">2</span> <span class="cf">for</span> n <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="200">
<pre><code>1.6439345666815615</code></pre>
</div>
</div>
<p><strong>Note:</strong> when writing a generator expression <strong>with multiple dimensions inside an argument list</strong>, parentheses are needed to separate the generator from subsequent arguments.</p>
<div id="de194eb1" class="cell" data-execution_count="224">
<div class="sourceCode cell-code" id="cb416"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb416-1"><a href="#cb416-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(tuple, (<span class="fl">1</span><span class="op">/</span>(i<span class="op">+</span>j) <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, j<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>), [<span class="fl">1</span> <span class="fl">3</span>; <span class="fl">2</span> <span class="fl">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="201">
<pre><code>2×2 Matrix{Tuple{Float64, Int64}}:
 (0.5, 1)       (0.333333, 3)
 (0.333333, 2)  (0.25, 4)</code></pre>
</div>
</div>
<p><strong>Generating a matrix:</strong></p>
<div id="9bebf5af" class="cell" data-execution_count="225">
<div class="sourceCode cell-code" id="cb418"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb418-1"><a href="#cb418-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">100</span>i <span class="op">+</span> j for i<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, j<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="202">
<pre><code>3×3 Matrix{Int64}:
 101  102  103
 201  202  203
 301  302  303</code></pre>
</div>
</div>
<p>The above code is equivalent to:</p>
<div id="53b622ce" class="cell" data-execution_count="226">
<div class="sourceCode cell-code" id="cb420"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb420-1"><a href="#cb420-1" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> <span class="fu">zeros</span>(<span class="dt">Float64</span>, <span class="fl">3</span>, <span class="fl">3</span>)</span>
<span id="cb420-2"><a href="#cb420-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb420-3"><a href="#cb420-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span id="cb420-4"><a href="#cb420-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span id="cb420-5"><a href="#cb420-5" aria-hidden="true" tabindex="-1"></a>        A[i,j] <span class="op">=</span> <span class="fl">100</span>i <span class="op">+</span> j</span>
<span id="cb420-6"><a href="#cb420-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb420-7"><a href="#cb420-7" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb420-8"><a href="#cb420-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb420-9"><a href="#cb420-9" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="203">
<pre><code>3×3 Matrix{Float64}:
 101.0  102.0  103.0
 201.0  202.0  203.0
 301.0  302.0  303.0</code></pre>
</div>
</div>
</section>
<section id="enumerating-values-and-indices" class="level4" data-number="2.9.8">
<h4 data-number="2.9.8" class="anchored" data-anchor-id="enumerating-values-and-indices"><span class="header-section-number">2.9.8</span> Enumerating values and indices</h4>
<div id="495c3cde" class="cell" data-execution_count="227">
<div class="sourceCode cell-code" id="cb422"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb422-1"><a href="#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="fu">collect</span>(<span class="fu">enumerate</span>(<span class="ch">'A'</span><span class="op">:</span><span class="ch">'F'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="204">
<pre><code>6-element Vector{Tuple{Int64, Char}}:
 (1, 'A')
 (2, 'B')
 (3, 'C')
 (4, 'D')
 (5, 'E')
 (6, 'F')</code></pre>
</div>
</div>
<div id="3bdf0778" class="cell" data-execution_count="228">
<div class="sourceCode cell-code" id="cb424"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb424-1"><a href="#cb424-1" aria-hidden="true" tabindex="-1"></a>[(i, val) for (i, val) <span class="kw">in</span> <span class="fu">enumerate</span>(<span class="ch">'A'</span><span class="op">:</span><span class="ch">'F'</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="205">
<pre><code>6-element Vector{Tuple{Int64, Char}}:
 (1, 'A')
 (2, 'B')
 (3, 'C')
 (4, 'D')
 (5, 'E')
 (6, 'F')</code></pre>
</div>
</div>
</section>
<section id="creating-an-enum-type-with-enum-macro" class="level4" data-number="2.9.9">
<h4 data-number="2.9.9" class="anchored" data-anchor-id="creating-an-enum-type-with-enum-macro"><span class="header-section-number">2.9.9</span> Creating an <code>enum</code> type with <code>@enum</code> macro</h4>
<div id="8e9d3ed9" class="cell" data-execution_count="229">
<div class="sourceCode cell-code" id="cb426"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb426-1"><a href="#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@enum</span> Fruit apple peach pear banana orange</span>
<span id="cb426-2"><a href="#cb426-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb426-3"><a href="#cb426-3" aria-hidden="true" tabindex="-1"></a>Fruit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="206">
<pre><code>Enum Fruit:
apple = 0
peach = 1
pear = 2
banana = 3
orange = 4</code></pre>
</div>
</div>
<div id="98a0baad" class="cell" data-execution_count="230">
<div class="sourceCode cell-code" id="cb428"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb428-1"><a href="#cb428-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Fruit</span>(<span class="fl">0</span>), <span class="fu">Fruit</span>(<span class="fl">3</span>)  <span class="co"># Access by index</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="207">
<pre><code>(apple, banana)</code></pre>
</div>
</div>
<div id="eb2a8dfc" class="cell" data-execution_count="231">
<div class="sourceCode cell-code" id="cb430"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb430-1"><a href="#cb430-1" aria-hidden="true" tabindex="-1"></a><span class="fu">instances</span>(Fruit)  <span class="co"># Return all possible values</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="208">
<pre><code>(apple, peach, pear, banana, orange)</code></pre>
</div>
</div>
</section>
<section id="understanding-julia-collections" class="level4" data-number="2.9.10">
<h4 data-number="2.9.10" class="anchored" data-anchor-id="understanding-julia-collections"><span class="header-section-number">2.9.10</span> Understanding Julia collections</h4>
<p>Two key questions:</p>
<ol type="1">
<li><p>What makes something a collection?</p></li>
<li><p>What are the differences and similarities between different collection types?</p></li>
</ol>
<section id="what-makes-something-a-collection" class="level5" data-number="2.9.10.1">
<h5 data-number="2.9.10.1" class="anchored" data-anchor-id="what-makes-something-a-collection"><span class="header-section-number">2.9.10.1</span> What makes something a collection</h5>
<p>At a minimum, you are expected to extend the <code>iterate()</code> function for your data type with the following methods to make your data type a collection:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>iterate(iter)</code></td>
<td>Return the first item and the next state (e.g.&nbsp;the index of the next item)</td>
</tr>
<tr class="even">
<td><code>iterate(iter, state)</code></td>
<td>Return the current item and the next state</td>
</tr>
</tbody>
</table>
<p>An index-based iteration example:</p>
<ol type="1">
<li>Define the <code>Cluster</code> type to be iterated:</li>
</ol>
<div id="cf33f660" class="cell" data-execution_count="232">
<div class="sourceCode cell-code" id="cb432"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb432-1"><a href="#cb432-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the Engine type</span></span>
<span id="cb432-2"><a href="#cb432-2" aria-hidden="true" tabindex="-1"></a><span class="kw">abstract type</span> Engine <span class="kw">end</span></span>
<span id="cb432-3"><a href="#cb432-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb432-4"><a href="#cb432-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define valid engine models</span></span>
<span id="cb432-5"><a href="#cb432-5" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Panda <span class="op">&lt;:</span><span class="dt"> Engine</span></span>
<span id="cb432-6"><a href="#cb432-6" aria-hidden="true" tabindex="-1"></a>    count<span class="op">::</span><span class="dt">Integer</span></span>
<span id="cb432-7"><a href="#cb432-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb432-8"><a href="#cb432-8" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Bear <span class="op">&lt;:</span><span class="dt"> Engine</span></span>
<span id="cb432-9"><a href="#cb432-9" aria-hidden="true" tabindex="-1"></a>    count<span class="op">::</span><span class="dt">Integer</span></span>
<span id="cb432-10"><a href="#cb432-10" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb432-11"><a href="#cb432-11" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Dog <span class="op">&lt;:</span><span class="dt"> Engine</span></span>
<span id="cb432-12"><a href="#cb432-12" aria-hidden="true" tabindex="-1"></a>    count<span class="op">::</span><span class="dt">Integer</span></span>
<span id="cb432-13"><a href="#cb432-13" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb432-14"><a href="#cb432-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb432-15"><a href="#cb432-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the Cluster type, which can consist of many engine models</span></span>
<span id="cb432-16"><a href="#cb432-16" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Cluster <span class="op">&lt;:</span><span class="dt"> Engine</span></span>
<span id="cb432-17"><a href="#cb432-17" aria-hidden="true" tabindex="-1"></a>    engines<span class="op">::</span><span class="dt">Vector{Engine}  </span><span class="co"># A vector with elements of Engine type</span></span>
<span id="cb432-18"><a href="#cb432-18" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="956f9ab9" class="cell" data-execution_count="233">
<div class="sourceCode cell-code" id="cb433"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb433-1"><a href="#cb433-1" aria-hidden="true" tabindex="-1"></a><span class="fu">engine_type</span>(<span class="op">::</span><span class="dt">Panda</span>) <span class="op">=</span> <span class="st">"Panda"</span></span>
<span id="cb433-2"><a href="#cb433-2" aria-hidden="true" tabindex="-1"></a><span class="fu">engine_type</span>(<span class="op">::</span><span class="dt">Bear</span>) <span class="op">=</span> <span class="st">"Bear"</span></span>
<span id="cb433-3"><a href="#cb433-3" aria-hidden="true" tabindex="-1"></a><span class="fu">engine_type</span>(<span class="op">::</span><span class="dt">Dog</span>) <span class="op">=</span> <span class="st">"Dog"</span></span>
<span id="cb433-4"><a href="#cb433-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb433-5"><a href="#cb433-5" aria-hidden="true" tabindex="-1"></a><span class="fu">engine_count</span>(engine<span class="op">::</span><span class="dt">Union{Panda, Bear, Dog}</span>) <span class="op">=</span> engine.count</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="210">
<pre><code>engine_count (generic function with 1 method)</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Extend the <code>iterate()</code> function:</li>
</ol>
<div id="c13d3cd3" class="cell" data-execution_count="234">
<div class="sourceCode cell-code" id="cb435"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb435-1"><a href="#cb435-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Base</span>: iterate</span>
<span id="cb435-2"><a href="#cb435-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb435-3"><a href="#cb435-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Start the iteration</span></span>
<span id="cb435-4"><a href="#cb435-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">iterate</span>(cluster<span class="op">::</span><span class="dt">Cluster</span>)</span>
<span id="cb435-5"><a href="#cb435-5" aria-hidden="true" tabindex="-1"></a>    cluster.engines[<span class="fl">1</span>], <span class="fl">2</span>  <span class="co"># Return the first element and the index of the next element</span></span>
<span id="cb435-6"><a href="#cb435-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb435-7"><a href="#cb435-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb435-8"><a href="#cb435-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the next element</span></span>
<span id="cb435-9"><a href="#cb435-9" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">iterate</span>(cluster<span class="op">::</span><span class="dt">Cluster</span>, i<span class="op">::</span><span class="dt">Integer</span>)</span>
<span id="cb435-10"><a href="#cb435-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">&gt;</span> <span class="fu">length</span>(cluster.engines)</span>
<span id="cb435-11"><a href="#cb435-11" aria-hidden="true" tabindex="-1"></a>        <span class="cn">nothing</span>  <span class="co"># Return nothing to indicate you reached the end</span></span>
<span id="cb435-12"><a href="#cb435-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb435-13"><a href="#cb435-13" aria-hidden="true" tabindex="-1"></a>        cluster.engines[i], i<span class="op">+</span><span class="fl">1</span>  <span class="co"># Don't forget to return the index of the next element</span></span>
<span id="cb435-14"><a href="#cb435-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb435-15"><a href="#cb435-15" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="211">
<pre><code>iterate (generic function with 364 methods)</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Iterate the <code>Cluster</code> instance:</li>
</ol>
<div id="623c67cf" class="cell" data-execution_count="235">
<div class="sourceCode cell-code" id="cb437"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb437-1"><a href="#cb437-1" aria-hidden="true" tabindex="-1"></a>cluster <span class="op">=</span> <span class="fu">Cluster</span>([<span class="fu">Panda</span>(<span class="fl">1</span>), <span class="fu">Bear</span>(<span class="fl">5</span>), <span class="fu">Dog</span>(<span class="fl">10</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="212">
<pre><code>Cluster(Engine[Panda(1), Bear(5), Dog(10)])</code></pre>
</div>
</div>
<div id="494cdd2f" class="cell" data-execution_count="236">
<div class="sourceCode cell-code" id="cb439"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb439-1"><a href="#cb439-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> engine <span class="kw">in</span> cluster</span>
<span id="cb439-2"><a href="#cb439-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(<span class="fu">engine_type</span>(engine), <span class="st">": "</span>, <span class="fu">engine_count</span>(engine))</span>
<span id="cb439-3"><a href="#cb439-3" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Panda: 1
Bear: 5
Dog: 10</code></pre>
</div>
</div>
<p>Internally, the Julia JIT compiler will convert this <code>for</code> loop into a lower-level <code>while</code> loop, which looks like the following code:</p>
<div id="8e16b033" class="cell" data-execution_count="237">
<div class="sourceCode cell-code" id="cb441"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb441-1"><a href="#cb441-1" aria-hidden="true" tabindex="-1"></a>next <span class="op">=</span> <span class="fu">iterate</span>(cluster)  <span class="co"># Begin iteration</span></span>
<span id="cb441-2"><a href="#cb441-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> next <span class="op">!=</span> <span class="cn">nothing</span>  <span class="co"># Check if you reached the end of the iteration</span></span>
<span id="cb441-3"><a href="#cb441-3" aria-hidden="true" tabindex="-1"></a>    (engine, i) <span class="op">=</span> next</span>
<span id="cb441-4"><a href="#cb441-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(<span class="fu">engine_type</span>(engine), <span class="st">": "</span>, <span class="fu">engine_count</span>(engine))</span>
<span id="cb441-5"><a href="#cb441-5" aria-hidden="true" tabindex="-1"></a>    next <span class="op">=</span> <span class="fu">iterate</span>(cluster, i)  <span class="co"># Advance to the next element</span></span>
<span id="cb441-6"><a href="#cb441-6" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Panda: 1
Bear: 5
Dog: 10</code></pre>
</div>
</div>
<p>A linked list example:</p>
<div id="6508a53e" class="cell" data-execution_count="238">
<div class="sourceCode cell-code" id="cb443"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb443-1"><a href="#cb443-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Base</span>: iterate</span>
<span id="cb443-2"><a href="#cb443-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb443-3"><a href="#cb443-3" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> MyLinkedList</span>
<span id="cb443-4"><a href="#cb443-4" aria-hidden="true" tabindex="-1"></a>    id<span class="op">::</span><span class="dt">Int</span></span>
<span id="cb443-5"><a href="#cb443-5" aria-hidden="true" tabindex="-1"></a>    name<span class="op">::</span><span class="dt">String</span></span>
<span id="cb443-6"><a href="#cb443-6" aria-hidden="true" tabindex="-1"></a>    next<span class="op">::</span><span class="dt">Union{MyLinkedList, Nothing}</span></span>
<span id="cb443-7"><a href="#cb443-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb443-8"><a href="#cb443-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb443-9"><a href="#cb443-9" aria-hidden="true" tabindex="-1"></a><span class="co"># First, Julia uses the instance of MyLinkedList as the unique argument to retrieve the first element and the flag of the next element</span></span>
<span id="cb443-10"><a href="#cb443-10" aria-hidden="true" tabindex="-1"></a><span class="fu">iterate</span>(first<span class="op">::</span><span class="dt">MyLinkedList</span>) <span class="op">=</span> ((first.id, first.name), first.next)  <span class="co"># The first value is what you want to retrieve; the second value is used to tell where the next element is</span></span>
<span id="cb443-11"><a href="#cb443-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Then, Julia uses the instance of MyLinkedList and the flag of the next element, returned by the previous one to retrieve the next element and the flag of the next element, in contrast with the current one</span></span>
<span id="cb443-12"><a href="#cb443-12" aria-hidden="true" tabindex="-1"></a><span class="fu">iterate</span>(prev<span class="op">::</span><span class="dt">MyLinkedList</span>, current<span class="op">::</span><span class="dt">MyLinkedList</span>) <span class="op">=</span> ((current.id, current.name), current.next)</span>
<span id="cb443-13"><a href="#cb443-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Finally, iteration-supported function needs a nothing to indicate that the iteration is done</span></span>
<span id="cb443-14"><a href="#cb443-14" aria-hidden="true" tabindex="-1"></a><span class="fu">iterate</span>(<span class="op">::</span><span class="dt">MyLinkedList</span>, <span class="op">::</span><span class="dt">Nothing</span>) <span class="op">=</span> <span class="cn">nothing</span>  <span class="co"># Return nothing if the iteration is done</span></span>
<span id="cb443-15"><a href="#cb443-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb443-16"><a href="#cb443-16" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fu">MyLinkedList</span>(<span class="fl">1</span>, <span class="st">"1st"</span>, <span class="fu">MyLinkedList</span>(<span class="fl">2</span>, <span class="st">"2nd"</span>, <span class="fu">MyLinkedList</span>(<span class="fl">3</span>, <span class="st">"3rd"</span>, <span class="cn">nothing</span>)))</span>
<span id="cb443-17"><a href="#cb443-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb443-18"><a href="#cb443-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (id, name) <span class="kw">in</span> x  <span class="co"># The parentheses are essential</span></span>
<span id="cb443-19"><a href="#cb443-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(id, <span class="st">": "</span>, name)</span>
<span id="cb443-20"><a href="#cb443-20" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1: 1st
2: 2nd
3: 3rd</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>For multiple assignment, parentheses are mandatory in <code>for</code> loop; otherwise it’s trivial.</p>
</div>
</div>
<p>A similar <code>while</code> counterpart of <code>for</code>:</p>
<div id="7ff2b844" class="cell" data-execution_count="239">
<div class="sourceCode cell-code" id="cb445"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb445-1"><a href="#cb445-1" aria-hidden="true" tabindex="-1"></a>next <span class="op">=</span> <span class="fu">iterate</span>(x)</span>
<span id="cb445-2"><a href="#cb445-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> next <span class="op">!=</span> <span class="cn">nothing</span></span>
<span id="cb445-3"><a href="#cb445-3" aria-hidden="true" tabindex="-1"></a>    current, next <span class="op">=</span> next</span>
<span id="cb445-4"><a href="#cb445-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(current[<span class="fl">1</span>], <span class="st">": "</span>, current[<span class="fl">2</span>])</span>
<span id="cb445-5"><a href="#cb445-5" aria-hidden="true" tabindex="-1"></a>    next <span class="op">=</span> <span class="fu">iterate</span>(x, next)</span>
<span id="cb445-6"><a href="#cb445-6" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1: 1st
2: 2nd
3: 3rd</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Adding support for <code>map()</code> and <code>collect()</code></li>
</ol>
<p>If you run <code>collect()</code> on x, you will get the following error:</p>
<div id="6d186d62" class="cell" data-execution_count="240">
<div class="sourceCode cell-code" id="cb447"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb447-1"><a href="#cb447-1" aria-hidden="true" tabindex="-1"></a><span class="fu">collect</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>MethodError: no method matching length(::MyLinkedList)

Closest candidates are:
  length(<span class="ansi-bright-red-fg">::Pkg.Types.Manifest</span>)
<span class="ansi-bright-black-fg">   @</span> <span class="ansi-yellow-fg">Pkg</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Pkg/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">Types.jl:321</span>
  length(<span class="ansi-bright-red-fg">::Core.Compiler.InstructionStream</span>)
<span class="ansi-bright-black-fg">   @</span> <span class="ansi-bright-black-fg">Base</span> <span style="text-decoration:underline" class="ansi-bright-black-fg">show.jl:2777</span>
  length(<span class="ansi-bright-red-fg">::LibGit2.GitBlob</span>)
<span class="ansi-bright-black-fg">   @</span> <span class="ansi-magenta-fg">LibGit2</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/LibGit2/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">blob.jl:3</span>
  ...


Stacktrace:
 [1] _similar_shape(itr::MyLinkedList, ::Base.HasLength)
   @ Base ./array.jl:710
 [2] _collect(cont::UnitRange{Int64}, itr::MyLinkedList, ::Base.HasEltype, isz::Base.HasLength)
   @ Base ./array.jl:765
 [3] collect(itr::MyLinkedList)
   @ Base ./array.jl:759
 [4] top-level scope
   @ In[217]:2</pre>
</div>
</div>
</div>
<p>Of course, you can simply define a <code>length()</code> method for <code>MyLinkedList</code> type like the following:</p>
<div id="c30f0beb" class="cell" data-execution_count="241">
<div class="sourceCode cell-code" id="cb448"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb448-1"><a href="#cb448-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Base</span>: length</span>
<span id="cb448-2"><a href="#cb448-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb448-3"><a href="#cb448-3" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="op">::</span><span class="dt">Nothing</span>) <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb448-4"><a href="#cb448-4" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(x<span class="op">::</span><span class="dt">MyLinkedList</span>) <span class="op">=</span> <span class="fl">1</span> <span class="op">+</span> <span class="fu">length</span>(x.next)</span>
<span id="cb448-5"><a href="#cb448-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb448-6"><a href="#cb448-6" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="218">
<pre><code>3</code></pre>
</div>
</div>
<p>However, the time it takes to calculate the length of <code>MyLinkedList</code> is proportional to its length. Such algorithms are referred to as <strong>linear</strong> or <span class="math inline">\(O(n)\)</span> in big-O notation.</p>
<p>Instead, we will implement an <code>IteratorSize()</code> method:</p>
<div id="8ab20617" class="cell" data-execution_count="242">
<div class="sourceCode cell-code" id="cb450"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb450-1"><a href="#cb450-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Base</span>: IteratorSize</span>
<span id="cb450-2"><a href="#cb450-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb450-3"><a href="#cb450-3" aria-hidden="true" tabindex="-1"></a><span class="fu">IteratorSize</span>(<span class="op">::</span><span class="dt">Type{MyLinkedList}</span>) <span class="op">=</span> <span class="bu">Base</span>.<span class="fu">SizeUnknown</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="219">
<pre><code>IteratorSize</code></pre>
</div>
</div>
<p>By default, <code>IteratorSize()</code> is defined like the following:</p>
<div id="3b6dbd00" class="cell" data-execution_count="243">
<div class="sourceCode cell-code" id="cb452"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb452-1"><a href="#cb452-1" aria-hidden="true" tabindex="-1"></a><span class="fu">IteratorSize</span>(x) <span class="op">=</span> <span class="fu">IteratorSize</span>(<span class="fu">typeof</span>(x))</span>
<span id="cb452-2"><a href="#cb452-2" aria-hidden="true" tabindex="-1"></a><span class="fu">IteratorSize</span>(<span class="op">::</span><span class="dt">Type</span>) <span class="op">=</span> <span class="fu">HasLength</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Here, <code>IteratorSize()</code> is a <strong>trait</strong> of Julia collections. It is used to indicate whether a collection has a known length.</p>
<p><strong>In Julia, traits are defined as abstract types. The values a trait can have are determined by a concrete subtype.</strong></p>
<p>For example, the trait <code>IteratorSize()</code> has subtypes <code>SizeUnknown()</code>, <code>HasLength()</code>, and so on.</p>
<p>If the <code>IteratorSize()</code> trait is defined as <code>HasLength()</code>, then Julia will call <code>length()</code> to determine the size of the result array produced from <code>collect()</code>. Instead, when you define this trait as <code>SizeUnknown()</code>, Julia will use an empty array for output that grows as needed.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<div id="87c02b1f" class="cell" data-execution_count="244">
<div class="sourceCode cell-code" id="cb453"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb453-1"><a href="#cb453-1" aria-hidden="true" tabindex="-1"></a><span class="fu">foo</span>(<span class="op">::</span><span class="dt">Type{Integer}</span>) <span class="op">=</span> <span class="ch">'A'</span>  <span class="co"># Only accepting the type Integer as a valid argument</span></span>
<span id="cb453-2"><a href="#cb453-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb453-3"><a href="#cb453-3" aria-hidden="true" tabindex="-1"></a><span class="fu">foo</span>(<span class="dt">Integer</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="220">
<pre><code>'A': ASCII/Unicode U+0041 (category Lu: Letter, uppercase)</code></pre>
</div>
</div>
<div id="2e52d82e" class="cell" data-execution_count="245">
<div class="sourceCode cell-code" id="cb455"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb455-1"><a href="#cb455-1" aria-hidden="true" tabindex="-1"></a><span class="fu">foo</span>(<span class="dt">Int64</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>MethodError: no method matching foo(::Type{Int64})

Closest candidates are:
  foo(<span class="ansi-bright-red-fg">::Int64</span>)
<span class="ansi-bright-black-fg">   @</span> <span class="ansi-magenta-fg">Main</span> <span style="text-decoration:underline" class="ansi-bright-black-fg">In[23]:1</span>
  foo(<span class="ansi-bright-red-fg">::Type{Integer}</span>)
<span class="ansi-bright-black-fg">   @</span> <span class="ansi-magenta-fg">Main</span> <span style="text-decoration:underline" class="ansi-bright-black-fg">In[220]:1</span>


Stacktrace:
 [1] top-level scope
   @ In[221]:2</pre>
</div>
</div>
</div>
<div id="3cb7b178" class="cell" data-execution_count="246">
<div class="sourceCode cell-code" id="cb456"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb456-1"><a href="#cb456-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fb</span>(<span class="op">::</span><span class="dt">Type{&lt;:Integer}</span>) <span class="op">=</span> <span class="ch">'B'</span>  <span class="co"># Integer as well as its all subtypes are valid arguments</span></span>
<span id="cb456-2"><a href="#cb456-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb456-3"><a href="#cb456-3" aria-hidden="true" tabindex="-1"></a><span class="fu">fb</span>(<span class="dt">Integer</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="222">
<pre><code>'B': ASCII/Unicode U+0042 (category Lu: Letter, uppercase)</code></pre>
</div>
</div>
<div id="f271f175" class="cell" data-execution_count="247">
<div class="sourceCode cell-code" id="cb458"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb458-1"><a href="#cb458-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fb</span>(<span class="dt">Int64</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="223">
<pre><code>'B': ASCII/Unicode U+0042 (category Lu: Letter, uppercase)</code></pre>
</div>
</div>
</div>
</div>
<ol start="5" type="1">
<li>Adding more interfaces to your data type</li>
</ol>
<p>To make your data type more versatile, you may add more interfaces to your data type.</p>
<p>For example, as a collection, your data type should support getting, setting, adding, and removing elements, which are achieved by the following methods:</p>
<ul>
<li><p><code>getindex()</code>: this makes it possible to access elements with <code>[]</code>.</p></li>
<li><p><code>setindex!()</code>: this makes it possible to set elements with <code>[]</code>.</p></li>
<li><p><code>push!()</code>: adding elements to the back of a collection.</p></li>
<li><p><code>pushfirst!()</code>: adding elements to the front of a collection.</p></li>
<li><p><code>pop!()</code>: removing the last element.</p></li>
<li><p><code>popfirst!()</code>: removing the first element.</p></li>
</ul>
<p>In a word, some interfaces to a collection are achieved by implicitly calling some methods by Julia itself (e.g.&nbsp;looping a collection); some other interfaces to a collection are achieved by explicitly calling some methods by users (e.g.&nbsp;adding elements).</p>
</section>
</section>
</section>
<section id="functional-programming" class="level3" data-number="2.10">
<h3 data-number="2.10" class="anchored" data-anchor-id="functional-programming"><span class="header-section-number">2.10</span> Functional programming</h3>
<section id="higher-order-functions" class="level4" data-number="2.10.1">
<h4 data-number="2.10.1" class="anchored" data-anchor-id="higher-order-functions"><span class="header-section-number">2.10.1</span> Higher order functions</h4>
<p>These are funtions that take other functions as arguments and/or return functions.</p>
<ol type="1">
<li><code>map(f, iterable)</code>: apply <code>f</code> to each element of <code>iterable</code>.</li>
</ol>
<div id="063dee51" class="cell" data-execution_count="248">
<div class="sourceCode cell-code" id="cb460"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb460-1"><a href="#cb460-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(uppercase, <span class="ch">'a'</span><span class="op">:</span><span class="ch">'z'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="224">
<pre><code>26-element Vector{Char}:
 'A': ASCII/Unicode U+0041 (category Lu: Letter, uppercase)
 'B': ASCII/Unicode U+0042 (category Lu: Letter, uppercase)
 'C': ASCII/Unicode U+0043 (category Lu: Letter, uppercase)
 'D': ASCII/Unicode U+0044 (category Lu: Letter, uppercase)
 'E': ASCII/Unicode U+0045 (category Lu: Letter, uppercase)
 'F': ASCII/Unicode U+0046 (category Lu: Letter, uppercase)
 'G': ASCII/Unicode U+0047 (category Lu: Letter, uppercase)
 'H': ASCII/Unicode U+0048 (category Lu: Letter, uppercase)
 'I': ASCII/Unicode U+0049 (category Lu: Letter, uppercase)
 'J': ASCII/Unicode U+004A (category Lu: Letter, uppercase)
 'K': ASCII/Unicode U+004B (category Lu: Letter, uppercase)
 'L': ASCII/Unicode U+004C (category Lu: Letter, uppercase)
 'M': ASCII/Unicode U+004D (category Lu: Letter, uppercase)
 'N': ASCII/Unicode U+004E (category Lu: Letter, uppercase)
 'O': ASCII/Unicode U+004F (category Lu: Letter, uppercase)
 'P': ASCII/Unicode U+0050 (category Lu: Letter, uppercase)
 'Q': ASCII/Unicode U+0051 (category Lu: Letter, uppercase)
 'R': ASCII/Unicode U+0052 (category Lu: Letter, uppercase)
 'S': ASCII/Unicode U+0053 (category Lu: Letter, uppercase)
 'T': ASCII/Unicode U+0054 (category Lu: Letter, uppercase)
 'U': ASCII/Unicode U+0055 (category Lu: Letter, uppercase)
 'V': ASCII/Unicode U+0056 (category Lu: Letter, uppercase)
 'W': ASCII/Unicode U+0057 (category Lu: Letter, uppercase)
 'X': ASCII/Unicode U+0058 (category Lu: Letter, uppercase)
 'Y': ASCII/Unicode U+0059 (category Lu: Letter, uppercase)
 'Z': ASCII/Unicode U+005A (category Lu: Letter, uppercase)</code></pre>
</div>
</div>
<ol start="2" type="1">
<li><code>reduce(f, iterable)</code>: apply <code>f</code> to the element of <code>iterable</code> in an iterable way.</li>
</ol>
<div id="5b98c470" class="cell" data-execution_count="249">
<div class="sourceCode cell-code" id="cb462"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb462-1"><a href="#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="fu">reduce</span>(<span class="op">+</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="225">
<pre><code>5050</code></pre>
</div>
</div>
<ol start="3" type="1">
<li><code>filter(predicate, iterable)</code>: return a subset of <code>iterable</code> based on <code>predicate</code>.</li>
</ol>
<p>Note: a <code>predicate</code> is a function that takes an element of <code>iterable</code> and always returns a Boolean value.</p>
<div id="4843b315" class="cell" data-execution_count="250">
<div class="sourceCode cell-code" id="cb464"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb464-1"><a href="#cb464-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(isuppercase, [<span class="ch">'A'</span>, <span class="ch">'b'</span>, <span class="ch">'C'</span>, <span class="ch">'d'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="226">
<pre><code>2-element Vector{Char}:
 'A': ASCII/Unicode U+0041 (category Lu: Letter, uppercase)
 'C': ASCII/Unicode U+0043 (category Lu: Letter, uppercase)</code></pre>
</div>
</div>
</section>
</section>
<section id="io-networking-and-streams" class="level3" data-number="2.11">
<h3 data-number="2.11" class="anchored" data-anchor-id="io-networking-and-streams"><span class="header-section-number">2.11</span> I/O (Networking and Streams)</h3>
<section id="io-types" class="level4" data-number="2.11.1">
<h4 data-number="2.11.1" class="anchored" data-anchor-id="io-types"><span class="header-section-number">2.11.1</span> I/O types</h4>
<p>The Julia I/O system is centered on the abstract type <code>IO</code>, which has several concrete types, such as <code>IOStream</code>, <code>IOBuffer</code>, <code>Process</code> and <code>TCPSocket</code>. Each type allows you to read and write data from different I/O devices, such as files, in-memory buffers, running processes, or network connections.</p>
</section>
<section id="stream-io" class="level4" data-number="2.11.2">
<h4 data-number="2.11.2" class="anchored" data-anchor-id="stream-io"><span class="header-section-number">2.11.2</span> Stream I/O</h4>
<p>All Julia streams expose at least a <code>read()</code> and a <code>write()</code> method, taking the stream as their first argument.</p>
<p>The <code>write()</code> method operates on binary streams, which means that values do not get converted to any canonical text representation but are written out as is.</p>
<p><code>write()</code> takes the data to write as its second argument:</p>
<div id="6f0bc4b6" class="cell" data-execution_count="251">
<div class="sourceCode cell-code" id="cb466"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb466-1"><a href="#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write</span>(<span class="cn">stdout</span>, <span class="st">"Hello World"</span>)  <span class="co"># return 11, the number of bytes written to stdout</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Hello World</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="227">
<pre><code>11</code></pre>
</div>
</div>
<div id="3c234b8c" class="cell" data-execution_count="252">
<div class="sourceCode cell-code" id="cb469"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb469-1"><a href="#cb469-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write</span>(<span class="cn">stdout</span>, <span class="st">"Hello World"</span>);  <span class="co"># supress return value 11 with ;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Hello World</code></pre>
</div>
</div>
<p><code>read()</code> takes the type of data to be read as its second argument:</p>
<div id="71afc5a2" class="cell" data-execution_count="253">
<div class="sourceCode cell-code" id="cb471"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb471-1"><a href="#cb471-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">read</span>(<span class="cn">stdin</span>, <span class="dt">Char</span>)</span>
<span id="cb471-2"><a href="#cb471-2" aria-hidden="true" tabindex="-1"></a>A</span>
<span id="cb471-3"><a href="#cb471-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 'A': ASCII/Unicode U+0041 (category Lu: Letter, uppercase)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To read a simple byte array:</p>
<div id="82ce5df5" class="cell" data-execution_count="254">
<div class="sourceCode cell-code" id="cb472"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb472-1"><a href="#cb472-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> x <span class="op">=</span> <span class="fu">zeros</span>(<span class="dt">UInt8</span>, <span class="fl">6</span>)</span>
<span id="cb472-2"><a href="#cb472-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 6-element Vector{UInt8}:</span></span>
<span id="cb472-3"><a href="#cb472-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x00</span></span>
<span id="cb472-4"><a href="#cb472-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x00</span></span>
<span id="cb472-5"><a href="#cb472-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x00</span></span>
<span id="cb472-6"><a href="#cb472-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x00</span></span>
<span id="cb472-7"><a href="#cb472-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x00</span></span>
<span id="cb472-8"><a href="#cb472-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x00</span></span>
<span id="cb472-9"><a href="#cb472-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-10"><a href="#cb472-10" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">read!</span>(<span class="cn">stdin</span>, x)  <span class="co"># read from stdin and store them in x</span></span>
<span id="cb472-11"><a href="#cb472-11" aria-hidden="true" tabindex="-1"></a>abcdef</span>
<span id="cb472-12"><a href="#cb472-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 6-element Vector{UInt8}:</span></span>
<span id="cb472-13"><a href="#cb472-13" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x61</span></span>
<span id="cb472-14"><a href="#cb472-14" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x62</span></span>
<span id="cb472-15"><a href="#cb472-15" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x63</span></span>
<span id="cb472-16"><a href="#cb472-16" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x64</span></span>
<span id="cb472-17"><a href="#cb472-17" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x65</span></span>
<span id="cb472-18"><a href="#cb472-18" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x66</span></span>
<span id="cb472-19"><a href="#cb472-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-20"><a href="#cb472-20" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> x</span>
<span id="cb472-21"><a href="#cb472-21" aria-hidden="true" tabindex="-1"></a><span class="co"># 6-element Vector{UInt8}:</span></span>
<span id="cb472-22"><a href="#cb472-22" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x61</span></span>
<span id="cb472-23"><a href="#cb472-23" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x62</span></span>
<span id="cb472-24"><a href="#cb472-24" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x63</span></span>
<span id="cb472-25"><a href="#cb472-25" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x64</span></span>
<span id="cb472-26"><a href="#cb472-26" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x65</span></span>
<span id="cb472-27"><a href="#cb472-27" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x66</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The above is equivalent to:</p>
<div id="f10712be" class="cell" data-execution_count="255">
<div class="sourceCode cell-code" id="cb473"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb473-1"><a href="#cb473-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> x <span class="op">=</span> <span class="fu">read</span>(<span class="cn">stdin</span>, <span class="fl">6</span>)</span>
<span id="cb473-2"><a href="#cb473-2" aria-hidden="true" tabindex="-1"></a>abcdef</span>
<span id="cb473-3"><a href="#cb473-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 6-element Vector{UInt8}:</span></span>
<span id="cb473-4"><a href="#cb473-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x61</span></span>
<span id="cb473-5"><a href="#cb473-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x62</span></span>
<span id="cb473-6"><a href="#cb473-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x63</span></span>
<span id="cb473-7"><a href="#cb473-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x64</span></span>
<span id="cb473-8"><a href="#cb473-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x65</span></span>
<span id="cb473-9"><a href="#cb473-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x66</span></span>
<span id="cb473-10"><a href="#cb473-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb473-11"><a href="#cb473-11" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> x</span>
<span id="cb473-12"><a href="#cb473-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 6-element Vector{UInt8}:</span></span>
<span id="cb473-13"><a href="#cb473-13" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x61</span></span>
<span id="cb473-14"><a href="#cb473-14" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x62</span></span>
<span id="cb473-15"><a href="#cb473-15" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x63</span></span>
<span id="cb473-16"><a href="#cb473-16" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x64</span></span>
<span id="cb473-17"><a href="#cb473-17" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x65</span></span>
<span id="cb473-18"><a href="#cb473-18" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x66</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To read the entire line:</p>
<div id="82f4ad31" class="cell" data-execution_count="256">
<div class="sourceCode cell-code" id="cb474"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb474-1"><a href="#cb474-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">readline</span>(<span class="cn">stdin</span>)</span>
<span id="cb474-2"><a href="#cb474-2" aria-hidden="true" tabindex="-1"></a><span class="fl">1234567890</span></span>
<span id="cb474-3"><a href="#cb474-3" aria-hidden="true" tabindex="-1"></a><span class="co"># "1234567890"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To read all lines of an I/O stream or a file as a vector of strings using <code>redalines(io)</code>.</p>
<p>To read every line from <code>stdin</code> you can use <code>eachline(io)</code>:</p>
<div id="c2547a5f" class="cell" data-execution_count="257">
<div class="sourceCode cell-code" id="cb475"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb475-1"><a href="#cb475-1" aria-hidden="true" tabindex="-1"></a><span class="co"># you can use Ctrl + D to terminate the input (play the role of EOF) </span></span>
<span id="cb475-2"><a href="#cb475-2" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="cf">for</span> line <span class="kw">in</span> <span class="fu">eachline</span>(<span class="cn">stdin</span>)</span>
<span id="cb475-3"><a href="#cb475-3" aria-hidden="true" tabindex="-1"></a>           <span class="fu">println</span>(<span class="st">"Found </span><span class="sc">$</span>line<span class="st">"</span>)</span>
<span id="cb475-4"><a href="#cb475-4" aria-hidden="true" tabindex="-1"></a>       <span class="cf">end</span></span>
<span id="cb475-5"><a href="#cb475-5" aria-hidden="true" tabindex="-1"></a><span class="fl">123456</span></span>
<span id="cb475-6"><a href="#cb475-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Found 123456</span></span>
<span id="cb475-7"><a href="#cb475-7" aria-hidden="true" tabindex="-1"></a>abcdef</span>
<span id="cb475-8"><a href="#cb475-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Found abcdef</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Read by character:</p>
<div id="9b56082b" class="cell" data-execution_count="258">
<div class="sourceCode cell-code" id="cb476"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb476-1"><a href="#cb476-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="cf">while</span> !<span class="fu">eof</span>(<span class="cn">stdin</span>)</span>
<span id="cb476-2"><a href="#cb476-2" aria-hidden="true" tabindex="-1"></a>       x <span class="op">=</span> <span class="fu">read</span>(<span class="cn">stdin</span>, <span class="dt">Char</span>)</span>
<span id="cb476-3"><a href="#cb476-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">println</span>(<span class="st">"Found: </span><span class="sc">$</span>x<span class="st">"</span>)</span>
<span id="cb476-4"><a href="#cb476-4" aria-hidden="true" tabindex="-1"></a>       <span class="cf">end</span></span>
<span id="cb476-5"><a href="#cb476-5" aria-hidden="true" tabindex="-1"></a>abcdef</span>
<span id="cb476-6"><a href="#cb476-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Found: a</span></span>
<span id="cb476-7"><a href="#cb476-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Found: b</span></span>
<span id="cb476-8"><a href="#cb476-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Found: c</span></span>
<span id="cb476-9"><a href="#cb476-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Found: d</span></span>
<span id="cb476-10"><a href="#cb476-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Found: e</span></span>
<span id="cb476-11"><a href="#cb476-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Found: f</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="text-io" class="level4" data-number="2.11.3">
<h4 data-number="2.11.3" class="anchored" data-anchor-id="text-io"><span class="header-section-number">2.11.3</span> Text I/O</h4>
<p>For text I/O, using the <code>print()</code> or <code>show()</code> methods, taking the stream as their first argument, which is a mandatory convention.</p>
<p><code>print()</code> is used to write a canonical text representation of a value to the output stream. If a canonical text representation exists for the value, it is printed without any adornments. If no canonical text representation exists, <code>print()</code> calls the <code>show()</code> function to display the value.</p>
<p><code>print()</code> is more about customizing the output for specific messages, while <code>show()</code> is about displaying complex objects in a readable format. The choice between <code>print()</code> and <code>show()</code> depends on the context and the desired output format. For simple text output, <code>print()</code> is often sufficient, but for displaying the structure and content of complex objects, <code>show()</code> is the preferred choice.</p>
<p>For custom pretty-printing of your own types, define <code>show()</code> (which calls <code>print()</code> to customize the output content and style of your own type) instead of <code>print()</code> for it.</p>
<p>Of course, for more pretty-printing, Julia also provides functions such as <code>println()</code> (with trailing newline), <code>printstyled()</code> (support some rich displays, such as colors), etc.</p>
</section>
<section id="io-output-contextual-properties" class="level4" data-number="2.11.4">
<h4 data-number="2.11.4" class="anchored" data-anchor-id="io-output-contextual-properties"><span class="header-section-number">2.11.4</span> I/O output contextual properties</h4>
<p>Sometimes I/O output can benefit from the ability to pass contextual information into show methods. The <code>IOContext</code> object provides this framework for associating arbitrary metadata with an I/O object.</p>
</section>
<section id="working-with-files" class="level4" data-number="2.11.5">
<h4 data-number="2.11.5" class="anchored" data-anchor-id="working-with-files"><span class="header-section-number">2.11.5</span> Working with files</h4>
<div id="27b61cfd" class="cell" data-execution_count="259">
<div class="sourceCode cell-code" id="cb477"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb477-1"><a href="#cb477-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Write content to a file with the write(filename::String, content) method</span></span>
<span id="cb477-2"><a href="#cb477-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Read the contents of a file with the read(filename::String) method, or read(filename::String, String) to the contents as a string</span></span>
<span id="cb477-3"><a href="#cb477-3" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">write</span>(<span class="st">"hello.txt"</span>, <span class="st">"Hello, World!"</span>)  <span class="co"># return the number of bytes written</span></span>
<span id="cb477-4"><a href="#cb477-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 13</span></span>
<span id="cb477-5"><a href="#cb477-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-6"><a href="#cb477-6" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">read</span>(<span class="st">"hello.txt"</span>)  <span class="co"># return bytes</span></span>
<span id="cb477-7"><a href="#cb477-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 13-element Vector{UInt8}:</span></span>
<span id="cb477-8"><a href="#cb477-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x48</span></span>
<span id="cb477-9"><a href="#cb477-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x65</span></span>
<span id="cb477-10"><a href="#cb477-10" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x6c</span></span>
<span id="cb477-11"><a href="#cb477-11" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x6c</span></span>
<span id="cb477-12"><a href="#cb477-12" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x6f</span></span>
<span id="cb477-13"><a href="#cb477-13" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x2c</span></span>
<span id="cb477-14"><a href="#cb477-14" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x20</span></span>
<span id="cb477-15"><a href="#cb477-15" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x57</span></span>
<span id="cb477-16"><a href="#cb477-16" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x6f</span></span>
<span id="cb477-17"><a href="#cb477-17" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x72</span></span>
<span id="cb477-18"><a href="#cb477-18" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x6c</span></span>
<span id="cb477-19"><a href="#cb477-19" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x64</span></span>
<span id="cb477-20"><a href="#cb477-20" aria-hidden="true" tabindex="-1"></a><span class="co">#  0x21</span></span>
<span id="cb477-21"><a href="#cb477-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-22"><a href="#cb477-22" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">read</span>(<span class="st">"hello.txt"</span>, <span class="dt">String</span>)  <span class="co"># return the contents as a string</span></span>
<span id="cb477-23"><a href="#cb477-23" aria-hidden="true" tabindex="-1"></a><span class="co"># "Hello, World!"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Instead of directly passing a string as the file name, you can first open a file with <code>open(filename::AbstractString, [mode::AbstractString]; lock = true) -&gt; IOStream</code>, which returns an <code>IOStream</code> object that you can use to read/write things from/to the file.</p>
<div id="db101f51" class="cell" data-execution_count="260">
<div class="sourceCode cell-code" id="cb478"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb478-1"><a href="#cb478-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> f <span class="op">=</span> <span class="fu">open</span>(<span class="st">"hello.txt"</span>)  <span class="co"># open a file</span></span>
<span id="cb478-2"><a href="#cb478-2" aria-hidden="true" tabindex="-1"></a><span class="co"># IOStream(&lt;file hello.txt&gt;)</span></span>
<span id="cb478-3"><a href="#cb478-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-4"><a href="#cb478-4" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">readlines</span>(f)  <span class="co"># do something (read/write)</span></span>
<span id="cb478-5"><a href="#cb478-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1-element Vector{String}:</span></span>
<span id="cb478-6"><a href="#cb478-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  "Hello, World!"</span></span>
<span id="cb478-7"><a href="#cb478-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-8"><a href="#cb478-8" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">close</span>(f)  <span class="co"># close the file</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Instead of closing the file manually, you can pass a function (accepting the <code>IOStream</code> returned by <code>open()</code> as its first argument) as the first argument of <code>open()</code> method, which will close the file upon completion for you.</p>
<div id="f3437f40" class="cell" data-execution_count="261">
<div class="sourceCode cell-code" id="cb479"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb479-1"><a href="#cb479-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">open</span>(<span class="st">"hello.txt"</span>) <span class="cf">do</span> io</span>
<span id="cb479-2"><a href="#cb479-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">uppercase</span>(<span class="fu">read</span>(io, <span class="dt">String</span>))</span>
<span id="cb479-3"><a href="#cb479-3" aria-hidden="true" tabindex="-1"></a>       <span class="cf">end</span></span>
<span id="cb479-4"><a href="#cb479-4" aria-hidden="true" tabindex="-1"></a><span class="co"># "HELLO, WORLD!"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="working-with-networking" class="level4" data-number="2.11.6">
<h4 data-number="2.11.6" class="anchored" data-anchor-id="working-with-networking"><span class="header-section-number">2.11.6</span> Working with networking</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="./figures/scheme_of_five_network_layers.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="A rough scheme of five network layers"><img src="./figures/scheme_of_five_network_layers.png" class="img-fluid quarto-figure quarto-figure-center figure-img" alt="Click to see a larger version of the image"></a></p>
</figure>
</div>
<figcaption>A rough scheme of five network layers</figcaption>
</figure>
</div>
<section id="tcp-transmission-control-protocol" class="level5" data-number="2.11.6.1">
<h5 data-number="2.11.6.1" class="anchored" data-anchor-id="tcp-transmission-control-protocol"><span class="header-section-number">2.11.6.1</span> TCP (Transmission Control Protocol)</h5>
<p>In a word, TCP provides highly reliable data transmission services with these features: connection-oriented, reliable, flow control, congestion control, error checking, slower than UDP due to providing such features.</p>
<div id="24a81ab2" class="cell" data-execution_count="262">
<div class="sourceCode cell-code" id="cb480"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb480-1"><a href="#cb480-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Sockets</span></span>
<span id="cb480-2"><a href="#cb480-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-3"><a href="#cb480-3" aria-hidden="true" tabindex="-1"></a><span class="co">## server side</span></span>
<span id="cb480-4"><a href="#cb480-4" aria-hidden="true" tabindex="-1"></a><span class="fu">errormonitor</span>(<span class="pp">@async</span> <span class="cf">begin</span></span>
<span id="cb480-5"><a href="#cb480-5" aria-hidden="true" tabindex="-1"></a>        server <span class="op">=</span> <span class="fu">listen</span>(<span class="fl">2000</span>)  <span class="co"># 1. listen on a given port on a specified address; create a server waiting for incoming connections on the specified port 2000 in this case; a TCPServer socket is returned; in computer networking, a socket is a software structure that provides a bidirectional communication channel between two processes, where one process acts as a server and the other as a client</span></span>
<span id="cb480-6"><a href="#cb480-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="cn">true</span></span>
<span id="cb480-7"><a href="#cb480-7" aria-hidden="true" tabindex="-1"></a>            sock <span class="op">=</span> <span class="fu">accept</span>(server)  <span class="co"># 2. retrieve a connection to the client that is trying to connect to the server we just created</span></span>
<span id="cb480-8"><a href="#cb480-8" aria-hidden="true" tabindex="-1"></a>            <span class="pp">@async</span> <span class="cf">while</span> <span class="fu">isopen</span>(sock)  <span class="co"># 3. if connected, do something between the server and the client</span></span>
<span id="cb480-9"><a href="#cb480-9" aria-hidden="true" tabindex="-1"></a>                <span class="fu">write</span>(sock, <span class="fu">string</span>(<span class="st">"The server has received the message from the client: "</span>, <span class="fu">readline</span>(sock, keep <span class="op">=</span> <span class="cn">true</span>)))  <span class="co"># 4. read something from the client and then write something to the client; keep = true means that these trailing newline characters are also returned (instead of removing them from the line before it is returned) as part of the line</span></span>
<span id="cb480-10"><a href="#cb480-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">end</span></span>
<span id="cb480-11"><a href="#cb480-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb480-12"><a href="#cb480-12" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span>)</span>
<span id="cb480-13"><a href="#cb480-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-14"><a href="#cb480-14" aria-hidden="true" tabindex="-1"></a><span class="co">## client side</span></span>
<span id="cb480-15"><a href="#cb480-15" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> <span class="fu">connect</span>(<span class="fl">2000</span>)  <span class="co"># 1. connect to a host on a given port; return a TCPSocket socket</span></span>
<span id="cb480-16"><a href="#cb480-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-17"><a href="#cb480-17" aria-hidden="true" tabindex="-1"></a><span class="fu">errormonitor</span>(<span class="pp">@async</span> <span class="cf">while</span> <span class="fu">isopen</span>(client)  <span class="co"># 2. if connected, do something</span></span>
<span id="cb480-18"><a href="#cb480-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">write</span>(<span class="cn">stdout</span>, <span class="fu">readline</span>(client, keep <span class="op">=</span> <span class="cn">true</span>))  <span class="co"># 3. read something from the server and then print them to the termimal (stdout)</span></span>
<span id="cb480-19"><a href="#cb480-19" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span>)</span>
<span id="cb480-20"><a href="#cb480-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-21"><a href="#cb480-21" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(client, <span class="st">"Hello world from the client"</span>)  <span class="co"># 3. write something to the server</span></span>
<span id="cb480-22"><a href="#cb480-22" aria-hidden="true" tabindex="-1"></a><span class="co"># The server has received the message from the client: Hello world from the client</span></span>
<span id="cb480-23"><a href="#cb480-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-24"><a href="#cb480-24" aria-hidden="true" tabindex="-1"></a><span class="co">## finally, use close() to disconnect the socket</span></span>
<span id="cb480-25"><a href="#cb480-25" aria-hidden="true" tabindex="-1"></a><span class="fu">close</span>(client)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Note:</strong> some details about <code>listen()</code> and <code>connect()</code>:</p>
<div id="81008156" class="cell" data-execution_count="263">
<div class="sourceCode cell-code" id="cb481"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb481-1"><a href="#cb481-1" aria-hidden="true" tabindex="-1"></a><span class="co">## 1. connect([host], port::Integer) -&gt; TCPSocket  #  Connect to the host `host` on port `port` (TCPServer)</span></span>
<span id="cb481-2"><a href="#cb481-2" aria-hidden="true" tabindex="-1"></a><span class="fu">listen</span>(<span class="fl">2000</span>)  <span class="co"># listen on localhost:2000 (IPv4)</span></span>
<span id="cb481-3"><a href="#cb481-3" aria-hidden="true" tabindex="-1"></a><span class="fu">listen</span>(ip<span class="st">"127.0.0.1"</span>, <span class="fl">2000</span>)  <span class="co"># equivalent to the above (IPv4)</span></span>
<span id="cb481-4"><a href="#cb481-4" aria-hidden="true" tabindex="-1"></a><span class="fu">listen</span>(ip<span class="st">"::1"</span>, <span class="fl">2000</span>)  <span class="co"># equivalent to the above (IPv6)</span></span>
<span id="cb481-5"><a href="#cb481-5" aria-hidden="true" tabindex="-1"></a><span class="fu">listen</span>(<span class="fu">IPv4</span>(<span class="fl">0</span>), <span class="fl">2000</span>)  <span class="co"># listen on port 2000 on all IPv4 interfaces</span></span>
<span id="cb481-6"><a href="#cb481-6" aria-hidden="true" tabindex="-1"></a><span class="fu">listen</span>(<span class="fu">IPv6</span>(<span class="fl">0</span>), <span class="fl">2000</span>)  <span class="co"># listen on port 2000 on all IPv6 interfaces</span></span>
<span id="cb481-7"><a href="#cb481-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb481-8"><a href="#cb481-8" aria-hidden="true" tabindex="-1"></a><span class="co">## 2. connect(path::AbstractString) -&gt; PipeEndpoint  # connect to the named pipe (Windows) / UNIX domain socket at `path` (PipeServer)</span></span>
<span id="cb481-9"><a href="#cb481-9" aria-hidden="true" tabindex="-1"></a><span class="fu">listen</span>(<span class="st">"testsocket"</span>)  <span class="co"># listen on a UNIX domain socket</span></span>
<span id="cb481-10"><a href="#cb481-10" aria-hidden="true" tabindex="-1"></a><span class="fu">listen</span>(<span class="st">"</span><span class="sc">\\\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">pipe</span><span class="sc">\\</span><span class="st">testsocket"</span>)  <span class="co"># listen on a Windows named pipe (\\.\pipe\)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The difference between TCP and named pipes or UNIX domain sockets is subtle and has to do with the <code>accept()</code> and <code>connect()</code> methods:</p>
<div id="390c866b" class="cell" data-execution_count="264">
<div class="sourceCode cell-code" id="cb482"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb482-1"><a href="#cb482-1" aria-hidden="true" tabindex="-1"></a><span class="fu">accept</span>(server[, client])  <span class="co"># Accepts a connection on the given server and returns a connection to the client. An uninitialized client stream may be provided, in which case it will be used instead of creating a new stream.</span></span>
<span id="cb482-2"><a href="#cb482-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-3"><a href="#cb482-3" aria-hidden="true" tabindex="-1"></a><span class="fu">connect</span>([host], port<span class="op">::</span><span class="dt">Integer</span>) <span class="op">-&gt;</span> <span class="dt">TCPSocket</span>  <span class="co"># Connect to the host `host` on port `port`.</span></span>
<span id="cb482-4"><a href="#cb482-4" aria-hidden="true" tabindex="-1"></a><span class="fu">connect</span>(path<span class="op">::</span><span class="dt">AbstractString</span>) <span class="op">-&gt;</span> PipeEndpoint  <span class="co"># Connect to the named pipe / UNIX domain socket at path.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Resolving IP addresses:</strong></p>
<div id="510a1869" class="cell" data-execution_count="265">
<div class="sourceCode cell-code" id="cb483"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb483-1"><a href="#cb483-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">getaddrinfo</span>(<span class="st">"google.com"</span>)</span>
<span id="cb483-2"><a href="#cb483-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ip"59.24.3.174"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="udp-user-datagram-protocol" class="level5" data-number="2.11.6.2">
<h5 data-number="2.11.6.2" class="anchored" data-anchor-id="udp-user-datagram-protocol"><span class="header-section-number">2.11.6.2</span> UDP (User Datagram Protocol)</h5>
<p>UDP provides no such features as provided by TCP.</p>
<p>A common use for UDP is in multicast applications.</p>
<div id="156db65f" class="cell" data-execution_count="266">
<div class="sourceCode cell-code" id="cb484"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb484-1"><a href="#cb484-1" aria-hidden="true" tabindex="-1"></a><span class="co">## receiver</span></span>
<span id="cb484-2"><a href="#cb484-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Sockets</span></span>
<span id="cb484-3"><a href="#cb484-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb484-4"><a href="#cb484-4" aria-hidden="true" tabindex="-1"></a>group <span class="op">=</span> ip<span class="st">"226.6.8.8"</span>  <span class="co"># Choose a valid IP address for multicast: for IPv4, the multicast address range is from 224.0.0.0 to 239.255.255.255. Any address within this range is designated for multicast use. For IPv6, the multicast range begins with ff, such as ff05::5:6:7.</span></span>
<span id="cb484-5"><a href="#cb484-5" aria-hidden="true" tabindex="-1"></a>socket <span class="op">=</span> <span class="fu">UDPSocket</span>()  <span class="co"># Open a UDP socket.</span></span>
<span id="cb484-6"><a href="#cb484-6" aria-hidden="true" tabindex="-1"></a><span class="fu">bind</span>(socket, ip<span class="st">"0.0.0.0"</span>, <span class="fl">6688</span>)  <span class="co"># Bind socket to the given host:port. Note that 0.0.0.0 (IPv4) / :: (IPv6) will listen on all devices (listen on all available network interfaces and all IPv4 / IPv6 addresses associated with the host machine. When binding to a port, make sure that the port number is not in use by another application and that it's not a well-known or registered port that has a specific protocol associated with it.</span></span>
<span id="cb484-7"><a href="#cb484-7" aria-hidden="true" tabindex="-1"></a><span class="fu">join_multicast_group</span>(socket, group)  <span class="co"># Join a socket to a particular multicast group.</span></span>
<span id="cb484-8"><a href="#cb484-8" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="fu">String</span>(<span class="fu">recv</span>(socket)))  <span class="co"># For recv():  read a UDP packet from the specified socket, and return the bytes received. This call blocks.</span></span>
<span id="cb484-9"><a href="#cb484-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Hello over IPv4</span></span>
<span id="cb484-10"><a href="#cb484-10" aria-hidden="true" tabindex="-1"></a><span class="fu">leave_multicast_group</span>(socket, group)  <span class="co">#  Remove a socket from a particular multicast group.</span></span>
<span id="cb484-11"><a href="#cb484-11" aria-hidden="true" tabindex="-1"></a><span class="fu">close</span>(socket)  <span class="co"># Close the socket.</span></span>
<span id="cb484-12"><a href="#cb484-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb484-13"><a href="#cb484-13" aria-hidden="true" tabindex="-1"></a><span class="co">## sender</span></span>
<span id="cb484-14"><a href="#cb484-14" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Sockets</span></span>
<span id="cb484-15"><a href="#cb484-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb484-16"><a href="#cb484-16" aria-hidden="true" tabindex="-1"></a>group <span class="op">=</span> ip<span class="st">"226.6.8.8"</span></span>
<span id="cb484-17"><a href="#cb484-17" aria-hidden="true" tabindex="-1"></a>socket <span class="op">=</span> <span class="fu">UDPSocket</span>()</span>
<span id="cb484-18"><a href="#cb484-18" aria-hidden="true" tabindex="-1"></a><span class="fu">send</span>(socket, group, <span class="fl">6688</span>, <span class="st">"Hello over IPv4"</span>)  <span class="co">#  Send msg over socket to host:port. It is not necessary for a sender to join the multicast group.</span></span>
<span id="cb484-19"><a href="#cb484-19" aria-hidden="true" tabindex="-1"></a><span class="fu">close</span>(socket)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="parametric-types" class="level3" data-number="2.12">
<h3 data-number="2.12" class="anchored" data-anchor-id="parametric-types"><span class="header-section-number">2.12</span> Parametric types</h3>
<p>You can think of the expression <code>S=P{T}</code> as <strong>parametric type <code>P</code></strong> taking a <strong>type parameter <code>T</code></strong> and returning a new <strong>concrete type <code>S</code></strong>. Both <code>T</code> and <code>S</code> are concrete types, while <code>P</code> is just a template for making types.</p>
<section id="defining-parametric-methods" class="level4" data-number="2.12.1">
<h4 data-number="2.12.1" class="anchored" data-anchor-id="defining-parametric-methods"><span class="header-section-number">2.12.1</span> Defining parametric methods</h4>
<div id="6c2cbe8e" class="cell" data-execution_count="267">
<div class="sourceCode cell-code" id="cb485"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb485-1"><a href="#cb485-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">linearsearch</span>(haystack<span class="op">::</span><span class="dt">AbstractVector{T}</span>, needle<span class="op">::</span><span class="dt">T</span>) <span class="kw">where</span> T</span>
<span id="cb485-2"><a href="#cb485-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i, x) <span class="kw">in</span> <span class="fu">enumerate</span>(haystack)</span>
<span id="cb485-3"><a href="#cb485-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> needle <span class="op">==</span> x</span>
<span id="cb485-4"><a href="#cb485-4" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i</span>
<span id="cb485-5"><a href="#cb485-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb485-6"><a href="#cb485-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb485-7"><a href="#cb485-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb485-8"><a href="#cb485-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb485-9"><a href="#cb485-9" aria-hidden="true" tabindex="-1"></a><span class="fu">linearsearch</span>([<span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">8</span>], <span class="fl">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="229">
<pre><code>3</code></pre>
</div>
</div>
<div id="f3a111f8" class="cell" data-execution_count="268">
<div class="sourceCode cell-code" id="cb487"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb487-1"><a href="#cb487-1" aria-hidden="true" tabindex="-1"></a><span class="fu">linearsearch</span>([<span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">8</span>], <span class="st">"six"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>MethodError: no method matching linearsearch(::Vector{Int64}, ::String)

Closest candidates are:
  linearsearch(::AbstractVector{T}, <span class="ansi-bright-red-fg">::T</span>) where T
<span class="ansi-bright-black-fg">   @</span> <span class="ansi-magenta-fg">Main</span> <span style="text-decoration:underline" class="ansi-bright-black-fg">In[229]:1</span>


Stacktrace:
 [1] top-level scope
   @ In[230]:2</pre>
</div>
</div>
</div>
<p>In this example, the <code>linearsearch()</code> is a parametric method, which takes a type parameter <code>T</code>, defined in the <code>where T</code> clause. You can define more than one type parameter in the <code>where</code> clause (e.g.&nbsp;<code>where {T, S}</code>).</p>
</section>
<section id="defining-parametric-types" class="level4" data-number="2.12.2">
<h4 data-number="2.12.2" class="anchored" data-anchor-id="defining-parametric-types"><span class="header-section-number">2.12.2</span> Defining parametric types</h4>
<div id="e14da8e4" class="cell" data-execution_count="269">
<div class="sourceCode cell-code" id="cb488"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb488-1"><a href="#cb488-1" aria-hidden="true" tabindex="-1"></a><span class="st">"A point at coordinate (x, y)"</span></span>
<span id="cb488-2"><a href="#cb488-2" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point{T}</span>
<span id="cb488-3"><a href="#cb488-3" aria-hidden="true" tabindex="-1"></a>    x<span class="op">::</span><span class="dt">T</span></span>
<span id="cb488-4"><a href="#cb488-4" aria-hidden="true" tabindex="-1"></a>    y<span class="op">::</span><span class="dt">T</span></span>
<span id="cb488-5"><a href="#cb488-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="231">
<pre><code>Point</code></pre>
</div>
</div>
<p>You can impose constraints on the type parameter <code>T</code> with subtype operator <code>&lt;:</code>:</p>
<div id="87ed177e" class="cell" data-execution_count="270">
<div class="sourceCode cell-code" id="cb490"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb490-1"><a href="#cb490-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> RPoint{T<span class="op">&lt;:</span><span class="dt">Number</span>}</span>
<span id="cb490-2"><a href="#cb490-2" aria-hidden="true" tabindex="-1"></a>    x<span class="op">::</span><span class="dt">T</span></span>
<span id="cb490-3"><a href="#cb490-3" aria-hidden="true" tabindex="-1"></a>    y<span class="op">::</span><span class="dt">T</span></span>
<span id="cb490-4"><a href="#cb490-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When creating a point with <code>Point</code>, you can let Julia to infer the type parameter from arguments or explicitly set the type parameter:</p>
<div id="f05a2433" class="cell" data-execution_count="271">
<div class="sourceCode cell-code" id="cb491"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb491-1"><a href="#cb491-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Point</span>(<span class="fl">1</span>, <span class="fl">2</span>), <span class="fu">Point</span><span class="dt">{Int}</span>(<span class="fl">3</span>, <span class="fl">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="233">
<pre><code>(Point{Int64}(1, 2), Point{Int64}(3, 4))</code></pre>
</div>
</div>
<p>In fact, <code>sum(xs::Vector)</code> is the same as <code>sum(xs::Vector{T}) where T</code>.</p>
<p>In summary, parametric types can improve the <strong>type safety</strong> (stricter type checking), <strong>performance</strong> (more type restrictions, less type-related jobs), and <strong>memory usage</strong> (more type restrictions, more precise assignment of memory).</p>
</section>
</section>
<section id="scope-of-variables" class="level3" data-number="2.13">
<h3 data-number="2.13" class="anchored" data-anchor-id="scope-of-variables"><span class="header-section-number">2.13</span> Scope of variables</h3>
<section id="introduction" class="level4" data-number="2.13.1">
<h4 data-number="2.13.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">2.13.1</span> Introduction</h4>
<p>The scope of a variable is the region of code within which a variable is accessible. Variable scoping helps avoid variable naming conflicts.</p>
<p>There are two main types of scopes in programming languages: <strong>lexical scope</strong> (also called static scope) and <strong>dynamic scope</strong>.</p>
<p>In languages with <strong>lexical scope</strong>, the name resolution depends on the location in the source code and the lexical context, where the named variable is defined. In contrast, in languages with <strong>dynamic scope</strong>, the name resolution depends on the program state and the runtime context when the name is encountered.</p>
<p>In a word, with <strong>lexical scope</strong> a name is resolved by searching the local lexical context, then if that fails, by searching the outer lexical context, and so on; with <strong>dynamic scope</strong>, a name is resolved by searching the local execution context, then if that fails, by searching the outer execution context, and so on, progressing up the call stack.</p>
<p>Julia uses lexical scope. Further, there are two main types of scopes in Julia, <strong>global scope</strong> and <strong>local scope</strong>. The latter can be nested.</p>
<p>In Julia, different constructs may introduce different types of scopes.</p>
</section>
<section id="scope-constructs" class="level4" data-number="2.13.2">
<h4 data-number="2.13.2" class="anchored" data-anchor-id="scope-constructs"><span class="header-section-number">2.13.2</span> Scope constructs</h4>
<p>The constructs introducing scopes are:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Construct</th>
<th>Scope type</th>
<th>Allowed within</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>module, baremodule</td>
<td>global</td>
<td>global</td>
</tr>
<tr class="even">
<td>struct</td>
<td>soft local</td>
<td>global</td>
</tr>
<tr class="odd">
<td>for, while, try</td>
<td>soft local</td>
<td>global, local</td>
</tr>
<tr class="even">
<td>macro</td>
<td>hard local</td>
<td>global</td>
</tr>
<tr class="odd">
<td>functions, do blocks, let blocks, comprehensions, generators</td>
<td>hard local</td>
<td>global, local</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> <strong>begin blocks</strong> and <strong>if blocks</strong> do not introduce scopes.</p>
</section>
<section id="global-scope" class="level4" data-number="2.13.3">
<h4 data-number="2.13.3" class="anchored" data-anchor-id="global-scope"><span class="header-section-number">2.13.3</span> Global scope</h4>
<p>Each module introduces a global scope.</p>
<p>Modules can introduce variables of other modules into their scopes through the <code>using</code> or <code>import</code> statement, or through qualified access using the dot notation.</p>
<div id="80905cc0" class="cell" data-execution_count="272">
<div class="sourceCode cell-code" id="cb493"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb493-1"><a href="#cb493-1" aria-hidden="true" tabindex="-1"></a><span class="kw">module</span> A</span>
<span id="cb493-2"><a href="#cb493-2" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="fl">1</span>  <span class="co"># a is a global variable in A's scope</span></span>
<span id="cb493-3"><a href="#cb493-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb493-4"><a href="#cb493-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb493-5"><a href="#cb493-5" aria-hidden="true" tabindex="-1"></a><span class="kw">module</span> B</span>
<span id="cb493-6"><a href="#cb493-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">module</span> C</span>
<span id="cb493-7"><a href="#cb493-7" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fl">2</span></span>
<span id="cb493-8"><a href="#cb493-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb493-9"><a href="#cb493-9" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> C.c  <span class="co"># can access the namespace of a nested global scope through a qualified access</span></span>
<span id="cb493-10"><a href="#cb493-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb493-11"><a href="#cb493-11" aria-hidden="true" tabindex="-1"></a>    <span class="im">import</span> <span class="bu">..A</span>  <span class="co"># makes module A available</span></span>
<span id="cb493-12"><a href="#cb493-12" aria-hidden="true" tabindex="-1"></a>    d <span class="op">=</span> A.a</span>
<span id="cb493-13"><a href="#cb493-13" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If a top-level expression (e.g.&nbsp;a <code>begin</code> or <code>if</code> block) contains a variable declared with keyword <code>local</code>, then that variable is not accessible outside that expression.</p>
<div id="c03fbc85" class="cell" data-execution_count="273">
<div class="sourceCode cell-code" id="cb494"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb494-1"><a href="#cb494-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fl">1</span></span>
<span id="cb494-2"><a href="#cb494-2" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb494-3"><a href="#cb494-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> x <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb494-4"><a href="#cb494-4" aria-hidden="true" tabindex="-1"></a>    <span class="pp">@show</span> x</span>
<span id="cb494-5"><a href="#cb494-5" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb494-6"><a href="#cb494-6" aria-hidden="true" tabindex="-1"></a><span class="pp">@show</span> x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>x = 0
x = 1</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="234">
<pre><code>1</code></pre>
</div>
</div>
<p><strong>Note:</strong> the REPL is in the global scope of the module <code>Main</code>.</p>
</section>
<section id="local-scope" class="level4" data-number="2.13.4">
<h4 data-number="2.13.4" class="anchored" data-anchor-id="local-scope"><span class="header-section-number">2.13.4</span> Local scope</h4>
<p>A local scope nested inside another local/global scope can see variables in all the outer scopes in which it is contained. Outer scopes, on the other hand, cannot see variables in inner scopes.</p>
<p>When <code>x = &lt;value&gt;</code> occurs in a local scope, Julia will apply the following rules to decide what the expression means:</p>
<ol type="1">
<li><p><strong>Existing local</strong>: if <code>x</code> is already a local variable, then the existing local <code>x</code> is assigned.</p></li>
<li><p><strong>Hard scope</strong>: if x is not already a local variable and this assignment occurs inside of any hard scope construct, then a new local variable named <code>x</code> is created in the scope of the assignment.</p></li>
<li><p><strong>Soft scope</strong>: if x is not already a local variable and all of the scope constructs containing the assignment are soft scopes, the behavior depends on whether the global variable <code>x</code> is defined:</p>
<ul>
<li><p>If global <code>x</code> is undefined, a new local variable named <code>x</code> is created in the scope of the assignment;</p></li>
<li><p>If global <code>x</code> is defined, then the following rules are applied:</p>
<ul>
<li><p>In interactive mode, the global variable <code>x</code> is assigned;</p></li>
<li><p>In non-interactive mode, an ambiguity warning is printed and a new local variable named <code>x</code> is created in the scope of the assignment.</p></li>
</ul></li>
</ul></li>
</ol>
<p>Therefore, in non-interactive mode, the soft scope and hard scope behaves identically except that a warning is printed when an implicitly local variable shadows a global variable in the soft scope.</p>
<p><strong>Note:</strong> in Julia, a variable cannot be a non-local variable, meaning that it is either a local variable or a global variable, <strong>which is determined regardless of the order of expressions</strong>. As a consequence, if you assign to an existing local, it always updates that existing local; therefore, you can only shadow a local by explicitly declaring a new local in a nested scope with the <code>local</code> keyword.</p>
<div id="86f30a64" class="cell" data-execution_count="274">
<div class="sourceCode cell-code" id="cb497"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb497-1"><a href="#cb497-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">outer_foo</span>()</span>
<span id="cb497-2"><a href="#cb497-2" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="fl">99</span>  <span class="co"># x is a local variable in the outer_foo's scope</span></span>
<span id="cb497-3"><a href="#cb497-3" aria-hidden="true" tabindex="-1"></a>    <span class="pp">@show</span> x</span>
<span id="cb497-4"><a href="#cb497-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span></span>
<span id="cb497-5"><a href="#cb497-5" aria-hidden="true" tabindex="-1"></a>        x <span class="op">=</span> <span class="fl">100</span>  <span class="co"># updates the local variable x defined in the outer_foo's scope</span></span>
<span id="cb497-6"><a href="#cb497-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb497-7"><a href="#cb497-7" aria-hidden="true" tabindex="-1"></a>    <span class="pp">@show</span> x</span>
<span id="cb497-8"><a href="#cb497-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="cn">nothing</span></span>
<span id="cb497-9"><a href="#cb497-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="235">
<pre><code>outer_foo (generic function with 1 method)</code></pre>
</div>
</div>
<div id="e42109f6" class="cell" data-execution_count="275">
<div class="sourceCode cell-code" id="cb499"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb499-1"><a href="#cb499-1" aria-hidden="true" tabindex="-1"></a>code <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb499-2"><a href="#cb499-2" aria-hidden="true" tabindex="-1"></a><span class="st">s = 0 # global</span></span>
<span id="cb499-3"><a href="#cb499-3" aria-hidden="true" tabindex="-1"></a><span class="st">for i = 1:10</span></span>
<span id="cb499-4"><a href="#cb499-4" aria-hidden="true" tabindex="-1"></a><span class="st">    t = s + i # new local t</span></span>
<span id="cb499-5"><a href="#cb499-5" aria-hidden="true" tabindex="-1"></a><span class="st">    s = t # new local s with warning</span></span>
<span id="cb499-6"><a href="#cb499-6" aria-hidden="true" tabindex="-1"></a><span class="st">end</span></span>
<span id="cb499-7"><a href="#cb499-7" aria-hidden="true" tabindex="-1"></a><span class="st">s # global; should be 0</span></span>
<span id="cb499-8"><a href="#cb499-8" aria-hidden="true" tabindex="-1"></a><span class="st">@isdefined(t) # t is local, not global; should be false</span></span>
<span id="cb499-9"><a href="#cb499-9" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb499-10"><a href="#cb499-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb499-11"><a href="#cb499-11" aria-hidden="true" tabindex="-1"></a><span class="fu">include_string</span>(<span class="bu">Main</span>, code)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: LoadError: UndefVarError: `s` not defined
in expression starting at string:2
LoadError: UndefVarError: `s` not defined
in expression starting at string:2

Stacktrace:
 [1] top-level scope
   @ ./string:3
 [2] eval
   @ ./boot.jl:385 [inlined]
 [3] include_string(mapexpr::typeof(identity), mod::Module, code::String, filename::String)
   @ Base ./loading.jl:2139
 [4] include_string
   @ ./loading.jl:2149 [inlined]
 [5] include_string(m::Module, txt::String)
   @ Base ./loading.jl:2149
 [6] top-level scope
   @ In[236]:12</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>So don’t forget to use the <code>global</code> keyword to declare a variable <code>x</code> if you want to use a global <code>x</code> instead of a local <code>x</code> in seeing a <code>for</code> loop in non-interactive mode:</p>
<div id="34c46545" class="cell" data-execution_count="276">
<div class="sourceCode cell-code" id="cb501"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb501-1"><a href="#cb501-1" aria-hidden="true" tabindex="-1"></a>code <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb501-2"><a href="#cb501-2" aria-hidden="true" tabindex="-1"></a><span class="st">s = 0</span></span>
<span id="cb501-3"><a href="#cb501-3" aria-hidden="true" tabindex="-1"></a><span class="st">for i in 1:100</span></span>
<span id="cb501-4"><a href="#cb501-4" aria-hidden="true" tabindex="-1"></a><span class="st">    global s = s + i</span></span>
<span id="cb501-5"><a href="#cb501-5" aria-hidden="true" tabindex="-1"></a><span class="st">end</span></span>
<span id="cb501-6"><a href="#cb501-6" aria-hidden="true" tabindex="-1"></a><span class="st">@show s</span></span>
<span id="cb501-7"><a href="#cb501-7" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb501-8"><a href="#cb501-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb501-9"><a href="#cb501-9" aria-hidden="true" tabindex="-1"></a><span class="fu">include_string</span>(<span class="bu">Main</span>, code)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>s = 5050</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="237">
<pre><code>5050</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="let-blocks" class="level4" data-number="2.13.5">
<h4 data-number="2.13.5" class="anchored" data-anchor-id="let-blocks"><span class="header-section-number">2.13.5</span> <code>let</code> blocks</h4>
<p><code>let</code> blocks create a new hard local scope and <strong>introduce new variable bindings each time they run</strong>. The variable need not be immediately assigned. The value evaluated from the last expression is returned.</p>
<div id="068a5657" class="cell" data-execution_count="277">
<div class="sourceCode cell-code" id="cb504"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb504-1"><a href="#cb504-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> x  <span class="co"># x need not be immediately assigned</span></span>
<span id="cb504-2"><a href="#cb504-2" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="fl">1</span></span>
<span id="cb504-3"><a href="#cb504-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="238">
<pre><code>1</code></pre>
</div>
</div>
<p>The <code>let</code> syntax accepts a comma-separated series of assignments and variable names.</p>
<div id="d5bbe892" class="cell" data-execution_count="278">
<div class="sourceCode cell-code" id="cb506"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb506-1"><a href="#cb506-1" aria-hidden="true" tabindex="-1"></a>x, y <span class="op">=</span> <span class="fl">1</span>, <span class="fl">2</span></span>
<span id="cb506-2"><a href="#cb506-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb506-3"><a href="#cb506-3" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> x <span class="op">=</span> x, y <span class="op">=</span> <span class="fl">20</span></span>
<span id="cb506-4"><a href="#cb506-4" aria-hidden="true" tabindex="-1"></a>    <span class="pp">@show</span> x, y</span>
<span id="cb506-5"><a href="#cb506-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(x, y) = (1, 20)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="239">
<pre><code>(1, 20)</code></pre>
</div>
</div>
<p><strong>Note:</strong> in the above example, <code>x = x</code> is possible, since the assignment is evaluated from the right to the left. <code>x</code> in the right-hand side is global; <code>x</code> in the left-hand side is local.</p>
</section>
<section id="loops" class="level4" data-number="2.13.6">
<h4 data-number="2.13.6" class="anchored" data-anchor-id="loops"><span class="header-section-number">2.13.6</span> Loops</h4>
<p>A <code>for</code> loop iteration variable is always a new local variable; otherwise you declare it using the <code>outer</code> keyword.</p>
<div id="75676039" class="cell" data-execution_count="279">
<div class="sourceCode cell-code" id="cb509"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb509-1"><a href="#cb509-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">for_f1</span>()</span>
<span id="cb509-2"><a href="#cb509-2" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb509-3"><a href="#cb509-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>  <span class="co"># i is local</span></span>
<span id="cb509-4"><a href="#cb509-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb509-5"><a href="#cb509-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i</span>
<span id="cb509-6"><a href="#cb509-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb509-7"><a href="#cb509-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb509-8"><a href="#cb509-8" aria-hidden="true" tabindex="-1"></a><span class="fu">for_f1</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="240">
<pre><code>0</code></pre>
</div>
</div>
<div id="d6db7c3d" class="cell" data-execution_count="280">
<div class="sourceCode cell-code" id="cb511"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb511-1"><a href="#cb511-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">for_f2</span>()</span>
<span id="cb511-2"><a href="#cb511-2" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb511-3"><a href="#cb511-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> outer i <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>  <span class="co"># i is global</span></span>
<span id="cb511-4"><a href="#cb511-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb511-5"><a href="#cb511-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> i</span>
<span id="cb511-6"><a href="#cb511-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb511-7"><a href="#cb511-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb511-8"><a href="#cb511-8" aria-hidden="true" tabindex="-1"></a><span class="fu">for_f2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="241">
<pre><code>3</code></pre>
</div>
</div>
<p>A noteworthy fact is that you must declare <code>i</code> using the <code>global</code> keyword in the following code or an error will be raised when you run it in non-interactive mode:</p>
<div id="9e13045f" class="cell" data-execution_count="281">
<div class="sourceCode cell-code" id="cb513"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb513-1"><a href="#cb513-1" aria-hidden="true" tabindex="-1"></a>code <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb513-2"><a href="#cb513-2" aria-hidden="true" tabindex="-1"></a><span class="st">    i = 10</span></span>
<span id="cb513-3"><a href="#cb513-3" aria-hidden="true" tabindex="-1"></a><span class="st">    while i &lt;= 12</span></span>
<span id="cb513-4"><a href="#cb513-4" aria-hidden="true" tabindex="-1"></a><span class="st">        i = i + 1  # i is regarded as a local instead of a global since this is determined regardless of the order of expressions</span></span>
<span id="cb513-5"><a href="#cb513-5" aria-hidden="true" tabindex="-1"></a><span class="st">        @show i</span></span>
<span id="cb513-6"><a href="#cb513-6" aria-hidden="true" tabindex="-1"></a><span class="st">    end</span></span>
<span id="cb513-7"><a href="#cb513-7" aria-hidden="true" tabindex="-1"></a><span class="st">    @show i</span></span>
<span id="cb513-8"><a href="#cb513-8" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb513-9"><a href="#cb513-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb513-10"><a href="#cb513-10" aria-hidden="true" tabindex="-1"></a><span class="fu">include_string</span>(<span class="bu">Main</span>, code)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: LoadError: UndefVarError: `i` not defined
in expression starting at string:2
LoadError: UndefVarError: `i` not defined
in expression starting at string:2

Stacktrace:
 [1] top-level scope
   @ ./string:3
 [2] eval
   @ ./boot.jl:385 [inlined]
 [3] include_string(mapexpr::typeof(identity), mod::Module, code::String, filename::String)
   @ Base ./loading.jl:2139
 [4] include_string
   @ ./loading.jl:2149 [inlined]
 [5] include_string(m::Module, txt::String)
   @ Base ./loading.jl:2149
 [6] top-level scope
   @ In[242]:11</code></pre>
</div>
</div>
<div id="ba73ea6e" class="cell" data-execution_count="282">
<div class="sourceCode cell-code" id="cb515"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb515-1"><a href="#cb515-1" aria-hidden="true" tabindex="-1"></a>code <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb515-2"><a href="#cb515-2" aria-hidden="true" tabindex="-1"></a><span class="st">    i = 10</span></span>
<span id="cb515-3"><a href="#cb515-3" aria-hidden="true" tabindex="-1"></a><span class="st">    while i &lt;= 12</span></span>
<span id="cb515-4"><a href="#cb515-4" aria-hidden="true" tabindex="-1"></a><span class="st">        global i = i + 1  # i is global</span></span>
<span id="cb515-5"><a href="#cb515-5" aria-hidden="true" tabindex="-1"></a><span class="st">        @show i</span></span>
<span id="cb515-6"><a href="#cb515-6" aria-hidden="true" tabindex="-1"></a><span class="st">    end</span></span>
<span id="cb515-7"><a href="#cb515-7" aria-hidden="true" tabindex="-1"></a><span class="st">    @show i</span></span>
<span id="cb515-8"><a href="#cb515-8" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb515-9"><a href="#cb515-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb515-10"><a href="#cb515-10" aria-hidden="true" tabindex="-1"></a><span class="fu">include_string</span>(<span class="bu">Main</span>, code)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>i = 11
i = 12
i = 13
i = 13</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="243">
<pre><code>13</code></pre>
</div>
</div>
</section>
<section id="constants" class="level4" data-number="2.13.7">
<h4 data-number="2.13.7" class="anchored" data-anchor-id="constants"><span class="header-section-number">2.13.7</span> Constants</h4>
<p>The <code>const</code> declaration should only be used in global scope on globals. It is difficult for the compiler to optimize code involving global variables, since their values (or even their types) might change at almost any time. If a global variable will not change, adding a <code>const</code> declaration solves this performance problem.</p>
<p>Local constants are quite different. The compiler is able to determine automatically when a local variable is constant, so local constant declarations are not necessary, and in fact are currently not supported.</p>
</section>
<section id="typed-globals" class="level4" data-number="2.13.8">
<h4 data-number="2.13.8" class="anchored" data-anchor-id="typed-globals"><span class="header-section-number">2.13.8</span> Typed globals</h4>
<p>A global can be declared to always be of a constant type by using the syntax <code>global x::T</code> or upon assignment as <code>x::T = 123</code>.</p>
<p>Once a global is declared to be of a constant type, it cannot be assigned to values which cannot be converted to the specified type. In addition, a global has either been assigned to or its type has been set, the binding type is not allowed to change.</p>
</section>
</section>
<section id="parallel-computing" class="level3" data-number="2.14">
<h3 data-number="2.14" class="anchored" data-anchor-id="parallel-computing"><span class="header-section-number">2.14</span> Parallel computing</h3>
<section id="asynchronous-tasks" class="level4" data-number="2.14.1">
<h4 data-number="2.14.1" class="anchored" data-anchor-id="asynchronous-tasks"><span class="header-section-number">2.14.1</span> Asynchronous tasks</h4>
<p>A task has a create-start-run-finish lifecycle, allowing suspending and resuming computations.</p>
<ol type="1">
<li><strong>Create</strong> a task by calling the <code>Task</code> constructor on a <strong>0-argument</strong> function or using the <code>@task</code> macro: <code>Task(() -&gt; x)</code> is equivalent to <code>@task x</code>.</li>
<li><strong>Start</strong> a task by calling <code>schedule(x)</code> (i.e., add it to an internal queue of tasks).</li>
</ol>
<p><strong>Note:</strong> for convenience, you can use <code>@async x</code> to create and start a task at once (equivalent to <code>schedule(@task x)</code>).</p>
<ol start="3" type="1">
<li>You can then call <code>wait(x)</code> to wait the task to exit.</li>
</ol>
<div id="22194e85" class="cell" data-execution_count="283">
<div class="sourceCode cell-code" id="cb518"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb518-1"><a href="#cb518-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">mysleep</span>(seconds)</span>
<span id="cb518-2"><a href="#cb518-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sleep</span>(seconds)</span>
<span id="cb518-3"><a href="#cb518-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(<span class="st">"done"</span>)</span>
<span id="cb518-4"><a href="#cb518-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb518-5"><a href="#cb518-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb518-6"><a href="#cb518-6" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> <span class="fu">Task</span>(() <span class="op">-&gt;</span> <span class="fu">mysleep</span>(<span class="fl">5</span>))  <span class="co"># equivalent to `@task mysleep(5)`</span></span>
<span id="cb518-7"><a href="#cb518-7" aria-hidden="true" tabindex="-1"></a><span class="fu">schedule</span>(t)</span>
<span id="cb518-8"><a href="#cb518-8" aria-hidden="true" tabindex="-1"></a><span class="fu">wait</span>(t)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>done</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Communicating with channels.</li>
</ol>
<ul>
<li><p>You can call the <code>Channel{T}(size)</code> constructor to create a channel with an internal buffer that can hold a maximum of <code>size</code> objects of type <code>T</code> (<code>Channel(0)</code> constructs an unbuffered channel).</p></li>
<li><p>Different tasks can write to the same channel concurrently via <code>put!(channel, x)</code> calls.</p></li>
<li><p>Different tasks can read data concurrently via <code>take!(channel)</code> (remove and return a value from a channel) or <code>fetch()</code> (return the <strong>first</strong> available value from a channel without removing) calls.</p></li>
<li><p>If a channel is empty, readers (on a <code>take!()</code> call) will block until data is available.</p></li>
<li><p>If a channel is full, writers (on a <code>put!()</code> call) will block until space becomes available.</p></li>
<li><p>You can use <code>isready(channel)</code> to check for the presence of any object in the channel, and use <code>wait(channel)</code> to wait for an object to become available.</p></li>
<li><p>You can use <code>close(channel)</code> to close a channel. On a closed channel, <code>put!()</code> will fail, but <code>take!()</code> and <code>fetch()</code> can still successfully return any existing values until it is emptied.</p></li>
<li><p>You can associate a channel with a task using the <code>Channel(f)</code> constructor (<code>f</code> is a function accepting a <strong>single</strong> argument of type <code>Channel</code>) or the <code>bind(channel, task)</code> function. This means that the lifecycle of the channel is bound to this task (i.e., you don’t have to close the channel explicitly, while the channel will be closed the moment the task exits). In addition, it will not only log any unexpected failures, but also force the associated resources to close and propagate the exception everywhere. Compared with <code>bind()</code>, <code>errormonitor(task)</code> only prints an error log if <code>task</code> fails.</p></li>
<li><p>The returned channel can be used as an iterable object in a <code>for</code> loop, in which case the loop variable takes on all the produced values. <strong>The loop is terminated when the channel is closed</strong>.</p></li>
</ul>
<div id="6b1f6cca" class="cell" data-execution_count="284">
<div class="sourceCode cell-code" id="cb520"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb520-1"><a href="#cb520-1" aria-hidden="true" tabindex="-1"></a>jobs <span class="op">=</span> <span class="fu">Channel</span><span class="dt">{Int}</span>(<span class="fl">32</span>)</span>
<span id="cb520-2"><a href="#cb520-2" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> <span class="fu">Channel</span><span class="dt">{Tuple}</span>(<span class="fl">32</span>)</span>
<span id="cb520-3"><a href="#cb520-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb520-4"><a href="#cb520-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">do_work</span>()</span>
<span id="cb520-5"><a href="#cb520-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> job_id <span class="kw">in</span> jobs</span>
<span id="cb520-6"><a href="#cb520-6" aria-hidden="true" tabindex="-1"></a>        exec_time <span class="op">=</span> <span class="fu">rand</span>()</span>
<span id="cb520-7"><a href="#cb520-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sleep</span>(exec_time)</span>
<span id="cb520-8"><a href="#cb520-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb520-9"><a href="#cb520-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">put!</span>(results, (job_id, exec_time))</span>
<span id="cb520-10"><a href="#cb520-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb520-11"><a href="#cb520-11" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb520-12"><a href="#cb520-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb520-13"><a href="#cb520-13" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">make_jobs</span>(n)</span>
<span id="cb520-14"><a href="#cb520-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>n</span>
<span id="cb520-15"><a href="#cb520-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">put!</span>(jobs, i)</span>
<span id="cb520-16"><a href="#cb520-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb520-17"><a href="#cb520-17" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb520-18"><a href="#cb520-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb520-19"><a href="#cb520-19" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="fl">12</span></span>
<span id="cb520-20"><a href="#cb520-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb520-21"><a href="#cb520-21" aria-hidden="true" tabindex="-1"></a><span class="fu">errormonitor</span>(<span class="pp">@async</span> <span class="fu">make_jobs</span>(n))</span>
<span id="cb520-22"><a href="#cb520-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb520-23"><a href="#cb520-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>  <span class="co"># spawn 4 tasks</span></span>
<span id="cb520-24"><a href="#cb520-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">errormonitor</span>(<span class="pp">@async</span> <span class="fu">do_work</span>())</span>
<span id="cb520-25"><a href="#cb520-25" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb520-26"><a href="#cb520-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb520-27"><a href="#cb520-27" aria-hidden="true" tabindex="-1"></a>sum_time <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb520-28"><a href="#cb520-28" aria-hidden="true" tabindex="-1"></a>eval_time <span class="op">=</span> <span class="pp">@elapsed</span> <span class="cf">while</span> n <span class="op">&gt;</span> <span class="fl">0</span></span>
<span id="cb520-29"><a href="#cb520-29" aria-hidden="true" tabindex="-1"></a>    job_id, exec_time <span class="op">=</span> <span class="fu">take!</span>(results)</span>
<span id="cb520-30"><a href="#cb520-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(<span class="st">"</span><span class="sc">$</span>job_id<span class="st"> finished in </span><span class="sc">$</span>(<span class="fu">round</span>(exec_time; digits <span class="op">=</span> <span class="fl">2</span>))<span class="st"> seconds"</span>)</span>
<span id="cb520-31"><a href="#cb520-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> n <span class="op">=</span> n <span class="op">-</span> <span class="fl">1</span></span>
<span id="cb520-32"><a href="#cb520-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> sum_time <span class="op">=</span> sum_time <span class="op">+</span> exec_time</span>
<span id="cb520-33"><a href="#cb520-33" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb520-34"><a href="#cb520-34" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="st">"The evaluated time is </span><span class="sc">$</span>eval_time<span class="st"> seconds"</span>)</span>
<span id="cb520-35"><a href="#cb520-35" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="st">"The accumulated time is </span><span class="sc">$</span>sum_time<span class="st"> seconds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2 finished in 0.07 seconds
4 finished in 0.32 seconds
1 finished in 0.44 seconds
3 finished in 0.53 seconds
8 finished in 0.01 seconds
5 finished in 0.56 seconds
6 finished in 0.44 seconds
9 finished in 0.28 seconds
12 finished in 0.03 seconds
7 finished in 0.56 seconds
11 finished in 0.77 seconds
10 finished in 0.93 seconds
The evaluated time is 1.784854254 seconds
The accumulated time is 4.927229826696577 seconds</code></pre>
</div>
</div>
<ol start="5" type="1">
<li>More task operations</li>
</ol>
<p>Task operations are built on a low-level primitive called <code>yieldto(task, value)</code>, which suspends the current task, switches to the specified task, and causes that task’s last <code>yieldto()</code> call to return the specified value.</p>
<p>A few other useful functions of tasks:</p>
<ul>
<li><p><code>current_task()</code>: gets a reference to the currently-running task.</p></li>
<li><p><code>istaskdone()</code>: queries whether a task has exited.</p></li>
<li><p><code>istaskstarted()</code>: queries whether a task has run yet.</p></li>
<li><p><code>task_local_storage()</code>: manipulates a key-value store specific to the current task.</p></li>
</ul>
</section>
<section id="multi-threading" class="level4" data-number="2.14.2">
<h4 data-number="2.14.2" class="anchored" data-anchor-id="multi-threading"><span class="header-section-number">2.14.2</span> Multi-threading</h4>
<p>Julia’s multi-threading, provided by the <code>Threads</code> module, a sub-module of <code>Base</code>, provides the ability to schedule tasks simultaneously on more than one thread or CPU core, sharing memory.</p>
<section id="starting-julia-with-multiple-threads" class="level5" data-number="2.14.2.1">
<h5 data-number="2.14.2.1" class="anchored" data-anchor-id="starting-julia-with-multiple-threads"><span class="header-section-number">2.14.2.1</span> Starting Julia with multiple threads</h5>
<p>The number of execution threads is controlled either by using <code>-t</code>/<code>--threads</code> (<code>julia -t 4</code>) command line argument or by using the <code>JULIA_NUM_THREADS</code> (<code>export JULIA_NUM_THREADS=4</code>, which must be done before starting Julia, and setting it in <code>startup.jl</code> file by using <code>ENV</code> is too late) environment variable. When both are specified, the <code>-t</code>/<code>--threads</code> takes precedence. Both options support the <code>auto</code> argument, which let Julia itself infer a useful default number of threads to use.</p>
<p><strong>Note:</strong> The number of threads specified with <code>-t</code>/<code>--threads</code> is propagated to processes that are spawned using the <code>-p</code>/<code>--procs</code> or <code>--machine-file</code> command line option. For example, <code>julia -p 2 -t 2</code> spawns 1 main process and 2 worker processes, and all three processes have 2 threads enabled. For more fine grained control over worker threads use <code>addprocs()</code> and pass <code>-t</code>/<code>--threads</code> as <code>exeflags</code>.</p>
<p><strong>Note:</strong> The Garbage Collector (GC) can use multiple threads. You can specify it either by using the <code>--gcthreads</code> command line argument or by using the <code>JULIA_NUM_GC_THREADS</code> environment variable.</p>
<p>After starting Julia with multiple threads, you can check it with the following functions:</p>
<div id="5c999c51" class="cell" data-execution_count="285">
<div class="sourceCode cell-code" id="cb522"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb522-1"><a href="#cb522-1" aria-hidden="true" tabindex="-1"></a><span class="bu">Threads</span>.<span class="fu">nthreads</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="246">
<pre><code>1</code></pre>
</div>
</div>
<div id="20ad842b" class="cell" data-execution_count="286">
<div class="sourceCode cell-code" id="cb524"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb524-1"><a href="#cb524-1" aria-hidden="true" tabindex="-1"></a><span class="bu">Threads</span>.<span class="fu">threadid</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="247">
<pre><code>1</code></pre>
</div>
</div>
</section>
<section id="thread-pools" class="level5" data-number="2.14.2.2">
<h5 data-number="2.14.2.2" class="anchored" data-anchor-id="thread-pools"><span class="header-section-number">2.14.2.2</span> Thread pools</h5>
<p>There are two types of thread pools: <code>:interactive</code> (often used for interactive tasks) and <code>:default</code> (often used for long duration tasks).</p>
<p>You can set the number of execution threads available for each thread pool of the two by: <code>-t 3,1</code> or <code>JULIA_NUM_THREADS=3,1</code>, which means that there are 3 threads in the <code>:default</code> thread pool, and 1 thread in the <code>:interactive</code> thread pool. Both numbers can be replaced with the word <code>auto</code>.</p>
<p>Corresponding helper functions:</p>
<div id="0214373b" class="cell" data-execution_count="287">
<div class="sourceCode cell-code" id="cb526"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb526-1"><a href="#cb526-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Base.Threads</span></span>
<span id="cb526-2"><a href="#cb526-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb526-3"><a href="#cb526-3" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="fu">nthreadpools</span>())  <span class="co"># the number of thread pools</span></span>
<span id="cb526-4"><a href="#cb526-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb526-5"><a href="#cb526-5" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="fu">threadpool</span>(<span class="fl">1</span>))  <span class="co"># which thread pool the thread 1 belongs to</span></span>
<span id="cb526-6"><a href="#cb526-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb526-7"><a href="#cb526-7" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="fu">nthreads</span>(<span class="op">:</span>default))  <span class="co"># the number of threads available for the :default thread pool</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2
default
1</code></pre>
</div>
</div>
</section>
<section id="spawning-threads" class="level5" data-number="2.14.2.3">
<h5 data-number="2.14.2.3" class="anchored" data-anchor-id="spawning-threads"><span class="header-section-number">2.14.2.3</span> Spawning threads</h5>
<ol type="1">
<li><code>@spawn</code>: you can specify which thread pool should be used by the spawned thread.</li>
</ol>
<div id="cf423fad" class="cell" data-execution_count="288">
<div class="sourceCode cell-code" id="cb528"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb528-1"><a href="#cb528-1" aria-hidden="true" tabindex="-1"></a><span class="bu">Threads</span>.<span class="pp">@spawn</span> <span class="op">:</span>interactive <span class="cf">begin</span>; <span class="fu">println</span>(<span class="st">"task done"</span>); <span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>task done</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="249">
<pre><code>Task (done) @0x0000724ffe13f530</code></pre>
</div>
</div>
<ol start="2" type="1">
<li><code>@threads</code>: this macro is affixed in front of a <code>for</code> loop to indicate to Julia that the loop is a multi-threaded region.</li>
</ol>
<div id="37200d3d" class="cell" data-execution_count="289">
<div class="sourceCode cell-code" id="cb531"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb531-1"><a href="#cb531-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="fu">zeros</span>(<span class="fl">10</span>)</span>
<span id="cb531-2"><a href="#cb531-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb531-3"><a href="#cb531-3" aria-hidden="true" tabindex="-1"></a><span class="co"># the iteration space is plit among the threads</span></span>
<span id="cb531-4"><a href="#cb531-4" aria-hidden="true" tabindex="-1"></a><span class="bu">Threads</span>.<span class="pp">@threads</span> <span class="cf">for</span> i <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span></span>
<span id="cb531-5"><a href="#cb531-5" aria-hidden="true" tabindex="-1"></a>    a[i] <span class="op">=</span> <span class="bu">Threads</span>.<span class="fu">threadid</span>()</span>
<span id="cb531-6"><a href="#cb531-6" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb531-7"><a href="#cb531-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb531-8"><a href="#cb531-8" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="250">
<pre><code>10-element Vector{Float64}:
 1.0
 1.0
 1.0
 1.0
 1.0
 1.0
 1.0
 1.0
 1.0
 1.0</code></pre>
</div>
</div>
<p><strong>Note:</strong> after a task starts running on a certain thread it may move to a different thread although the <code>:static</code> schedule option for <code>@threads</code> does freeze the thread id. This means that in most cases <code>threadid()</code> should not be treated as constant within a task.</p>
</section>
<section id="avoiding-data-race" class="level5" data-number="2.14.2.4">
<h5 data-number="2.14.2.4" class="anchored" data-anchor-id="avoiding-data-race"><span class="header-section-number">2.14.2.4</span> Avoiding data race</h5>
<p>Be very careful about reading any data if another thread might write to it!</p>
<p>Instead, always use the lock pattern when changing data accessed by other threads.</p>
<div id="1d15db75" class="cell" data-execution_count="290">
<div class="sourceCode cell-code" id="cb533"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb533-1"><a href="#cb533-1" aria-hidden="true" tabindex="-1"></a>lk <span class="op">=</span> <span class="fu">ReentrantLock</span>()</span>
<span id="cb533-2"><a href="#cb533-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb533-3"><a href="#cb533-3" aria-hidden="true" tabindex="-1"></a><span class="co"># method 1</span></span>
<span id="cb533-4"><a href="#cb533-4" aria-hidden="true" tabindex="-1"></a><span class="fu">lock</span>(lk) <span class="cf">do</span> </span>
<span id="cb533-5"><a href="#cb533-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">use</span>(a)</span>
<span id="cb533-6"><a href="#cb533-6" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb533-7"><a href="#cb533-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb533-8"><a href="#cb533-8" aria-hidden="true" tabindex="-1"></a><span class="co"># method 2</span></span>
<span id="cb533-9"><a href="#cb533-9" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb533-10"><a href="#cb533-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lock</span>(lk)</span>
<span id="cb533-11"><a href="#cb533-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span></span>
<span id="cb533-12"><a href="#cb533-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">use</span>(a)</span>
<span id="cb533-13"><a href="#cb533-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">finally</span></span>
<span id="cb533-14"><a href="#cb533-14" aria-hidden="true" tabindex="-1"></a>        <span class="fu">unlock</span>(lk)  <span class="co"># each lock must be matched by an unlock</span></span>
<span id="cb533-15"><a href="#cb533-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb533-16"><a href="#cb533-16" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A toy example:</p>
<ol type="1">
<li>Without multi-threading:</li>
</ol>
<div id="38d0e0c1" class="cell" data-execution_count="291">
<div class="sourceCode cell-code" id="cb534"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb534-1"><a href="#cb534-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the correct result</span></span>
<span id="cb534-2"><a href="#cb534-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">sum_single</span>(x)</span>
<span id="cb534-3"><a href="#cb534-3" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb534-4"><a href="#cb534-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="op">=</span> x</span>
<span id="cb534-5"><a href="#cb534-5" aria-hidden="true" tabindex="-1"></a>        s <span class="op">+=</span> i</span>
<span id="cb534-6"><a href="#cb534-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb534-7"><a href="#cb534-7" aria-hidden="true" tabindex="-1"></a>    s</span>
<span id="cb534-8"><a href="#cb534-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb534-9"><a href="#cb534-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb534-10"><a href="#cb534-10" aria-hidden="true" tabindex="-1"></a><span class="pp">@time</span> <span class="fu">sum_single</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">1_000_000</span>)  <span class="co"># in Julia, the underscore (_) can be used as a separator in literal integers to enhance readability</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  0.000001 seconds</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="251">
<pre><code>500000500000</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Data race often leads to non-deterministic results:</li>
</ol>
<div id="003e6ab1" class="cell" data-execution_count="292">
<div class="sourceCode cell-code" id="cb537"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb537-1"><a href="#cb537-1" aria-hidden="true" tabindex="-1"></a><span class="co"># with data race and the result is non-deterministic</span></span>
<span id="cb537-2"><a href="#cb537-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">sum_multi_bad</span>(x)</span>
<span id="cb537-3"><a href="#cb537-3" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb537-4"><a href="#cb537-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Threads</span>.<span class="pp">@threads</span> <span class="cf">for</span> i <span class="op">=</span> x</span>
<span id="cb537-5"><a href="#cb537-5" aria-hidden="true" tabindex="-1"></a>        s <span class="op">+=</span> i</span>
<span id="cb537-6"><a href="#cb537-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb537-7"><a href="#cb537-7" aria-hidden="true" tabindex="-1"></a>    s</span>
<span id="cb537-8"><a href="#cb537-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb537-9"><a href="#cb537-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb537-10"><a href="#cb537-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span></span>
<span id="cb537-11"><a href="#cb537-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(<span class="fu">sum_multi_bad</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">1_000_000</span>))</span>
<span id="cb537-12"><a href="#cb537-12" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>500000500000
500000500000
500000500000
500000500000
500000500000
500000500000</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Add lock when performing data race operations:</li>
</ol>
<div id="d4cc0b55" class="cell" data-execution_count="293">
<div class="sourceCode cell-code" id="cb539"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb539-1"><a href="#cb539-1" aria-hidden="true" tabindex="-1"></a><span class="co"># locked version</span></span>
<span id="cb539-2"><a href="#cb539-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the result is correct</span></span>
<span id="cb539-3"><a href="#cb539-3" aria-hidden="true" tabindex="-1"></a>lk <span class="op">=</span> <span class="fu">ReentrantLock</span>()</span>
<span id="cb539-4"><a href="#cb539-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb539-5"><a href="#cb539-5" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">sum_multi_lock</span>(x)</span>
<span id="cb539-6"><a href="#cb539-6" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb539-7"><a href="#cb539-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Threads</span>.<span class="pp">@threads</span> <span class="cf">for</span> i <span class="op">=</span> x</span>
<span id="cb539-8"><a href="#cb539-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">lock</span>(lk) <span class="cf">do</span></span>
<span id="cb539-9"><a href="#cb539-9" aria-hidden="true" tabindex="-1"></a>            s <span class="op">+=</span> i</span>
<span id="cb539-10"><a href="#cb539-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb539-11"><a href="#cb539-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb539-12"><a href="#cb539-12" aria-hidden="true" tabindex="-1"></a>    s</span>
<span id="cb539-13"><a href="#cb539-13" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb539-14"><a href="#cb539-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb539-15"><a href="#cb539-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span></span>
<span id="cb539-16"><a href="#cb539-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(<span class="fu">sum_multi_lock</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">1_000_000</span>))</span>
<span id="cb539-17"><a href="#cb539-17" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>500000500000
500000500000
500000500000
500000500000
500000500000
500000500000</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Split data into chunks –&gt; use its own internal buffer for each thread –&gt; collect all results of chunks:</li>
</ol>
<div id="a70a1eaa" class="cell" data-execution_count="294">
<div class="sourceCode cell-code" id="cb541"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb541-1"><a href="#cb541-1" aria-hidden="true" tabindex="-1"></a><span class="co"># split the sum into chunks that are race-free</span></span>
<span id="cb541-2"><a href="#cb541-2" aria-hidden="true" tabindex="-1"></a><span class="co"># collect the result of each chunk</span></span>
<span id="cb541-3"><a href="#cb541-3" aria-hidden="true" tabindex="-1"></a><span class="co"># add the results together</span></span>
<span id="cb541-4"><a href="#cb541-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">sum_multi_chunk</span>(x)</span>
<span id="cb541-5"><a href="#cb541-5" aria-hidden="true" tabindex="-1"></a>    chunks <span class="op">=</span> <span class="bu">Iterators</span>.<span class="fu">partition</span>(x, <span class="fu">length</span>(x) <span class="op">÷</span> <span class="bu">Threads</span>.<span class="fu">nthreads</span>())</span>
<span id="cb541-6"><a href="#cb541-6" aria-hidden="true" tabindex="-1"></a>    tasks <span class="op">=</span> <span class="fu">map</span>(chunks) <span class="cf">do</span> chunk</span>
<span id="cb541-7"><a href="#cb541-7" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Threads</span>.<span class="pp">@spawn</span> <span class="fu">sum_single</span>(chunk)</span>
<span id="cb541-8"><a href="#cb541-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb541-9"><a href="#cb541-9" aria-hidden="true" tabindex="-1"></a>    chunk_sums <span class="op">=</span> <span class="fu">fetch</span>.(tasks)</span>
<span id="cb541-10"><a href="#cb541-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">sum_single</span>(chunk_sums)</span>
<span id="cb541-11"><a href="#cb541-11" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb541-12"><a href="#cb541-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb541-13"><a href="#cb541-13" aria-hidden="true" tabindex="-1"></a><span class="pp">@time</span> <span class="fu">sum_multi_chunk</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">1_000_000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  0.047882 seconds (15.59 k allocations: 1.082 MiB, 99.68% compilation time)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="254">
<pre><code>500000500000</code></pre>
</div>
</div>
<ol start="5" type="1">
<li>Use atomic operations:</li>
</ol>
<p>Julia supports accessing and modifying values atomically, that is, in a thread-safe way to avoid data race.</p>
<p>A value (which must be of a <strong>primitive</strong> type) can be wrapped as <code>Threads.Atomic{T}(value)</code> to indicate it must be accessed in this way.</p>
<p>In a word, perform atomic operations on atomic values to avoid data race.</p>
<div id="cdd0c118" class="cell" data-execution_count="295">
<div class="sourceCode cell-code" id="cb544"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb544-1"><a href="#cb544-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">sum_multi_atomic</span>(x)</span>
<span id="cb544-2"><a href="#cb544-2" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> <span class="bu">Threads</span>.<span class="fu">Atomic</span><span class="dt">{Int}</span>(<span class="fl">0</span>)  <span class="co"># s is an atomic value of type Int</span></span>
<span id="cb544-3"><a href="#cb544-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Threads</span>.<span class="pp">@threads</span> <span class="cf">for</span> i <span class="op">=</span> x</span>
<span id="cb544-4"><a href="#cb544-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Threads</span>.<span class="fu">atomic_add!</span>(s, i)  <span class="co"># perform atomic operation atomic_add! (add i to s, and return the old value) on atomic value s</span></span>
<span id="cb544-5"><a href="#cb544-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb544-6"><a href="#cb544-6" aria-hidden="true" tabindex="-1"></a>    s</span>
<span id="cb544-7"><a href="#cb544-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb544-8"><a href="#cb544-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb544-9"><a href="#cb544-9" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> <span class="fu">sum_multi_atomic</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">1_000_000</span>)</span>
<span id="cb544-10"><a href="#cb544-10" aria-hidden="true" tabindex="-1"></a>res[]  <span class="co"># Atomic objects can be accessed using the [] notation</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="255">
<pre><code>500000500000</code></pre>
</div>
</div>
</section>
</section>
<section id="multi-processing-and-distributed-computing" class="level4" data-number="2.14.3">
<h4 data-number="2.14.3" class="anchored" data-anchor-id="multi-processing-and-distributed-computing"><span class="header-section-number">2.14.3</span> Multi-processing and Distributed computing</h4>
<p>Distributed computing provided by module <code>Distributed</code> runs multiple Julia processes with <strong>separate</strong> memory spaces.</p>
<section id="starting-and-managing-multiple-processes" class="level5" data-number="2.14.3.1">
<h5 data-number="2.14.3.1" class="anchored" data-anchor-id="starting-and-managing-multiple-processes"><span class="header-section-number">2.14.3.1</span> Starting and managing multiple processes</h5>
<p>In Julia, each process has an associated identifier. The process providing the interactive Julia prompt always has an id equal to 1, called the main process.</p>
<p>By default, the processes used for parallel operations are referred to as “workers”. When there is only 1 process, process 1 is considered a worker. Otherwise, workers are considered to be all processes other than process 1. As a result, adding 2 or more processes is required to gain benefits from parallel processing methods. Adding a single process is beneficial if you just wish to do other things in the main process while a long computation is running on the worker.</p>
<p>Julia has built-in support for two types of clusters:</p>
<ul>
<li><p><strong>A local cluster</strong> specified with the <code>-p</code>/<code>--procs</code> option (implicitly loads module <code>Distributed</code>).</p></li>
<li><p><strong>A cluster spanning machines</strong> using the <code>--machine-file</code> option.</p></li>
</ul>
<p>This uses a <strong>passwordless</strong> ssh login to start Julia worker processes from the same path as the current host on the specified machines.</p>
<p>Each machine definition takes the form <code>[count*] [user@]host[:port] [bind_addr[:port]]</code>. <code>count</code> is the number of workers to spawn on the node, and defaults to 1; <code>user</code> defaults to the current user; <code>port</code> defaults to the standard ssh port; <code>bind_addr[:port]</code> specifies the IP address and port that other workers should use to connect to this worker.</p>
<p><strong>Note:</strong> in Julia, distribution of code to worker processes relies on <code>Serialization.serialize</code> (the need for data serialization and deserialization arises primarily due to the requirement to convert complex data structures into formats that can be transmitted across a network when different nodes communicate with each other), so it is advised that all workers on all machines use the same version of Julia to ensure compatibility of serialization and deserialization.</p>
<p><code>Distributed</code> package provides some useful functions for starting and managing processes within Julia:</p>
<div id="2cbf27ba" class="cell" data-execution_count="296">
<div class="sourceCode cell-code" id="cb546"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb546-1"><a href="#cb546-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Distributed</span>  <span class="co"># Module Distributed must be explicitly loaded on the master process before invoking addprocs() and other functions if you want to start distributed computing within Julia, instead of using command line options. It is automaticaly made available on the worker processes.</span></span>
<span id="cb546-2"><a href="#cb546-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb546-3"><a href="#cb546-3" aria-hidden="true" tabindex="-1"></a><span class="fu">addprocs</span>()  <span class="co"># launch worker processes using the LocalManager (the same as -p), SSHManager (the same as --machine-file) or other cluster managers of type ClusterManager</span></span>
<span id="cb546-4"><a href="#cb546-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb546-5"><a href="#cb546-5" aria-hidden="true" tabindex="-1"></a><span class="fu">procs</span>()  <span class="co"># return a list of all process identifiers</span></span>
<span id="cb546-6"><a href="#cb546-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb546-7"><a href="#cb546-7" aria-hidden="true" tabindex="-1"></a><span class="fu">nprocs</span>()  <span class="co"># return the number of available processes</span></span>
<span id="cb546-8"><a href="#cb546-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb546-9"><a href="#cb546-9" aria-hidden="true" tabindex="-1"></a><span class="fu">workers</span>()</span>
<span id="cb546-10"><a href="#cb546-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb546-11"><a href="#cb546-11" aria-hidden="true" tabindex="-1"></a><span class="fu">nworkers</span>()</span>
<span id="cb546-12"><a href="#cb546-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb546-13"><a href="#cb546-13" aria-hidden="true" tabindex="-1"></a><span class="fu">myid</span>()  <span class="co"># get the id of the current process</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Note:</strong> workers do <strong>not</strong> run a <code>~/.julia/config/startup.jl</code> startup script, nor do they synchronize their global state with any of the other running processes. You may use <code>addprocs(exeflags = "--project")</code> to initialize a worker with a particular environment.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Network requirements for `LocalManager` and `SSHManager`">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Network requirements for <code>LocalManager</code> and <code>SSHManager</code>
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>The master process does not listen on any port. It only connects out to the workers.</li>
<li>Each worker binds to only one of the local interfaces and listens on an ephemeral port number assigned by the OS.</li>
<li><code>LocalManager</code>, used by <code>addprocs(N)</code>, by default binds only to the loopback interface. An <code>addprocs(4)</code> followed by an <code>addprocs(["remote_host"])</code> will fail. To create a cluster comprising their local system and a few remote systems, it can be done by explicitly requesting <code>LocalManager</code> to bind to an external network interface via <code>restrict</code> keyword argument: <code>addprocs(4; restrict = false)</code>.</li>
<li><code>SSHManager</code>, used by <code>addprocs(list_of_remote_hosts)</code>, launches workers on remote hosts via SSH. By default SSH is only used to launch Julia workers. Subsequent master-worker and worker-worker connections use plain, unencrypted TCP/IP sockets. The remote hosts must have passwordless login enabled. Additional SSH flags or credentials may be specified via keyword argument <code>sshflags</code>.</li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="Cluster cookie">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Cluster cookie
</div>
</div>
<div class="callout-body-container callout-body">
<p>All processes in a cluster share the same cookie which, by default, is a randomly generated string on the master process, and can be accessed via <code>cluster_cookie()</code>, while <code>cluster_cookie(cookie)</code> sets it and returns the new cookie. It can also be passed to the workers at startup via <code>--worker=&lt;cookie&gt;</code>.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="Specifying network topology">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Specifying network topology
</div>
</div>
<div class="callout-body-container callout-body">
<p>The keyword argument <code>topology</code> to <code>addprocs()</code> is used to specify how the workers must be connected to each other. The default is <code>:all_to_all</code>, meaning that all workers are connected to each other.</p>
</div>
</div>
</section>
<section id="starting-distributed-programming" class="level5" data-number="2.14.3.2">
<h5 data-number="2.14.3.2" class="anchored" data-anchor-id="starting-distributed-programming"><span class="header-section-number">2.14.3.2</span> Starting distributed programming</h5>
<p>Distributed programming in Julia is built on two primitives:</p>
<ol type="1">
<li>Remote references: a remote reference is an object of type <code>RemoteChannel</code> that can be used from any process to refer to an object stored on a particular process. Multiple processes can communicate via <code>RemoteChannel</code>.</li>
<li>Remote calls: a remote call is a request by one process to call a certain function on certain arguments on another (possibly the same) process. A remote call returns a <code>Future</code> object to its result. Then you can use <code>wait()</code> to wait the function running to finish or use <code>fetch()</code> to get the returned value by the called function.</li>
</ol>
<p>Launch remote calls:</p>
<div id="40ca03d6" class="cell" data-execution_count="297">
<div class="sourceCode cell-code" id="cb547"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb547-1"><a href="#cb547-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@spawn</span> p expr  <span class="co"># Create a closure around an expression and run the closure asynchronously on process p. If p is set to :any, then the system will pick a process to use automatically.</span></span>
<span id="cb547-2"><a href="#cb547-2" aria-hidden="true" tabindex="-1"></a><span class="pp">@fetchfrom</span> p expr  <span class="co"># equivalent to fetch(@spawnat p expr)</span></span>
<span id="cb547-3"><a href="#cb547-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb547-4"><a href="#cb547-4" aria-hidden="true" tabindex="-1"></a><span class="fu">remotecall</span>(f, pid, <span class="op">...</span>)  <span class="co"># Call a function f asynchronously on the given arguments ... on the specified process pid.</span></span>
<span id="cb547-5"><a href="#cb547-5" aria-hidden="true" tabindex="-1"></a><span class="fu">remotecall</span>(f, pool, <span class="op">...</span>)  <span class="co"># Give a pool of type WorkerPool instead of a pid. It will wait for and take a free worker from pool to use.</span></span>
<span id="cb547-6"><a href="#cb547-6" aria-hidden="true" tabindex="-1"></a><span class="fu">remotecall_fetch</span>()  <span class="co"># equivalent to fetch(remotecall())</span></span>
<span id="cb547-7"><a href="#cb547-7" aria-hidden="true" tabindex="-1"></a><span class="fu">remote_do</span>(f, id, <span class="op">...</span>)  <span class="co"># Run f on worker id asynchronously. Unlike remotecall, it does not store the result of computation, nor is there a way to wait for its completion.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="8e53fda4" class="cell" data-execution_count="298">
<div class="sourceCode cell-code" id="cb548"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb548-1"><a href="#cb548-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Distributed</span></span>
<span id="cb548-2"><a href="#cb548-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb548-3"><a href="#cb548-3" aria-hidden="true" tabindex="-1"></a><span class="fu">addprocs</span>(<span class="fl">2</span>)  <span class="co"># add 2 wrokers via LocalManager</span></span>
<span id="cb548-4"><a href="#cb548-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb548-5"><a href="#cb548-5" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> <span class="fu">remotecall</span>(rand, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">3</span>)  <span class="co"># run rand(3, 3) on process 2</span></span>
<span id="cb548-6"><a href="#cb548-6" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="pp">@spawnat</span> <span class="fl">2</span> <span class="fl">1</span> <span class="op">.+</span> <span class="fu">fetch</span>(r)  <span class="co"># run expr 1 .+ fetch(r) on process 2 (note: this forms a closure () -&gt; 1 .+ fetch(r) which contains the global variable r)</span></span>
<span id="cb548-7"><a href="#cb548-7" aria-hidden="true" tabindex="-1"></a><span class="fu">fetch</span>(s)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="256">
<pre><code>3×3 Matrix{Float64}:
 1.04629  1.54029  1.15181
 1.74728  1.54821  1.7228
 1.59677  1.8041   1.40291</code></pre>
</div>
</div>
<p><strong>Note:</strong> once fetched, a <code>Future</code> will cache its value locally. Further <code>fetch()</code> calls don not entail a network hop. Once all referencing <code>Future</code>s have fetched, the remote stored value is deleted.</p>
</section>
<section id="code-and-data-availability" class="level5" data-number="2.14.3.3">
<h5 data-number="2.14.3.3" class="anchored" data-anchor-id="code-and-data-availability"><span class="header-section-number">2.14.3.3</span> Code and data availability</h5>
<p>Before spawning a process, you must ensure that your code and data are available on any process that runs it.</p>
<ol type="1">
<li><strong>Code availability</strong></li>
</ol>
<div id="b7874616" class="cell" data-execution_count="299">
<div class="sourceCode cell-code" id="cb550"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb550-1"><a href="#cb550-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">rand2</span>(dims<span class="op">...</span>)</span>
<span id="cb550-2"><a href="#cb550-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fl">2</span> <span class="op">*</span> <span class="fu">rand</span>(dims<span class="op">...</span>)</span>
<span id="cb550-3"><a href="#cb550-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb550-4"><a href="#cb550-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb550-5"><a href="#cb550-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rand2</span>(<span class="fl">2</span>, <span class="fl">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="257">
<pre><code>2×2 Matrix{Float64}:
 0.0602265  1.47168
 0.0996057  0.625218</code></pre>
</div>
</div>
<div id="9c5a7151" class="cell" data-execution_count="300">
<div class="sourceCode cell-code" id="cb552"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb552-1"><a href="#cb552-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Distributed</span></span>
<span id="cb552-2"><a href="#cb552-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb552-3"><a href="#cb552-3" aria-hidden="true" tabindex="-1"></a><span class="fu">addprocs</span>(<span class="fl">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="343b8735" class="cell" data-execution_count="301">
<div class="sourceCode cell-code" id="cb553"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb553-1"><a href="#cb553-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rand2 is defined in the main process</span></span>
<span id="cb553-2"><a href="#cb553-2" aria-hidden="true" tabindex="-1"></a><span class="co"># so process 1 knew it but the others did not</span></span>
<span id="cb553-3"><a href="#cb553-3" aria-hidden="true" tabindex="-1"></a><span class="fu">fetch</span>(<span class="pp">@spawnat</span> <span class="op">:</span>any <span class="fu">rand2</span>(<span class="fl">2</span>, <span class="fl">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>On worker 2:
UndefVarError: `#rand2` not defined
Stacktrace:
  [1] <span class="ansi-bold">deserialize_datatype</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Serialization/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">Serialization.jl:1399</span>
  [2] <span class="ansi-bold">handle_deserialize</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Serialization/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">Serialization.jl:867</span>
  [3] <span class="ansi-bold">deserialize</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Serialization/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">Serialization.jl:814</span>
  [4] <span class="ansi-bold">handle_deserialize</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Serialization/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">Serialization.jl:874</span>
  [5] <span class="ansi-bold">deserialize</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Serialization/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">Serialization.jl:814</span><span class="ansi-bright-black-fg"> [inlined]</span>
  [6] <span class="ansi-bold">deserialize_global_from_main</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Distributed/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">clusterserialize.jl:160</span>
  [7] <span class="ansi-bold">#5</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Distributed/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">clusterserialize.jl:72</span><span class="ansi-bright-black-fg"> [inlined]</span>
  [8] <span class="ansi-bold">foreach</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">./</span><span style="text-decoration:underline" class="ansi-bright-black-fg">abstractarray.jl:3098</span>
  [9] <span class="ansi-bold">deserialize</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Distributed/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">clusterserialize.jl:72</span>
 [10] <span class="ansi-bold">handle_deserialize</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Serialization/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">Serialization.jl:960</span>
 [11] <span class="ansi-bold">deserialize</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Serialization/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">Serialization.jl:814</span>
 [12] <span class="ansi-bold">handle_deserialize</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Serialization/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">Serialization.jl:871</span>
 [13] <span class="ansi-bold">deserialize</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Serialization/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">Serialization.jl:814</span>
 [14] <span class="ansi-bold">handle_deserialize</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Serialization/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">Serialization.jl:874</span>
 [15] <span class="ansi-bold">deserialize</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Serialization/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">Serialization.jl:814</span><span class="ansi-bright-black-fg"> [inlined]</span>
 [16] <span class="ansi-bold">deserialize_msg</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Distributed/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">messages.jl:87</span>
 [17] <span class="ansi-bold">#invokelatest#2</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">./</span><span style="text-decoration:underline" class="ansi-bright-black-fg">essentials.jl:892</span><span class="ansi-bright-black-fg"> [inlined]</span>
 [18] <span class="ansi-bold">invokelatest</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">./</span><span style="text-decoration:underline" class="ansi-bright-black-fg">essentials.jl:889</span><span class="ansi-bright-black-fg"> [inlined]</span>
 [19] <span class="ansi-bold">message_handler_loop</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Distributed/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">process_messages.jl:176</span>
 [20] <span class="ansi-bold">process_tcp_streams</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Distributed/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">process_messages.jl:133</span>
 [21] <span class="ansi-bold">#103</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">/data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Distributed/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">process_messages.jl:121</span>

Stacktrace:
 [1] remotecall_fetch(f::Function, w::Distributed.Worker, args::Distributed.RRID; kwargs::@Kwargs{})
   @ Distributed /data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Distributed/src/remotecall.jl:465
 [2] remotecall_fetch(f::Function, w::Distributed.Worker, args::Distributed.RRID)
   @ Distributed /data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Distributed/src/remotecall.jl:454
 [3] remotecall_fetch
   @ /data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Distributed/src/remotecall.jl:492 [inlined]
 [4] call_on_owner
   @ /data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Distributed/src/remotecall.jl:565 [inlined]
 [5] fetch(r::Future)
   @ Distributed /data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Distributed/src/remotecall.jl:619
 [6] top-level scope
   @ /data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Distributed/src/macros.jl:95</pre>
</div>
</div>
</div>
<p><strong>Note:</strong> more commonly you’ll be loading code from files or packages, and you’ll have a considerable amount of flexibility in controlling which processes load code. So if you have defined some functions, types, etc., you’d better organize them into files or packages, which will make things easier.</p>
<p>Consider a file, <code>DummyModule.jl</code>, containing the following code:</p>
<div id="350d328d" class="cell" data-execution_count="302">
<div class="sourceCode cell-code" id="cb554"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb554-1"><a href="#cb554-1" aria-hidden="true" tabindex="-1"></a><span class="kw">module</span> DummyModule</span>
<span id="cb554-2"><a href="#cb554-2" aria-hidden="true" tabindex="-1"></a><span class="kw">export</span> MyType, f</span>
<span id="cb554-3"><a href="#cb554-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb554-4"><a href="#cb554-4" aria-hidden="true" tabindex="-1"></a><span class="kw">mutable struct</span> MyType</span>
<span id="cb554-5"><a href="#cb554-5" aria-hidden="true" tabindex="-1"></a>    a<span class="op">::</span><span class="dt">Int</span></span>
<span id="cb554-6"><a href="#cb554-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb554-7"><a href="#cb554-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb554-8"><a href="#cb554-8" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(x) <span class="op">=</span> x<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="fl">1</span></span>
<span id="cb554-9"><a href="#cb554-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb554-10"><a href="#cb554-10" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="st">"DummyModule loaded"</span>)</span>
<span id="cb554-11"><a href="#cb554-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb554-12"><a href="#cb554-12" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In order to refer to the code defined in <code>DummyModule.jl</code> across all processes, <strong>first</strong>, <code>DummyModule.jl</code> needs to be <strong>loaded</strong> on every process. Calling <code>include("DummyModule.jl")</code> loads it only on a single process. To load it on every process, use the <code>@everywhere [procs()] expr</code> macro, which execute an expression under <code>Main</code> on all <code>procs</code>:</p>
<div id="0acb86ce" class="cell" data-execution_count="303">
<div class="sourceCode cell-code" id="cb555"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb555-1"><a href="#cb555-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@everywhere</span> <span class="fu">include</span>(<span class="st">"DummyModule.jl"</span>)</span>
<span id="cb555-2"><a href="#cb555-2" aria-hidden="true" tabindex="-1"></a><span class="pp">@everywhere</span> <span class="im">using</span> <span class="bu">InteractiveUtils</span></span>
<span id="cb555-3"><a href="#cb555-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb555-4"><a href="#cb555-4" aria-hidden="true" tabindex="-1"></a><span class="pp">@fetchfrom</span> <span class="fl">2</span> <span class="bu">InteractiveUtils</span>.<span class="fu">varinfo</span>()  <span class="co"># show exported global variables in a module</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>DummyModule loaded
      From worker 2:    DummyModule loaded
      From worker 3:    DummyModule loaded</code></pre>
</div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="259">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: right;">size</th>
<th style="text-align: left;">summary</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Base</td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Module</td>
</tr>
<tr class="even">
<td style="text-align: left;">Core</td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Module</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Distributed</td>
<td style="text-align: right;">1.131 MiB</td>
<td style="text-align: left;">Module</td>
</tr>
<tr class="even">
<td style="text-align: left;">DummyModule</td>
<td style="text-align: right;">266.805 KiB</td>
<td style="text-align: left;">Module</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Main</td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Module</td>
</tr>
<tr class="even">
<td style="text-align: left;">r</td>
<td style="text-align: right;">256 bytes</td>
<td style="text-align: left;">Future</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Once loaded, we can use code defined in <code>DummyModule.jl</code> across all processes by:</p>
<div id="fcefabbc" class="cell" data-execution_count="304">
<div class="sourceCode cell-code" id="cb557"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb557-1"><a href="#cb557-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@everywhere</span> <span class="im">using</span> <span class="bu">.DummyModule</span></span>
<span id="cb557-2"><a href="#cb557-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb557-3"><a href="#cb557-3" aria-hidden="true" tabindex="-1"></a><span class="pp">@fetchfrom</span> <span class="fl">2</span> <span class="fu">f</span>(<span class="fl">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      From worker 2:    ┌ Warning: Cannot transfer global variable f; it already has a value.
      From worker 2:    └ @ Distributed /data/softwares/julia_v1.10.7/share/julia/stdlib/v1.10/Distributed/src/clusterserialize.jl:166</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="260">
<pre><code>10001</code></pre>
</div>
</div>
<p><strong>Note:</strong> a file can be preloaded on multiple processes at startup with the <code>-L</code> flag, and a driver script can be used to drive the computation: <code>julia -p &lt;n&gt; -L file1.jl -L file2.jl driver.jl</code>. The Julia process running the driver script given here has an id equal to 1, just like a process providing an interactive prompt.</p>
<p>If <code>DummyModule.jl</code> is a package, just use <code>@everywhere using DummyModule</code>, which will make code defined in <code>DummyModule.jl</code> available in every process.</p>
<ol start="2" type="1">
<li><strong>Data availability</strong></li>
</ol>
<p>Sending messages and moving data constitute most of the overhead in a distributed program.</p>
<p>Reducing the number of messages and the amount of data sent is critical to achieving performance and scalability.</p>
<ul>
<li><p>Global variables</p>
<p>Expressions executed remotely via <code>@spawnat</code>, or closures specified for remote execution using <code>remotecall()</code> may refer to global variables.</p>
<p>Remote calls with embedded global references (<strong>under Main module only</strong>) manage globals as follows:</p>
<ul>
<li><p>New global bindings are created on destination workers if they are referenced as part of remote call.</p></li>
<li><p>Global constants are declared as constants on remote nodes too.</p></li>
<li><p>Globals are re-sent to a destination worker only in the context of a remote call, and only if its value has changed.</p></li>
<li><p>The cluster does not synchronize global bindings across nodes.</p></li>
</ul></li>
</ul>
<p><strong>Note:</strong> memory associated with globals may be collected when they are reassigned on the master, while no such action is taken on the workers as the bindings continue to be valid. <code>clear!()</code> can be used to manually reassign specific globals on remote nodes to <code>nothing</code> once they are no longer required.</p>
<p>Only when remote calls refer to globals under the <code>Main</code> module are new global bindings created on destination workers, so we can use <code>let</code> blocks to localize global variables when forming closures. This avoids new global bindings’ creating on destination workers:</p>
<div id="a6ecb2e1" class="cell" data-execution_count="305">
<div class="sourceCode cell-code" id="cb560"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb560-1"><a href="#cb560-1" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> <span class="fu">rand</span>(<span class="fl">10</span>, <span class="fl">10</span>)</span>
<span id="cb560-2"><a href="#cb560-2" aria-hidden="true" tabindex="-1"></a><span class="fu">remotecall_fetch</span>(() <span class="op">-&gt;</span> A, <span class="fl">2</span>)  <span class="co"># A is a global variable under the Main module, so new global binding of A will be created on process 2</span></span>
<span id="cb560-3"><a href="#cb560-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb560-4"><a href="#cb560-4" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> <span class="fu">rand</span>(<span class="fl">10</span>, <span class="fl">10</span>)</span>
<span id="cb560-5"><a href="#cb560-5" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> B <span class="op">=</span> B  <span class="co"># B becomes a local variable, so B won't be created on process 2</span></span>
<span id="cb560-6"><a href="#cb560-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">remotecall_fetch</span>(() <span class="op">-&gt;</span> B, <span class="fl">2</span>)</span>
<span id="cb560-7"><a href="#cb560-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb560-8"><a href="#cb560-8" aria-hidden="true" tabindex="-1"></a><span class="pp">@fetchfrom</span> <span class="fl">2</span> <span class="bu">InteractiveUtils</span>.<span class="fu">varinfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown" data-execution_count="261">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: right;">size</th>
<th style="text-align: left;">summary</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: right;">840 bytes</td>
<td style="text-align: left;">10×10 Matrix{Float64}</td>
</tr>
<tr class="even">
<td style="text-align: left;">Base</td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Module</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Core</td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Module</td>
</tr>
<tr class="even">
<td style="text-align: left;">Distributed</td>
<td style="text-align: right;">1.138 MiB</td>
<td style="text-align: left;">Module</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DummyModule</td>
<td style="text-align: right;">267.636 KiB</td>
<td style="text-align: left;">Module</td>
</tr>
<tr class="even">
<td style="text-align: left;">Main</td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Module</td>
</tr>
<tr class="odd">
<td style="text-align: left;">r</td>
<td style="text-align: right;">256 bytes</td>
<td style="text-align: left;">Future</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li><p>Communicating with <code>RemoteChannel</code>s</p>
<p>Create references to remote channels with the following:</p>
<div id="b51d89c3" class="cell" data-execution_count="306">
<div class="sourceCode cell-code" id="cb561"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb561-1"><a href="#cb561-1" aria-hidden="true" tabindex="-1"></a><span class="fu">RemoteChannel</span>(f, pid)  <span class="co"># Create references to remote channels of a specific size and type. f is a function that when executed on pid (the default is the current process) must return an implementation of an AbstractChannel. e.g., RemoteChannel(() -&gt; Channel{Int}(10), pid).</span></span>
<span id="cb561-2"><a href="#cb561-2" aria-hidden="true" tabindex="-1"></a><span class="fu">RemoteChannel</span>(pid)  <span class="co"># make a reference to a Channel{Any}(1) on process pid</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>A <code>Channel</code> is local to a process, but a <code>RemoteChannel</code> can put and take values across workers.</li>
<li>A <code>RemoteChannel</code> can be thought of as a handle to a <code>Channel</code>.</li>
<li>The process id, <code>pid</code>, associated with a <code>RemoteChannel</code> identifies the process where the backing store, i.e., the backing <code>Channel</code> exists.</li>
<li>Any process with a reference to a <code>RemoteChannel</code> can put and take items from the channel. Data is automatically sent to or retrieved from the process a <code>RemoteChannel</code> is associated with.</li>
<li>Serializing a <code>Channel</code> also serializes any data present in the channel. Deserializing it therefore effectively makes a copy of the original object.</li>
<li>On the other hand, serializing a <code>RemoteChannel</code> only involves the serialization of an identifier that identifies the <strong>location</strong> and <strong>instance</strong> of <code>Channel</code> referred to by the handle. A deserialized <code>RemoteChannel</code> object on any worker, therefore also points to the same backing store as the original.</li>
</ul></li>
</ul>
<div id="7d20d216" class="cell" data-execution_count="307">
<div class="sourceCode cell-code" id="cb562"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb562-1"><a href="#cb562-1" aria-hidden="true" tabindex="-1"></a>jobs <span class="op">=</span> <span class="fu">RemoteChannel</span>(() <span class="op">-&gt;</span> <span class="fu">Channel</span><span class="dt">{Int}</span>(<span class="fl">32</span>))</span>
<span id="cb562-2"><a href="#cb562-2" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> <span class="fu">RemoteChannel</span>(() <span class="op">-&gt;</span> <span class="fu">Channel</span><span class="dt">{Tuple}</span>(<span class="fl">32</span>))</span>
<span id="cb562-3"><a href="#cb562-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-4"><a href="#cb562-4" aria-hidden="true" tabindex="-1"></a><span class="pp">@everywhere</span> <span class="kw">function</span> <span class="fu">do_work</span>(jobs, results)  <span class="co"># define work function everywhere</span></span>
<span id="cb562-5"><a href="#cb562-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="cn">true</span></span>
<span id="cb562-6"><a href="#cb562-6" aria-hidden="true" tabindex="-1"></a>        job_id <span class="op">=</span> <span class="fu">take!</span>(jobs)</span>
<span id="cb562-7"><a href="#cb562-7" aria-hidden="true" tabindex="-1"></a>        exec_time <span class="op">=</span> <span class="fu">rand</span>()</span>
<span id="cb562-8"><a href="#cb562-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sleep</span>(exec_time)  <span class="co"># simulate elpased time doing actual work</span></span>
<span id="cb562-9"><a href="#cb562-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">put!</span>(results, (job_id, exec_time, <span class="fu">myid</span>()))</span>
<span id="cb562-10"><a href="#cb562-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb562-11"><a href="#cb562-11" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb562-12"><a href="#cb562-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-13"><a href="#cb562-13" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">make_jobs</span>(n)</span>
<span id="cb562-14"><a href="#cb562-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>n</span>
<span id="cb562-15"><a href="#cb562-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">put!</span>(jobs, i)</span>
<span id="cb562-16"><a href="#cb562-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb562-17"><a href="#cb562-17" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb562-18"><a href="#cb562-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-19"><a href="#cb562-19" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="fl">12</span></span>
<span id="cb562-20"><a href="#cb562-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-21"><a href="#cb562-21" aria-hidden="true" tabindex="-1"></a><span class="fu">errormonitor</span>(<span class="pp">@async</span> <span class="fu">make_jobs</span>(n))</span>
<span id="cb562-22"><a href="#cb562-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-23"><a href="#cb562-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> <span class="fu">workers</span>()</span>
<span id="cb562-24"><a href="#cb562-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">remote_do</span>(do_work, p, jobs, results)</span>
<span id="cb562-25"><a href="#cb562-25" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb562-26"><a href="#cb562-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-27"><a href="#cb562-27" aria-hidden="true" tabindex="-1"></a><span class="pp">@elapsed</span> <span class="cf">while</span> n <span class="op">&gt;</span> <span class="fl">0</span></span>
<span id="cb562-28"><a href="#cb562-28" aria-hidden="true" tabindex="-1"></a>    job_id, exec_time, <span class="kw">where</span> <span class="op">=</span> <span class="fu">take!</span>(results)</span>
<span id="cb562-29"><a href="#cb562-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(<span class="st">"</span><span class="sc">$</span>job_id<span class="st"> finished in </span><span class="sc">$</span>(<span class="fu">round</span>(exec_time; digits <span class="op">=</span> <span class="fl">2</span>))<span class="st"> seconds on worker </span><span class="sc">$</span>where<span class="st">"</span>)</span>
<span id="cb562-30"><a href="#cb562-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> n <span class="op">=</span> n <span class="op">-</span> <span class="fl">1</span></span>
<span id="cb562-31"><a href="#cb562-31" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 finished in 0.5 seconds on worker 2
2 finished in 0.55 seconds on worker 3
4 finished in 0.23 seconds on worker 3
3 finished in 0.88 seconds on worker 2
6 finished in 0.04 seconds on worker 2
5 finished in 0.99 seconds on worker 3
8 finished in 0.3 seconds on worker 3
7 finished in 0.98 seconds on worker 2
10 finished in 0.33 seconds on worker 2
11 finished in 0.06 seconds on worker 2
9 finished in 0.84 seconds on worker 3
12 finished in 0.67 seconds on worker 2</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="262">
<pre><code>4.118156453</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="Local invocations">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Local invocations
</div>
</div>
<div class="callout-body-container callout-body">
<p>When data is stored on a different node from the execution node, data is necessarily copied over to the remote node for execution. However, when the destination node is the local node, i.e., the calling process id is the same as the remote node id, it is executed as a local call. It is usually (not always) executed in a different task, but there is no serialization/deserialization of data. Consequently, the call refers to the same object instances as passed, i.e., no copies are created.</p>
<div id="205be491" class="cell" data-execution_count="308">
<div class="sourceCode cell-code" id="cb565"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb565-1"><a href="#cb565-1" aria-hidden="true" tabindex="-1"></a>rc <span class="op">=</span> <span class="fu">RemoteChannel</span>(() <span class="op">-&gt;</span> <span class="fu">Channel</span>(<span class="fl">3</span>))  <span class="co"># RemoteChannel created on local node</span></span>
<span id="cb565-2"><a href="#cb565-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb565-3"><a href="#cb565-3" aria-hidden="true" tabindex="-1"></a>v <span class="op">=</span> [<span class="fl">0</span>]  <span class="co"># array in Julia has stable memory address</span></span>
<span id="cb565-4"><a href="#cb565-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb565-5"><a href="#cb565-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span id="cb565-6"><a href="#cb565-6" aria-hidden="true" tabindex="-1"></a>    v[<span class="fl">1</span>] <span class="op">=</span> i  <span class="co"># reusing v</span></span>
<span id="cb565-7"><a href="#cb565-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">put!</span>(rc, v)</span>
<span id="cb565-8"><a href="#cb565-8" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb565-9"><a href="#cb565-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb565-10"><a href="#cb565-10" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> [<span class="fu">take!</span>(rc) for _ <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>]</span>
<span id="cb565-11"><a href="#cb565-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb565-12"><a href="#cb565-12" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(res)</span>
<span id="cb565-13"><a href="#cb565-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb565-14"><a href="#cb565-14" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="fu">map</span>(objectid, res))</span>
<span id="cb565-15"><a href="#cb565-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb565-16"><a href="#cb565-16" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="st">"Num unique obejcts: "</span>, <span class="fu">length</span>(<span class="fu">unique</span>(<span class="fu">map</span>(objectid, res))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[3], [3], [3]]
UInt64[0x8d26183d637b3471, 0x8d26183d637b3471, 0x8d26183d637b3471]
Num unique obejcts: 1</code></pre>
</div>
</div>
<p>In general, this is not an issue. If the local node is also being used as a compute node, and the arguments used post the call, this behavior needs to be factored in and if required deep copies of arguments.</p>
</div>
</div>
<ul>
<li>Shared arrays</li>
</ul>
<p>Shared arrays use system shared memory to map the same array across many processes.</p>
<p>Each “participating” process has access to the <strong>entire</strong> array, which is totally different from the <code>DArray</code> defined in <code>DistributedArrays.jl</code>, of which each process has local access to just a chunk (i.e., no two processes share the same chunk).</p>
<p>A <code>SharedArray</code> defined in <code>SharedArrays</code> module is a good choice when you want to have a large amount of data jointly accessible to two or more processes <strong>on the same machine</strong>.</p>
<p>In cases where an algorithm insists on an <code>Array</code> input, the underlying array can be retrieved from a <code>SharedArray</code> by calling <code>sdata()</code>. For other <code>AbstractArray</code> types, <code>sdata()</code> just returns the object itself.</p>
<p>The constructor for a shared array is of the form: <code>SharedArray{T, N}(dims::NTuple; init=false, pids=Int[])</code>, by which we can construct an <code>N</code>-dimensional shared array of <strong>a bits type</strong> (check whether an element is supported using <code>isbits()</code>) <code>T</code> and size <code>dims</code> across the processes specified by <code>pids</code>. If an initialization function of the form <code>f(S::SharedArray)</code> is passed to <code>init</code>, then it is called on all the participating workers. You can specify that each worker runs the <code>init</code> function on a distinct portion of the array, thereby parallelizing initialization.</p>
<div id="dd6fb0ef" class="cell" data-execution_count="309">
<div class="sourceCode cell-code" id="cb567"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb567-1"><a href="#cb567-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@everywhere</span> <span class="im">using</span> <span class="bu">SharedArrays</span></span>
<span id="cb567-2"><a href="#cb567-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb567-3"><a href="#cb567-3" aria-hidden="true" tabindex="-1"></a>S <span class="op">=</span> <span class="fu">SharedArray</span><span class="dt">{Int, 2}</span>((<span class="fl">3</span>, <span class="fl">4</span>), init <span class="op">=</span> S <span class="op">-&gt;</span> S[<span class="fu">localindices</span>(S)] <span class="op">=</span> <span class="fu">repeat</span>([<span class="fu">myid</span>()], <span class="fu">length</span>(<span class="fu">localindices</span>(S))))</span>
<span id="cb567-4"><a href="#cb567-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb567-5"><a href="#cb567-5" aria-hidden="true" tabindex="-1"></a><span class="co"># localindices(S): return a range describing the "default" indices to be handled by the current process.</span></span>
<span id="cb567-6"><a href="#cb567-6" aria-hidden="true" tabindex="-1"></a><span class="co"># indexpids(S): return the current worker's index (starting from 1, not the same as the actual pid) in the list of workers mapping the SharedArray, or 0 if the SharedArray is not mapped onto the current process.</span></span>
<span id="cb567-7"><a href="#cb567-7" aria-hidden="true" tabindex="-1"></a><span class="co"># procs(S): return the list of pids mapping the SharedArray.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="264">
<pre><code>3×4 SharedMatrix{Int64}:
 2  2  3  3
 2  2  3  3
 2  2  3  3</code></pre>
</div>
</div>
<p><strong>Note:</strong> because any process mapping the <code>SharedArray</code> has access to the entire array, you must take consideration on possible operation conflicts.</p>
</section>
<section id="parallel-loops-and-map" class="level5" data-number="2.14.3.4">
<h5 data-number="2.14.3.4" class="anchored" data-anchor-id="parallel-loops-and-map"><span class="header-section-number">2.14.3.4</span> Parallel loops and map</h5>
<ol type="1">
<li>Looping and then reducing</li>
</ol>
<p>Many iterations run independently over several processes, and then their results are combined using some function (the result of each iteration is taken as the value of the last expression inside the loop) . The combination process is called a reduction. In code, this typically looks like the pattern <code>x = f(x, v[i])</code>, where <code>x</code> is the accumulator, <code>f</code> is the reduction function, and <code>v[i]</code> are the elements being reduced. It is desirable for <code>f</code> to be associative, so that it does not matter what order the operations are performed in.</p>
<div id="85cecabb" class="cell" data-execution_count="310">
<div class="sourceCode cell-code" id="cb569"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb569-1"><a href="#cb569-1" aria-hidden="true" tabindex="-1"></a><span class="co"># When reducer is given, it will be blocked and return the final result of reduction process.</span></span>
<span id="cb569-2"><a href="#cb569-2" aria-hidden="true" tabindex="-1"></a><span class="co"># @distributed [reducer] for var = range</span></span>
<span id="cb569-3"><a href="#cb569-3" aria-hidden="true" tabindex="-1"></a><span class="co">#     body</span></span>
<span id="cb569-4"><a href="#cb569-4" aria-hidden="true" tabindex="-1"></a><span class="co"># end</span></span>
<span id="cb569-5"><a href="#cb569-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb569-6"><a href="#cb569-6" aria-hidden="true" tabindex="-1"></a><span class="co"># reducer is optional.</span></span>
<span id="cb569-7"><a href="#cb569-7" aria-hidden="true" tabindex="-1"></a><span class="co"># If it is omitted, then it will return a Task object immediately without waiting for completion.</span></span>
<span id="cb569-8"><a href="#cb569-8" aria-hidden="true" tabindex="-1"></a><span class="co"># You can prefix @sync or add wait(t) or fetch(t) (returns nothing) after it to wait for completion.</span></span>
<span id="cb569-9"><a href="#cb569-9" aria-hidden="true" tabindex="-1"></a> <span class="co"># @sync @distributed for var = range</span></span>
<span id="cb569-10"><a href="#cb569-10" aria-hidden="true" tabindex="-1"></a> <span class="co">#    body</span></span>
<span id="cb569-11"><a href="#cb569-11" aria-hidden="true" tabindex="-1"></a> <span class="co"># end</span></span>
<span id="cb569-12"><a href="#cb569-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb569-13"><a href="#cb569-13" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> <span class="pp">@distributed</span> (vcat) <span class="cf">for</span> i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span></span>
<span id="cb569-14"><a href="#cb569-14" aria-hidden="true" tabindex="-1"></a>    [(<span class="fu">myid</span>(), i)]</span>
<span id="cb569-15"><a href="#cb569-15" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb569-16"><a href="#cb569-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb569-17"><a href="#cb569-17" aria-hidden="true" tabindex="-1"></a>res</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="265">
<pre><code>6-element Vector{Tuple{Int64, Int64}}:
 (2, 1)
 (2, 2)
 (2, 3)
 (3, 4)
 (3, 5)
 (3, 6)</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Mapping</li>
</ol>
<p>If we merely want to apply a function to all elements in some collection, we can use parallelized map, implemented in Julia as the <code>pmap()</code> function.</p>
<div id="653777da" class="cell" data-execution_count="311">
<div class="sourceCode cell-code" id="cb571"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb571-1"><a href="#cb571-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LinearAlgebra</span></span>
<span id="cb571-2"><a href="#cb571-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb571-3"><a href="#cb571-3" aria-hidden="true" tabindex="-1"></a>M <span class="op">=</span> <span class="dt">Matrix</span>{<span class="dt">Float64</span>}[<span class="fu">rand</span>(<span class="fl">1000</span>, <span class="fl">1000</span>) for _ <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>]</span>
<span id="cb571-4"><a href="#cb571-4" aria-hidden="true" tabindex="-1"></a><span class="fu">pmap</span>(svdvals, M)  <span class="co"># calculate the singular values of several matrices in parallel</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="266">
<pre><code>10-element Vector{Vector{Float64}}:
 [499.79679885693923, 18.38329981098877, 18.13504957827479, 18.03902647832188, 17.96266157226113, 17.900590664350776, 17.812632711106865, 17.799135095257196, 17.75321377403185, 17.74884986706717  …  0.12862899278647885, 0.11607226057893819, 0.10311954532424052, 0.09877271936853954, 0.08290088194742752, 0.06955148590104983, 0.06456481667674498, 0.032973776992069596, 0.017414128706166567, 0.013848102591456921]
 [500.1505933307007, 18.286933282027977, 17.96778330579176, 17.94529885426076, 17.829526833127762, 17.812689508510235, 17.76419141512595, 17.673791231132704, 17.62014733202228, 17.56208421582004  …  0.13450823497726025, 0.11772522328505304, 0.10219613279239266, 0.08658559390518596, 0.08039026897383579, 0.06948594985302062, 0.0553534480406535, 0.043166090720678084, 0.009502109328058318, 0.007413419496910726]
 [499.93802718379703, 18.245481074658937, 18.0514265417282, 17.943708760345615, 17.905030146014088, 17.804173292686645, 17.772012655108295, 17.751207306106785, 17.63346722875819, 17.599410303197434  …  0.13511693414608025, 0.12159967933204514, 0.10009410734669874, 0.09733404504064472, 0.08261006744473588, 0.070327491499848, 0.05045521672240982, 0.03840940303990619, 0.0064086388406943496, 0.005197025112704688]
 [500.40906678017507, 18.237025238851405, 18.013198825052832, 17.966211160612072, 17.83209099323381, 17.80777431780662, 17.780512293878243, 17.728969870599297, 17.580919777114836, 17.559361855711224  …  0.12042348272501828, 0.11529749516204225, 0.09818914662643448, 0.08269033269987981, 0.0816520762137033, 0.06549884474462586, 0.05152637928791907, 0.04435613250853343, 0.024990747660403795, 0.002696146447039039]
 [500.58952277956024, 18.423303226931147, 18.06986920554837, 17.952305152969704, 17.839475751411058, 17.75518143094209, 17.69822183113631, 17.674718837951854, 17.64996453061288, 17.592963850562185  …  0.13063394689263116, 0.12430607157847853, 0.1074046746905318, 0.09787829202705449, 0.07888487107545679, 0.06809677099868564, 0.039349176047031136, 0.01974204840883153, 0.017222315150805873, 0.011454674834089577]
 [500.01996903853893, 18.126575962719198, 18.006454569319196, 17.888865984690757, 17.83860935944013, 17.807930780898257, 17.73671037230043, 17.669666940738804, 17.625192993586843, 17.546824477461655  …  0.14162053439522493, 0.12068588961919258, 0.11197702285816027, 0.09537142468173265, 0.08181013811345315, 0.06823646661904631, 0.051547105209096195, 0.037929278786833595, 0.02855215911727032, 0.0038092021005507017]
 [500.229097139824, 18.10453224943811, 18.049116482867777, 17.9573598088194, 17.84068641965531, 17.781706349897302, 17.75270763057804, 17.711268642271797, 17.625309566501432, 17.603413679631213  …  0.1323365287833669, 0.12639736237046642, 0.10162622107933063, 0.09581020413179003, 0.06731744608321613, 0.06226972026336506, 0.048646248399650545, 0.025756578952127584, 0.02024899813520592, 0.0034040075346289007]
 [500.20058569902585, 18.192042248403684, 18.078275009964234, 17.982007255329577, 17.92739711691456, 17.87235247229389, 17.819495274752075, 17.692493419176348, 17.63615562987625, 17.583716375112722  …  0.13391636025549528, 0.11915389682631942, 0.11551510123552947, 0.09031339497022907, 0.0790008363928607, 0.07082893292790585, 0.04658844538729816, 0.03207102540713908, 0.027060128160978393, 0.008610598739668695]
 [500.487266314328, 18.09562149531164, 18.036595353983927, 17.914073859006205, 17.828540446351344, 17.73569532854957, 17.710696961098062, 17.627188781402683, 17.574025446441492, 17.507641601164913  …  0.14085647553138417, 0.12457807476032091, 0.10347250946913344, 0.0967536951126497, 0.09125001592538369, 0.07058204832222062, 0.0582570300040408, 0.03795544440529902, 0.03036130184306497, 0.005366312667748041]
 [500.072959365015, 18.128462186963734, 18.00246204831715, 17.939779198600117, 17.928299228352827, 17.844850222373566, 17.741379302982395, 17.629192992612108, 17.622268298746764, 17.535561228347934  …  0.149434670708807, 0.12488864948849596, 0.11391338803480877, 0.08882181183475968, 0.08402024406178926, 0.07147766138553774, 0.04690176146569771, 0.034008208380566944, 0.016493690380074928, 0.00653453225448739]</code></pre>
</div>
</div>
</section>
<section id="noteworthy-external-parallel-packages" class="level5" data-number="2.14.3.5">
<h5 data-number="2.14.3.5" class="anchored" data-anchor-id="noteworthy-external-parallel-packages"><span class="header-section-number">2.14.3.5</span> Noteworthy external parallel packages</h5>
<p>There are also other packages implementing parallelism or providing data structures suitable for parallelism in Julia.</p>
<p>In addition, we have also several packages used for GPU programming in Julia.</p>
</section>
</section>
<section id="running-external-programs" class="level4" data-number="2.14.4">
<h4 data-number="2.14.4" class="anchored" data-anchor-id="running-external-programs"><span class="header-section-number">2.14.4</span> Running external programs</h4>
<section id="creating-cmd-objects" class="level5" data-number="2.14.4.1">
<h5 data-number="2.14.4.1" class="anchored" data-anchor-id="creating-cmd-objects"><span class="header-section-number">2.14.4.1</span> Creating <code>Cmd</code> objects</h5>
<p>There are two ways to create a <code>Cmd</code> objects:</p>
<ol type="1">
<li>Put the command between backticks (<code>`</code>):</li>
</ol>
<div id="eed69fc4" class="cell" data-execution_count="312">
<div class="sourceCode cell-code" id="cb573"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb573-1"><a href="#cb573-1" aria-hidden="true" tabindex="-1"></a><span class="ss">`echo hello, world`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="267">
<div class="ansi-escaped-output">
<pre>`<span style="text-decoration:underline">echo</span> <span style="text-decoration:underline">hello,</span> <span style="text-decoration:underline">world</span>`</pre>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Use <code>Cmd()</code> constructor:</li>
</ol>
<div id="5b6d6fc9" class="cell" data-execution_count="313">
<div class="sourceCode cell-code" id="cb574"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb574-1"><a href="#cb574-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Cmd</span>(<span class="ss">`echo hello, world`</span>)  <span class="co"># from an existing Cmd</span></span>
<span id="cb574-2"><a href="#cb574-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Cmd</span>([<span class="st">"echo"</span>, <span class="st">"hello, world"</span>])  <span class="co"># from a list of arguments</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="268">
<div class="ansi-escaped-output">
<pre>`<span style="text-decoration:underline">echo</span> <span style="text-decoration:underline">'hello, world'</span>`</pre>
</div>
</div>
</div>
<p>Keyword arguments of <code>Cmd()</code> allow you to specify several aspects of the <code>Cmd</code>’s execution environment.</p>
<p>For example, you can specify a working directory for the command via <code>dir</code>, setting execution environment variables via <code>env</code>, which can also be set by two helper functions <code>setenv()</code> and <code>addenv()</code>.</p>
</section>
<section id="running-cmd-objects" class="level5" data-number="2.14.4.2">
<h5 data-number="2.14.4.2" class="anchored" data-anchor-id="running-cmd-objects"><span class="header-section-number">2.14.4.2</span> Running <code>Cmd</code> objects</h5>
<p>The command is never run with a shell. Instead, Julia will do all of the following processes itself. In fact, the command is run as Julia’s immediate child process, using <code>folk</code> and <code>exec</code> calls.</p>
<p>Julia provides several ways to run a <code>Cmd</code> object:</p>
<ol type="1">
<li><code>run()</code>:</li>
</ol>
<div id="e706df80" class="cell" data-execution_count="314">
<div class="sourceCode cell-code" id="cb575"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb575-1"><a href="#cb575-1" aria-hidden="true" tabindex="-1"></a><span class="fu">run</span>(<span class="ss">`echo hello, world`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>hello, world</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="269">
<div class="ansi-escaped-output">
<pre>Process(`<span style="text-decoration:underline">echo</span> <span style="text-decoration:underline">hello,</span> <span style="text-decoration:underline">world</span>`, ProcessExited(0))</pre>
</div>
</div>
</div>
<ol start="2" type="1">
<li><code>read()</code>:</li>
</ol>
<div id="037c8012" class="cell" data-execution_count="315">
<div class="sourceCode cell-code" id="cb577"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb577-1"><a href="#cb577-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read</span>(<span class="ss">`echo hello, world`</span>, <span class="dt">String</span>)  <span class="co"># run the command and return the resulting output as a `String`, or as an array of bytes if `String` is omitted</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="270">
<pre><code>"hello, world\n"</code></pre>
</div>
</div>
<p>As can be seen, the resulting string has a single trailing newline. You can use <code>readchomp()</code>, equivalent to <code>chomp(read(x, String))</code> to remove it (<code>chomp()</code> can be used to remove a single trailing newline from a string).</p>
<ol start="3" type="1">
<li>Use <code>open()</code> to read from or write to an external command:</li>
</ol>
<div id="e7bc9a5c" class="cell" data-execution_count="316">
<div class="sourceCode cell-code" id="cb579"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb579-1"><a href="#cb579-1" aria-hidden="true" tabindex="-1"></a><span class="co"># writes go to the command's standard input (stdio = stdout)</span></span>
<span id="cb579-2"><a href="#cb579-2" aria-hidden="true" tabindex="-1"></a><span class="fu">open</span>(<span class="ss">`sort -n`</span>, <span class="st">"w"</span>, <span class="cn">stdout</span>) <span class="cf">do</span> io</span>
<span id="cb579-3"><a href="#cb579-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="op">=</span> <span class="fl">6</span><span class="op">:-</span><span class="fl">1</span><span class="op">:</span><span class="fl">1</span></span>
<span id="cb579-4"><a href="#cb579-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">println</span>(io, i)</span>
<span id="cb579-5"><a href="#cb579-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb579-6"><a href="#cb579-6" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb579-7"><a href="#cb579-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb579-8"><a href="#cb579-8" aria-hidden="true" tabindex="-1"></a><span class="co"># reads from the command's standard output (stdio = stdin)</span></span>
<span id="cb579-9"><a href="#cb579-9" aria-hidden="true" tabindex="-1"></a><span class="fu">open</span>(<span class="ss">`echo "hello, world"`</span>, <span class="st">"r"</span>, <span class="cn">stdin</span>) <span class="cf">do</span> io</span>
<span id="cb579-10"><a href="#cb579-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">readchomp</span>(io)</span>
<span id="cb579-11"><a href="#cb579-11" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1
2
3
4
5
6</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="271">
<pre><code>"hello, world"</code></pre>
</div>
</div>
<p><strong>Note</strong>: the program name and individual arguments in a command can be accessed and iterated over as if the command were an array of strings:</p>
<div id="f537f57c" class="cell" data-execution_count="317">
<div class="sourceCode cell-code" id="cb582"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb582-1"><a href="#cb582-1" aria-hidden="true" tabindex="-1"></a><span class="fu">collect</span>(<span class="ss">`cut -f 1,3,5 test.txt`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="272">
<pre><code>4-element Vector{String}:
 "cut"
 "-f"
 "1,3,5"
 "test.txt"</code></pre>
</div>
</div>
<div id="7305b462" class="cell" data-execution_count="318">
<div class="sourceCode cell-code" id="cb584"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb584-1"><a href="#cb584-1" aria-hidden="true" tabindex="-1"></a><span class="ss">`cut -f 1,3,5 test.txt`</span>[<span class="fl">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="273">
<pre><code>"-f"</code></pre>
</div>
</div>
</section>
<section id="command-interpolation" class="level5" data-number="2.14.4.3">
<h5 data-number="2.14.4.3" class="anchored" data-anchor-id="command-interpolation"><span class="header-section-number">2.14.4.3</span> Command interpolation</h5>
<p>You can use <code>$</code> for interpolation much as you would <strong>in a string literal</strong>, and Julia will know when the inserted string needs to be quoted:</p>
<div id="b6b773bd" class="cell" data-execution_count="319">
<div class="sourceCode cell-code" id="cb586"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb586-1"><a href="#cb586-1" aria-hidden="true" tabindex="-1"></a>path <span class="op">=</span> <span class="st">"/Volumes/External HD"</span></span>
<span id="cb586-2"><a href="#cb586-2" aria-hidden="true" tabindex="-1"></a>name <span class="op">=</span> <span class="st">"data"</span></span>
<span id="cb586-3"><a href="#cb586-3" aria-hidden="true" tabindex="-1"></a>ext <span class="op">=</span> <span class="st">"csv"</span></span>
<span id="cb586-4"><a href="#cb586-4" aria-hidden="true" tabindex="-1"></a><span class="ss">`sort $path/$name.$ext`</span>  <span class="co"># due to the command is never interpreted by a shell, there's no need for actual quoting, which is only for presentation to the user</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="274">
<div class="ansi-escaped-output">
<pre>`<span style="text-decoration:underline">sort</span> <span style="text-decoration:underline">'/Volumes/External HD/data.csv'</span>`</pre>
</div>
</div>
</div>
<p>If you want to interpolate multiple words, just using an iterable container:</p>
<div id="bf574b85" class="cell" data-execution_count="320">
<div class="sourceCode cell-code" id="cb587"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb587-1"><a href="#cb587-1" aria-hidden="true" tabindex="-1"></a>files <span class="op">=</span> [<span class="st">"/etc/passwd"</span>, <span class="st">"/Volumes/External HD/data.csv"</span>]</span>
<span id="cb587-2"><a href="#cb587-2" aria-hidden="true" tabindex="-1"></a><span class="ss">`grep foo $files`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="275">
<div class="ansi-escaped-output">
<pre>`<span style="text-decoration:underline">grep</span> <span style="text-decoration:underline">foo</span> <span style="text-decoration:underline">/etc/passwd</span> <span style="text-decoration:underline">'/Volumes/External HD/data.csv'</span>`</pre>
</div>
</div>
</div>
<p>If you interpolate an array as part of a shell word, the shell’s Cartesian product generation is simulated:</p>
<div id="c271d9d0" class="cell" data-execution_count="321">
<div class="sourceCode cell-code" id="cb588"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb588-1"><a href="#cb588-1" aria-hidden="true" tabindex="-1"></a>names <span class="op">=</span> [<span class="st">"foo"</span>, <span class="st">"bar"</span>, <span class="st">"baz"</span>]</span>
<span id="cb588-2"><a href="#cb588-2" aria-hidden="true" tabindex="-1"></a><span class="ss">`cat $names.txt`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="276">
<div class="ansi-escaped-output">
<pre>`<span style="text-decoration:underline">cat</span> <span style="text-decoration:underline">foo.txt</span> <span style="text-decoration:underline">bar.txt</span> <span style="text-decoration:underline">baz.txt</span>`</pre>
</div>
</div>
</div>
<p>Since you can interpolate literal arrays, no need to create temporary array objects first:</p>
<div id="caa905cd" class="cell" data-execution_count="322">
<div class="sourceCode cell-code" id="cb589"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb589-1"><a href="#cb589-1" aria-hidden="true" tabindex="-1"></a><span class="ss">`cat $["foo", "bar"].$["png", "jpeg"]`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="277">
<div class="ansi-escaped-output">
<pre>`<span style="text-decoration:underline">cat</span> <span style="text-decoration:underline">foo.png</span> <span style="text-decoration:underline">foo.jpeg</span> <span style="text-decoration:underline">bar.png</span> <span style="text-decoration:underline">bar.jpeg</span>`</pre>
</div>
</div>
</div>
</section>
<section id="quoting" class="level5" data-number="2.14.4.4">
<h5 data-number="2.14.4.4" class="anchored" data-anchor-id="quoting"><span class="header-section-number">2.14.4.4</span> Quoting</h5>
<p>If you just want to treat some special characters as is, then quote it with paired single quotes <code>''</code>, or quote it with paired double quotes <code>""</code>, which means that all characters within paired single quotes will have no special meanings, but some may have within paired double quotes:</p>
<div id="dc9e5f73" class="cell" data-execution_count="323">
<div class="sourceCode cell-code" id="cb590"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb590-1"><a href="#cb590-1" aria-hidden="true" tabindex="-1"></a><span class="ss">`cat '$file'`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="278">
<div class="ansi-escaped-output">
<pre>`<span style="text-decoration:underline">cat</span> <span style="text-decoration:underline">'$file'</span>`</pre>
</div>
</div>
</div>
<div id="11b8aa5b" class="cell" data-execution_count="324">
<div class="sourceCode cell-code" id="cb591"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb591-1"><a href="#cb591-1" aria-hidden="true" tabindex="-1"></a>file <span class="op">=</span> <span class="st">"text.txt"</span></span>
<span id="cb591-2"><a href="#cb591-2" aria-hidden="true" tabindex="-1"></a><span class="ss">`cat "$file"`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="279">
<div class="ansi-escaped-output">
<pre>`<span style="text-decoration:underline">cat</span> <span style="text-decoration:underline">text.txt</span>`</pre>
</div>
</div>
</div>
<p>As can be seen, this mechanism used here is the same one as is used in shell, so you can just copy and paste a valid shell commands into here, and it will works properly.</p>
</section>
<section id="pipelines" class="level5" data-number="2.14.4.5">
<h5 data-number="2.14.4.5" class="anchored" data-anchor-id="pipelines"><span class="header-section-number">2.14.4.5</span> Pipelines</h5>
<p>Shell metacharacters, such as <code>|</code>, <code>&amp;</code>, and <code>&gt;</code>, need to be quoted (or escaped) inside of Julia’s backticks:</p>
<div id="1281516d" class="cell" data-execution_count="325">
<div class="sourceCode cell-code" id="cb592"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb592-1"><a href="#cb592-1" aria-hidden="true" tabindex="-1"></a><span class="fu">run</span>(<span class="ss">`echo hello \| sort`</span>)  <span class="co"># here, | is not a pipe, just a normal character</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>hello | sort</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="280">
<div class="ansi-escaped-output">
<pre>Process(`<span style="text-decoration:underline">echo</span> <span style="text-decoration:underline">hello</span> <span style="text-decoration:underline">'|'</span> <span style="text-decoration:underline">sort</span>`, ProcessExited(0))</pre>
</div>
</div>
</div>
<ol type="1">
<li>Use <code>pipeline()</code> to construct a pipe:</li>
</ol>
<div id="98a32113" class="cell" data-execution_count="326">
<div class="sourceCode cell-code" id="cb594"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb594-1"><a href="#cb594-1" aria-hidden="true" tabindex="-1"></a><span class="fu">run</span>(<span class="fu">pipeline</span>(<span class="ss">`cut -d : -f 3 /etc/passwd`</span>, <span class="ss">`head -n 6`</span>, <span class="ss">`sort -n`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0
1
2
3
4
5</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="281">
<div class="ansi-escaped-output">
<pre>Base.ProcessChain(Base.Process[Process(`<span style="text-decoration:underline">cut</span> <span style="text-decoration:underline">-d</span> <span style="text-decoration:underline">:</span> <span style="text-decoration:underline">-f</span> <span style="text-decoration:underline">3</span> <span style="text-decoration:underline">/etc/passwd</span>`, ProcessExited(0)), Process(`<span style="text-decoration:underline">head</span> <span style="text-decoration:underline">-n</span> <span style="text-decoration:underline">6</span>`, ProcessExited(0)), Process(`<span style="text-decoration:underline">sort</span> <span style="text-decoration:underline">-n</span>`, ProcessExited(0))], Base.DevNull(), Base.DevNull(), Base.DevNull())</pre>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Run multiple commands in parallel using <code>&amp;</code>:</li>
</ol>
<div id="dce434e2" class="cell" data-execution_count="327">
<div class="sourceCode cell-code" id="cb596"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb596-1"><a href="#cb596-1" aria-hidden="true" tabindex="-1"></a><span class="fu">run</span>(<span class="ss">`echo hello`</span> <span class="op">&amp;</span> <span class="ss">`echo world`</span> <span class="op">&amp;</span> <span class="ss">`echo Tom`</span>)  <span class="co"># the order of the output here is non-deterministic</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>hello
world
Tom</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="282">
<div class="ansi-escaped-output">
<pre>Base.ProcessChain(Base.Process[Process(`<span style="text-decoration:underline">echo</span> <span style="text-decoration:underline">hello</span>`, ProcessExited(0)), Process(`<span style="text-decoration:underline">echo</span> <span style="text-decoration:underline">world</span>`, ProcessExited(0)), Process(`<span style="text-decoration:underline">echo</span> <span style="text-decoration:underline">Tom</span>`, ProcessExited(0))], Base.DevNull(), Base.DevNull(), Base.DevNull())</pre>
</div>
</div>
</div>
<p>Combine both <code>|</code> and <code>&amp;</code>:</p>
<div id="f7a88a0b" class="cell" data-execution_count="328">
<div class="sourceCode cell-code" id="cb598"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb598-1"><a href="#cb598-1" aria-hidden="true" tabindex="-1"></a><span class="fu">run</span>(<span class="fu">pipeline</span>(<span class="ss">`echo world`</span> <span class="op">&amp;</span> <span class="ss">`echo hello`</span>, <span class="ss">`sort`</span>))  <span class="co"># a single UNIX pipe is created and written to by both echo processes, and the other end of the pipe is read from by the sort command</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>hello
world</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="283">
<div class="ansi-escaped-output">
<pre>Base.ProcessChain(Base.Process[Process(`<span style="text-decoration:underline">echo</span> <span style="text-decoration:underline">world</span>`, ProcessExited(0)), Process(`<span style="text-decoration:underline">echo</span> <span style="text-decoration:underline">hello</span>`, ProcessExited(0)), Process(`<span style="text-decoration:underline">sort</span>`, ProcessExited(0))], Base.DevNull(), Base.DevNull(), Base.DevNull())</pre>
</div>
</div>
</div>
<div id="6899493c" class="cell" data-execution_count="329">
<div class="sourceCode cell-code" id="cb600"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb600-1"><a href="#cb600-1" aria-hidden="true" tabindex="-1"></a><span class="fu">producer</span>() <span class="op">=</span> <span class="ss">`awk 'BEGIN{for (i = 0; i &lt;= 6; i++) {print i; system("sleep 1")}}'`</span></span>
<span id="cb600-2"><a href="#cb600-2" aria-hidden="true" tabindex="-1"></a><span class="fu">consumer</span>(flag) <span class="op">=</span> <span class="ss">`awk '{print "'$flag' "$1; system("sleep 2")}'`</span>  <span class="co"># to make the interpolation $flag work, you have to put it between single quotes</span></span>
<span id="cb600-3"><a href="#cb600-3" aria-hidden="true" tabindex="-1"></a><span class="fu">run</span>(<span class="fu">pipeline</span>(<span class="fu">producer</span>(), <span class="fu">consumer</span>(<span class="st">"A"</span>) <span class="op">&amp;</span> <span class="fu">consumer</span>(<span class="st">"B"</span>) <span class="op">&amp;</span> <span class="fu">consumer</span>(<span class="st">"C"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>C 3
B 2
A 0
B 5
A 1
C 6
A 4</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="284">
<div class="ansi-escaped-output">
<pre>Base.ProcessChain(Base.Process[Process(`<span style="text-decoration:underline">awk</span> <span style="text-decoration:underline">'BEGIN{for (i = 0; i &lt;= 6; i++) {print i; system("sleep 1")}}'</span>`, ProcessExited(0)), Process(`<span style="text-decoration:underline">awk</span> <span style="text-decoration:underline">'{print "A "$1; system("sleep 2")}'</span>`, ProcessExited(0)), Process(`<span style="text-decoration:underline">awk</span> <span style="text-decoration:underline">'{print "B "$1; system("sleep 2")}'</span>`, ProcessExited(0)), Process(`<span style="text-decoration:underline">awk</span> <span style="text-decoration:underline">'{print "C "$1; system("sleep 2")}'</span>`, ProcessExited(0))], Base.DevNull(), Base.DevNull(), Base.DevNull())</pre>
</div>
</div>
</div>
</section>
</section>
</section>
</section>
<section id="julia-documentation-system" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="julia-documentation-system"><span class="header-section-number">3</span> Julia documentation system</h2>
<div id="b1b1d7aa" class="cell" data-execution_count="330">
<div class="sourceCode cell-code" id="cb602"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb602-1"><a href="#cb602-1" aria-hidden="true" tabindex="-1"></a><span class="st">"Store propellant for a rocket"</span></span>
<span id="cb602-2"><a href="#cb602-2" aria-hidden="true" tabindex="-1"></a><span class="kw">abstract type</span> OhTank <span class="kw">end</span></span>
<span id="cb602-3"><a href="#cb602-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb602-4"><a href="#cb602-4" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb602-5"><a href="#cb602-5" aria-hidden="true" tabindex="-1"></a><span class="st">    total(t::OhTank) -&gt; Float64</span></span>
<span id="cb602-6"><a href="#cb602-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb602-7"><a href="#cb602-7" aria-hidden="true" tabindex="-1"></a><span class="st">Mass of propellant tank `t` when it is full.</span></span>
<span id="cb602-8"><a href="#cb602-8" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb602-9"><a href="#cb602-9" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> totalmass <span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="285">
<pre><code>totalmass</code></pre>
</div>
</div>
<p>The Julia documentation system works by prefixing a function or type definition with a regular Julia text string, quoted by double or triple quotes. This is totally different from a comment with the <code>#</code> symbol. Comments don’t get stored in the Julia help system.</p>
<p>Inside this text string, you can document your function or type definition using markdown syntax.</p>
</section>
<section id="modules-and-pakcages" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="modules-and-pakcages"><span class="header-section-number">4</span> Modules and Pakcages</h2>
<p>The core Julia language imposes very little; many functions are extended by modules and packages.</p>
<p>Julia code is organized into files, modules, and packages. Files containing Julia code use the <code>.jl</code> file extension.</p>
<section id="modules" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="modules"><span class="header-section-number">4.1</span> Modules</h3>
<p>Modules help organize code into coherent units. They are delimited syntactically inside <code>module &lt;NameOfModule&gt; ... end</code>, and have the following features:</p>
<ol type="1">
<li><p>Modules are separate namespaces, each introducing a new global scope. This allows the same name to be used for different functions or global variables without conflict, as long as they are in separate modules.</p></li>
<li><p>Modules have facilities for detailed namespace management: each defines a set of names it exports, and can import names from other modules with <code>using</code> and <code>import</code>.</p></li>
<li><p>Modules can be precompiled for faster loading, and may contain code for runtime initialization.</p></li>
</ol>
<p>Module definition:</p>
<div id="13e7ed07" class="cell" data-execution_count="331">
<div class="sourceCode cell-code" id="cb604"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb604-1"><a href="#cb604-1" aria-hidden="true" tabindex="-1"></a><span class="kw">module</span> <span class="op">&lt;</span>NameOfModule<span class="op">&gt;</span></span>
<span id="cb604-2"><a href="#cb604-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb604-3"><a href="#cb604-3" aria-hidden="true" tabindex="-1"></a><span class="co"># using, import, export statements are usually here</span></span>
<span id="cb604-4"><a href="#cb604-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb604-5"><a href="#cb604-5" aria-hidden="true" tabindex="-1"></a><span class="fu">include</span>(<span class="st">"file1.jl"</span>)</span>
<span id="cb604-6"><a href="#cb604-6" aria-hidden="true" tabindex="-1"></a><span class="fu">include</span>(<span class="st">"file2.jl"</span>)</span>
<span id="cb604-7"><a href="#cb604-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb604-8"><a href="#cb604-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>Files and file names are mostly unrelated to modules, since modules are associated only with module expression. One can have multiple files per module, and multiple modules per file.</p></li>
<li><p><code>include</code> behaves as if the contents of the source file were evaluated in the global scope of the including module.</p></li>
<li><p>The recommended style is not to indent the body of the module. It is also common to use <code>UpperCamelCase</code> for module names, and use the plural form if applicable.</p></li>
</ol>
</div>
</div>
<section id="namespace-management" class="level4" data-number="4.1.1">
<h4 data-number="4.1.1" class="anchored" data-anchor-id="namespace-management"><span class="header-section-number">4.1.1</span> Namespace management</h4>
<p>Namespace management refers to the facilities the language offers for making names in a module available in other modules.</p>
<section id="qualified-names" class="level5" data-number="4.1.1.1">
<h5 data-number="4.1.1.1" class="anchored" data-anchor-id="qualified-names"><span class="header-section-number">4.1.1.1</span> Qualified names</h5>
<p>Names for functions, variables, and types in the global scope always belong to a module, called the parent module. One can use <code>parentmodule()</code> to find the parent module of a name.</p>
<p>One can also refer to those names outside their parent module by prefixing them with their module name, e.g.&nbsp;<code>Base.UnitRange</code>. This is called a qualified name.</p>
<p>The parent module may be accessible using a chain of submodules like <code>Base.Math.sin</code>, where <code>Base.Main</code> is called the module path.</p>
<p>Due to syntactic ambiguities, qualifying a name that contains only symbols, such as an operator, requires inserting a colon, e.g.&nbsp;<code>Base.:+</code>. A small number of operators additionally require parentheses, e.g.&nbsp;<code>Base.:(==)</code>.</p>
</section>
<section id="export-lists" class="level5" data-number="4.1.1.2">
<h5 data-number="4.1.1.2" class="anchored" data-anchor-id="export-lists"><span class="header-section-number">4.1.1.2</span> Export lists</h5>
<p>Names can be added to the export list of a module with <code>export</code>: these are symbols that are imported when <code>using</code> the module.</p>
<div id="a837f9ca" class="cell" data-execution_count="332">
<div class="sourceCode cell-code" id="cb605"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb605-1"><a href="#cb605-1" aria-hidden="true" tabindex="-1"></a><span class="kw">module</span> NiceStuff</span>
<span id="cb605-2"><a href="#cb605-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-3"><a href="#cb605-3" aria-hidden="true" tabindex="-1"></a><span class="kw">export</span> nice, DOG</span>
<span id="cb605-4"><a href="#cb605-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-5"><a href="#cb605-5" aria-hidden="true" tabindex="-1"></a><span class="co"># definitions of nice and DOG</span></span>
<span id="cb605-6"><a href="#cb605-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-7"><a href="#cb605-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In fact, a module can have multiple <code>export</code> statements in arbitrary locations.</p>
</section>
<section id="using-and-import" class="level5" data-number="4.1.1.3">
<h5 data-number="4.1.1.3" class="anchored" data-anchor-id="using-and-import"><span class="header-section-number">4.1.1.3</span> <code>using</code> and <code>import</code></h5>
<ol type="1">
<li><p><code>using</code>: brings <strong>the module name</strong> and <strong>the elements of the export list</strong> into the surrounding global namespace.</p></li>
<li><p><code>import</code>: brings only <strong>the module name</strong> into scope.</p></li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>To load a module from a locally defined module, a dot needs to be added before the module name like <code>using .ModuleName</code>.</p></li>
<li><p>One can specify which identifiers to be loaded in a module, e.g., <code>using .NiceStuff: nice, DOG</code>.</p></li>
<li><p>Renaming imported identifiers with <code>as</code>.</p></li>
</ol>
<div id="7f03ce0f" class="cell" data-execution_count="333">
<div class="sourceCode cell-code" id="cb606"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb606-1"><a href="#cb606-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">CSV</span> as C  <span class="co"># This only works with import</span></span>
<span id="cb606-2"><a href="#cb606-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">CSV</span>: read as rd</span>
<span id="cb606-3"><a href="#cb606-3" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">CSV</span>: read as rd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="how-does-julia-find-a-module" class="level4" data-number="4.1.2">
<h4 data-number="4.1.2" class="anchored" data-anchor-id="how-does-julia-find-a-module"><span class="header-section-number">4.1.2</span> How does Julia find a module</h4>
<ol type="1">
<li>Julia looks for module files in directories defined in the <code>LOAD_PATH</code> variable:</li>
</ol>
<div id="2710e177" class="cell" data-execution_count="334">
<div class="sourceCode cell-code" id="cb607"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb607-1"><a href="#cb607-1" aria-hidden="true" tabindex="-1"></a><span class="cn">LOAD_PATH</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="286">
<pre><code>3-element Vector{String}:
 "@"
 "@v#.#"
 "@stdlib"</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>To make it look in other places, add some more using <code>push!()</code>:</li>
</ol>
<div id="ade60fd8" class="cell" data-execution_count="335">
<div class="sourceCode cell-code" id="cb609"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb609-1"><a href="#cb609-1" aria-hidden="true" tabindex="-1"></a><span class="fu">push!</span>(<span class="cn">LOAD_PATH</span>, <span class="st">"/path/to/my/julia/projects"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="287">
<pre><code>4-element Vector{String}:
 "@"
 "@v#.#"
 "@stdlib"
 "/path/to/my/julia/projects"</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>To avoid doing this every time you run Julia, put this line into your startup file <code>~/.julia/config/startup.jl</code>, which runs each time you start an interactive Julia session.</p>
</div>
</div>
<ol start="3" type="1">
<li><p>Julia looks for files in those directories in the form of a package with the structure: <code>ModuleName/src/file.jl</code>.</p></li>
<li><p>Or, if not in package form, it will look for a filename that matches the name of your module.</p></li>
</ol>
</section>
</section>
<section id="standard-modules" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="standard-modules"><span class="header-section-number">4.2</span> Standard modules</h3>
<p>There are three most important modules:</p>
<ul>
<li>Core</li>
</ul>
<p>Core contains all identifiers considered “built in” to the language, i.e.&nbsp;part of the core language and not libraries.</p>
<p>Eevery module implicitly specifies <code>using Core</code>, since you cannot do anything without these definitions.</p>
<ul>
<li>Base</li>
</ul>
<p>Base contains basic functionality.</p>
<p>All modules implicitly contain <code>using Base</code>.</p>
<ul>
<li>Main</li>
</ul>
<p>Main is the top-level module, and Julia starts with Main set as the current module.</p>
<p>Variables defined at the prompt go in Main, and <code>varinfo()</code> lists variables in Main.</p>
</section>
<section id="packages" class="level3" data-number="4.3">
<h3 data-number="4.3" class="anchored" data-anchor-id="packages"><span class="header-section-number">4.3</span> Packages</h3>
<p>Julia uses <strong>git</strong> for organizing and controlling packages.</p>
<p>By convention, all packages are stored in git repositories.</p>
</section>
<section id="organizing-your-code-into-modules-and-packages" class="level3" data-number="4.4">
<h3 data-number="4.4" class="anchored" data-anchor-id="organizing-your-code-into-modules-and-packages"><span class="header-section-number">4.4</span> Organizing your code into modules and packages</h3>
<section id="setting-up-your-working-environment" class="level4" data-number="4.4.1">
<h4 data-number="4.4.1" class="anchored" data-anchor-id="setting-up-your-working-environment"><span class="header-section-number">4.4.1</span> Setting up your working environment</h4>
<p>In Julia, different environments can have totally different packages and versions installed from another environment.</p>
<p>This makes it possible that you can construct an environment tailored to your project, which makes your project completely reproducible.</p>
<div id="dc8fe67b" class="cell" data-execution_count="336">
<div class="sourceCode cell-code" id="cb611"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb611-1"><a href="#cb611-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Make the job directory in the shell mode</span></span>
<span id="cb611-2"><a href="#cb611-2" aria-hidden="true" tabindex="-1"></a>shell<span class="op">&gt;</span> mkdir job</span>
<span id="cb611-3"><a href="#cb611-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-4"><a href="#cb611-4" aria-hidden="true" tabindex="-1"></a><span class="co">## Activate the job environment in the package mode</span></span>
<span id="cb611-5"><a href="#cb611-5" aria-hidden="true" tabindex="-1"></a>(<span class="pp">@v1</span><span class="fl">.10</span>) pkg<span class="op">&gt;</span> activate job</span>
<span id="cb611-6"><a href="#cb611-6" aria-hidden="true" tabindex="-1"></a>  Activating <span class="kw">new</span> project at <span class="ss">`~/temp/job`</span></span>
<span id="cb611-7"><a href="#cb611-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-8"><a href="#cb611-8" aria-hidden="true" tabindex="-1"></a><span class="co">## Add packages into the job environment</span></span>
<span id="cb611-9"><a href="#cb611-9" aria-hidden="true" tabindex="-1"></a>(job) pkg<span class="op">&gt;</span> add CairoMakie ElectronDisplay</span>
<span id="cb611-10"><a href="#cb611-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-11"><a href="#cb611-11" aria-hidden="true" tabindex="-1"></a><span class="co">## Check what packages are added into the job environment</span></span>
<span id="cb611-12"><a href="#cb611-12" aria-hidden="true" tabindex="-1"></a>(job) pkg<span class="op">&gt;</span> status</span>
<span id="cb611-13"><a href="#cb611-13" aria-hidden="true" tabindex="-1"></a>Status <span class="ss">`~/temp/job/Project.toml`</span></span>
<span id="cb611-14"><a href="#cb611-14" aria-hidden="true" tabindex="-1"></a>  [<span class="fl">13f3</span>f980] CairoMakie v0<span class="fl">.11.5</span></span>
<span id="cb611-15"><a href="#cb611-15" aria-hidden="true" tabindex="-1"></a>  [d872a56f] ElectronDisplay v1<span class="fl">.0.1</span></span>
<span id="cb611-16"><a href="#cb611-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-17"><a href="#cb611-17" aria-hidden="true" tabindex="-1"></a><span class="co">## Julia adds packages into the job environment by adding information of packages into the following two files of the job environment:</span></span>
<span id="cb611-18"><a href="#cb611-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Project.toml: specifies what packages are added to this environment</span></span>
<span id="cb611-19"><a href="#cb611-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-20"><a href="#cb611-20" aria-hidden="true" tabindex="-1"></a>shell<span class="op">&gt;</span> cat Project.toml</span>
<span id="cb611-21"><a href="#cb611-21" aria-hidden="true" tabindex="-1"></a>[deps]</span>
<span id="cb611-22"><a href="#cb611-22" aria-hidden="true" tabindex="-1"></a>CairoMakie <span class="op">=</span> <span class="st">"13f3f980-e62b-5c42-98c6-ff1f3baf88f0"</span>  <span class="co"># The string is the universally unique identifier (UUID) of the CairoMakie package, which allows you to install different packages with the same package name. If there was another CairoMakie package, you should add this one with the command: add CairoMakie=13f3f980-e62b-5c42-98c6-ff1f3baf88f0</span></span>
<span id="cb611-23"><a href="#cb611-23" aria-hidden="true" tabindex="-1"></a>ElectronDisplay <span class="op">=</span> <span class="st">"d872a56f-244b-5cc9-b574-2017b5b909a8"</span></span>
<span id="cb611-24"><a href="#cb611-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-25"><a href="#cb611-25" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Manifest.toml: specifies the information of packages which those packages we just installed depend on</span></span>
<span id="cb611-26"><a href="#cb611-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-27"><a href="#cb611-27" aria-hidden="true" tabindex="-1"></a>shell<span class="op">&gt;</span> head Manifest.toml</span>
<span id="cb611-28"><a href="#cb611-28" aria-hidden="true" tabindex="-1"></a><span class="co"># This file is machine-generated - editing it directly is not advised</span></span>
<span id="cb611-29"><a href="#cb611-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-30"><a href="#cb611-30" aria-hidden="true" tabindex="-1"></a>julia_version <span class="op">=</span> <span class="st">"1.10.0"</span></span>
<span id="cb611-31"><a href="#cb611-31" aria-hidden="true" tabindex="-1"></a>manifest_format <span class="op">=</span> <span class="st">"2.0"</span></span>
<span id="cb611-32"><a href="#cb611-32" aria-hidden="true" tabindex="-1"></a>project_hash <span class="op">=</span> <span class="st">"666c5e651c78c84e1125a572f7fba0bc8b920e62"</span></span>
<span id="cb611-33"><a href="#cb611-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-34"><a href="#cb611-34" aria-hidden="true" tabindex="-1"></a>[[deps.AbstractFFTs]]</span>
<span id="cb611-35"><a href="#cb611-35" aria-hidden="true" tabindex="-1"></a>deps <span class="op">=</span> [<span class="st">"LinearAlgebra"</span>]</span>
<span id="cb611-36"><a href="#cb611-36" aria-hidden="true" tabindex="-1"></a>git<span class="op">-</span>tree<span class="op">-</span>sha1 <span class="op">=</span> <span class="st">"d92ad398961a3ed262d8bf04a1a2b8340f915fef"</span></span>
<span id="cb611-37"><a href="#cb611-37" aria-hidden="true" tabindex="-1"></a>uuid <span class="op">=</span> <span class="st">"621f4979-c628-5d54-868e-fcf4e3e8185c"</span></span>
<span id="cb611-38"><a href="#cb611-38" aria-hidden="true" tabindex="-1"></a>version <span class="op">=</span> <span class="st">"1.5.0"</span></span>
<span id="cb611-39"><a href="#cb611-39" aria-hidden="true" tabindex="-1"></a>weakdeps <span class="op">=</span> [<span class="st">"ChainRulesCore"</span>, <span class="st">"Test"</span>]</span>
<span id="cb611-40"><a href="#cb611-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-41"><a href="#cb611-41" aria-hidden="true" tabindex="-1"></a>    [deps.AbstractFFTs.extensions]</span>
<span id="cb611-42"><a href="#cb611-42" aria-hidden="true" tabindex="-1"></a>    AbstractFFTsChainRulesCoreExt <span class="op">=</span> <span class="st">"ChainRulesCore"</span></span>
<span id="cb611-43"><a href="#cb611-43" aria-hidden="true" tabindex="-1"></a>    AbstractFFTsTestExt <span class="op">=</span> <span class="st">"Test"</span></span>
<span id="cb611-44"><a href="#cb611-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-45"><a href="#cb611-45" aria-hidden="true" tabindex="-1"></a>[[deps.AbstractLattices]]</span>
<span id="cb611-46"><a href="#cb611-46" aria-hidden="true" tabindex="-1"></a>git<span class="op">-</span>tree<span class="op">-</span>sha1 <span class="op">=</span> <span class="st">"222ee9e50b98f51b5d78feb93dd928880df35f06"</span></span>
<span id="cb611-47"><a href="#cb611-47" aria-hidden="true" tabindex="-1"></a>uuid <span class="op">=</span> <span class="st">"398f06c4-4d28-53ec-89ca-5b2656b7603d"</span></span>
<span id="cb611-48"><a href="#cb611-48" aria-hidden="true" tabindex="-1"></a>version <span class="op">=</span> <span class="st">"0.3.0"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>These two files (<code>Project.toml</code> and <code>Manifest.toml</code>) are automatically created by Julia.</p>
</section>
<section id="creating-your-own-module-and-package" class="level4" data-number="4.4.2">
<h4 data-number="4.4.2" class="anchored" data-anchor-id="creating-your-own-module-and-package"><span class="header-section-number">4.4.2</span> Creating your own module and package</h4>
<div id="34347e7c" class="cell" data-execution_count="337">
<div class="sourceCode cell-code" id="cb612"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb612-1"><a href="#cb612-1" aria-hidden="true" tabindex="-1"></a>shell<span class="op">&gt;</span> cd job</span>
<span id="cb612-2"><a href="#cb612-2" aria-hidden="true" tabindex="-1"></a><span class="op">/</span>home<span class="op">/</span>yangrui<span class="op">/</span>temp<span class="op">/</span>job</span>
<span id="cb612-3"><a href="#cb612-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-4"><a href="#cb612-4" aria-hidden="true" tabindex="-1"></a>shell<span class="op">&gt;</span> tree</span>
<span id="cb612-5"><a href="#cb612-5" aria-hidden="true" tabindex="-1"></a>.</span>
<span id="cb612-6"><a href="#cb612-6" aria-hidden="true" tabindex="-1"></a>├── Manifest.toml</span>
<span id="cb612-7"><a href="#cb612-7" aria-hidden="true" tabindex="-1"></a>└── Project.toml</span>
<span id="cb612-8"><a href="#cb612-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-9"><a href="#cb612-9" aria-hidden="true" tabindex="-1"></a><span class="fl">0</span> directories, <span class="fl">2</span> files</span>
<span id="cb612-10"><a href="#cb612-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-11"><a href="#cb612-11" aria-hidden="true" tabindex="-1"></a><span class="co">## Create a package scaffolding with the `generate` command in the package mode</span></span>
<span id="cb612-12"><a href="#cb612-12" aria-hidden="true" tabindex="-1"></a><span class="co"># You can also use the PkgTemplate library to create peackages with a more sophisticated way</span></span>
<span id="cb612-13"><a href="#cb612-13" aria-hidden="true" tabindex="-1"></a>(job) pkg<span class="op">&gt;</span> generate ToyPackage</span>
<span id="cb612-14"><a href="#cb612-14" aria-hidden="true" tabindex="-1"></a>  Generating  project ToyPackage<span class="op">:</span></span>
<span id="cb612-15"><a href="#cb612-15" aria-hidden="true" tabindex="-1"></a>    ToyPackage<span class="op">/</span>Project.toml</span>
<span id="cb612-16"><a href="#cb612-16" aria-hidden="true" tabindex="-1"></a>    ToyPackage<span class="op">/</span>src<span class="op">/</span>ToyPackage.jl</span>
<span id="cb612-17"><a href="#cb612-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-18"><a href="#cb612-18" aria-hidden="true" tabindex="-1"></a>shell<span class="op">&gt;</span> tree</span>
<span id="cb612-19"><a href="#cb612-19" aria-hidden="true" tabindex="-1"></a>.</span>
<span id="cb612-20"><a href="#cb612-20" aria-hidden="true" tabindex="-1"></a>├── Manifest.toml</span>
<span id="cb612-21"><a href="#cb612-21" aria-hidden="true" tabindex="-1"></a>├── Project.toml</span>
<span id="cb612-22"><a href="#cb612-22" aria-hidden="true" tabindex="-1"></a>└── ToyPackage</span>
<span id="cb612-23"><a href="#cb612-23" aria-hidden="true" tabindex="-1"></a>    ├── Project.toml  <span class="co"># In fact, Julia package is also an environment, which means you can add other packages it depends on</span></span>
<span id="cb612-24"><a href="#cb612-24" aria-hidden="true" tabindex="-1"></a>    └── src</span>
<span id="cb612-25"><a href="#cb612-25" aria-hidden="true" tabindex="-1"></a>        └── ToyPackage.jl  <span class="co"># This file contains the top-level module having the same name as the package</span></span>
<span id="cb612-26"><a href="#cb612-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-27"><a href="#cb612-27" aria-hidden="true" tabindex="-1"></a><span class="fl">2</span> directories, <span class="fl">4</span> files</span>
<span id="cb612-28"><a href="#cb612-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-29"><a href="#cb612-29" aria-hidden="true" tabindex="-1"></a>shell<span class="op">&gt;</span> cat ToyPackage<span class="op">/</span>src<span class="op">/</span>ToyPackage.jl</span>
<span id="cb612-30"><a href="#cb612-30" aria-hidden="true" tabindex="-1"></a><span class="kw">module</span> ToyPackage  <span class="co"># You can now add code into this module (e.g. import names from other packages by using the `using` and `import` statements; specify what names should be exported by using the `export` statement; include other .jl files by using the `include()` function; you can also directly define variables, functions, types here)</span></span>
<span id="cb612-31"><a href="#cb612-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-32"><a href="#cb612-32" aria-hidden="true" tabindex="-1"></a><span class="fu">greet</span>() <span class="op">=</span> <span class="fu">print</span>(<span class="st">"Hello World!"</span>)</span>
<span id="cb612-33"><a href="#cb612-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-34"><a href="#cb612-34" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="co"># module ToyPackage</span></span>
<span id="cb612-35"><a href="#cb612-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-36"><a href="#cb612-36" aria-hidden="true" tabindex="-1"></a><span class="co">## To make packages you are developing available when importing them by using the `using` and `import` statements, you can use the `dev` command to add your package info into the metadata files of the job environment</span></span>
<span id="cb612-37"><a href="#cb612-37" aria-hidden="true" tabindex="-1"></a>(<span class="pp">@v1</span><span class="fl">.10</span>) pkg<span class="op">&gt;</span> activate job</span>
<span id="cb612-38"><a href="#cb612-38" aria-hidden="true" tabindex="-1"></a>  Activating <span class="kw">new</span> project at <span class="ss">`~/temp/job/job`</span></span>
<span id="cb612-39"><a href="#cb612-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-40"><a href="#cb612-40" aria-hidden="true" tabindex="-1"></a>shell<span class="op">&gt;</span> ls</span>
<span id="cb612-41"><a href="#cb612-41" aria-hidden="true" tabindex="-1"></a>Manifest.toml  Project.toml  ToyPackage</span>
<span id="cb612-42"><a href="#cb612-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-43"><a href="#cb612-43" aria-hidden="true" tabindex="-1"></a>(job) pkg<span class="op">&gt;</span> dev <span class="op">./</span>ToyPackage</span>
<span id="cb612-44"><a href="#cb612-44" aria-hidden="true" tabindex="-1"></a>   Resolving package versions<span class="op">...</span></span>
<span id="cb612-45"><a href="#cb612-45" aria-hidden="true" tabindex="-1"></a>    Updating <span class="ss">`~/temp/job/job/Project.toml`</span></span>
<span id="cb612-46"><a href="#cb612-46" aria-hidden="true" tabindex="-1"></a>  [<span class="fl">0</span>bc4f551] <span class="op">+</span> ToyPackage v0<span class="fl">.1.0</span> <span class="ss">`../ToyPackage`</span></span>
<span id="cb612-47"><a href="#cb612-47" aria-hidden="true" tabindex="-1"></a>    Updating <span class="ss">`~/temp/job/job/Manifest.toml`</span></span>
<span id="cb612-48"><a href="#cb612-48" aria-hidden="true" tabindex="-1"></a>  [<span class="fl">0</span>bc4f551] <span class="op">+</span> ToyPackage v0<span class="fl">.1.0</span> <span class="ss">`../ToyPackage`</span></span>
<span id="cb612-49"><a href="#cb612-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-50"><a href="#cb612-50" aria-hidden="true" tabindex="-1"></a>(job) pkg<span class="op">&gt;</span> status</span>
<span id="cb612-51"><a href="#cb612-51" aria-hidden="true" tabindex="-1"></a>Status <span class="ss">`~/temp/job/job/Project.toml`</span></span>
<span id="cb612-52"><a href="#cb612-52" aria-hidden="true" tabindex="-1"></a>  [<span class="fl">0</span>bc4f551] ToyPackage v0<span class="fl">.1.0</span> <span class="ss">`../ToyPackage`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Two packages are very useful when modifying and developing packages:</p>
<ul>
<li><p>OhMyREPL: provides syntax highlighting and history matching in the Julia REPL;</p></li>
<li><p>Revise: monitors code changes to packages loaded into the REPL and updates the REPL with these changes.</p></li>
</ul>
</section>
<section id="testing-your-package" class="level4" data-number="4.4.3">
<h4 data-number="4.4.3" class="anchored" data-anchor-id="testing-your-package"><span class="header-section-number">4.4.3</span> Testing your package</h4>
<p>You can use the Test package to test your package.</p>
<div id="e7fbc432" class="cell" data-execution_count="338">
<div class="sourceCode cell-code" id="cb613"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb613-1"><a href="#cb613-1" aria-hidden="true" tabindex="-1"></a><span class="co">## In the ToyPackage/test/runtests.jl  # This is essential</span></span>
<span id="cb613-2"><a href="#cb613-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">ToyPackage</span></span>
<span id="cb613-3"><a href="#cb613-3" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Test</span></span>
<span id="cb613-4"><a href="#cb613-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb613-5"><a href="#cb613-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Each test is contained in this block</span></span>
<span id="cb613-6"><a href="#cb613-6" aria-hidden="true" tabindex="-1"></a><span class="pp">@testset</span> <span class="st">"All tests"</span> <span class="cf">begin</span></span>
<span id="cb613-7"><a href="#cb613-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">include</span>(<span class="st">"trigtests.jl"</span>)</span>
<span id="cb613-8"><a href="#cb613-8" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb613-9"><a href="#cb613-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb613-10"><a href="#cb613-10" aria-hidden="true" tabindex="-1"></a><span class="co">## In the ToyPackage/test/trigtests.jl  # This is not essential if you write all tests into the above file</span></span>
<span id="cb613-11"><a href="#cb613-11" aria-hidden="true" tabindex="-1"></a><span class="pp">@testset</span> <span class="st">"trigonometric tests"</span> <span class="cf">begin</span></span>
<span id="cb613-12"><a href="#cb613-12" aria-hidden="true" tabindex="-1"></a>    <span class="pp">@test</span> <span class="fu">cos</span>(<span class="fl">0</span>) <span class="op">=</span> <span class="fl">1.0</span>  <span class="co"># Each test starts with the macro @test. For floating-point numbers, the results may be not exactly identical, so you can use the ≈ (\approx) or use the isapprox() function to specify the tolerance</span></span>
<span id="cb613-13"><a href="#cb613-13" aria-hidden="true" tabindex="-1"></a>    <span class="pp">@test</span> <span class="fu">sin</span>(<span class="fl">0</span>) <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb613-14"><a href="#cb613-14" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb613-15"><a href="#cb613-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb613-16"><a href="#cb613-16" aria-hidden="true" tabindex="-1"></a><span class="pp">@testset</span> <span class="st">"polynomial tests"</span> <span class="cf">begin</span></span>
<span id="cb613-17"><a href="#cb613-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Some more tests</span></span>
<span id="cb613-18"><a href="#cb613-18" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb613-19"><a href="#cb613-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb613-20"><a href="#cb613-20" aria-hidden="true" tabindex="-1"></a><span class="co">## Test your package with the `test` command in the package mode</span></span>
<span id="cb613-21"><a href="#cb613-21" aria-hidden="true" tabindex="-1"></a>(job) pkg<span class="op">&gt;</span> activate ToyPackage  <span class="co"># Of course, this is not essential. You can test the ToyPackage package in any enviroment which knows where this package is (e.g. in the job environment)</span></span>
<span id="cb613-22"><a href="#cb613-22" aria-hidden="true" tabindex="-1"></a>  Activating project at <span class="ss">`~/temp/job/ToyPackage`</span></span>
<span id="cb613-23"><a href="#cb613-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb613-24"><a href="#cb613-24" aria-hidden="true" tabindex="-1"></a>(ToyPackage) pkg<span class="op">&gt;</span> test ToyPackage  <span class="co"># If you are in the ToyPackage environment, only use the `test` command without the package name is fine</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="appendices" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="appendices"><span class="header-section-number">5</span> Appendices</h2>
<section id="heap-and-stack" class="level3" data-number="5.1">
<h3 data-number="5.1" class="anchored" data-anchor-id="heap-and-stack"><span class="header-section-number">5.1</span> Heap and Stack</h3>
<p>Heap and stack are two important regions in computer <strong>memory</strong> used for storing data.</p>
<p>There are some differences between heap and stack:</p>
<ol type="1">
<li><strong>Heap:</strong> the heap is a larger memory area that is <strong>manually requested and released</strong> by the programmer or the memory manager of a programming language. Memory allocation on the heap is more flexible and can be dynamically adjusted according to the needs of the program. However, since it requires tracking all allocated and released memory blocks, heap management is usually more complex and slower than stack management. <strong>The heap is used to store objects whose size and lifetime are uncertain, such as dynamic arrays, object instances, etc.</strong></li>
<li><strong>Stack</strong>: the stack is a memory area <strong>managed automatically</strong> by the operating system or runtime environment. It follows the Last In, First Out (LIFO) principle, meaning the last element entered is the first one to be removed. Memory allocation and deallocation on the stack are very fast because these operations only involve moving pointers, without the need for complex memory management algorithms. <strong>The stack is typically used to store local variables and context information for function calls.</strong></li>
</ol>
<p>Julia stores <strong>mutable data types in heap</strong>, and <strong>immutable data types in stack</strong>, which means the memory address pointed to an immutable value, such as an integer, may be unstable (changed often). So In Julia, you can only reliably get the memory address of mutable data by the follows:</p>
<div id="7af31e28" class="cell" data-execution_count="339">
<div class="sourceCode cell-code" id="cb614"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb614-1"><a href="#cb614-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>]</span>
<span id="cb614-2"><a href="#cb614-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb614-3"><a href="#cb614-3" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="fu">pointer_from_objref</span>(a)  <span class="co"># get the memory address of a Julia object as a Ptr (Ptr{T} means a memory address referring to data of type T)</span></span>
<span id="cb614-4"><a href="#cb614-4" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(p)</span>
<span id="cb614-5"><a href="#cb614-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb614-6"><a href="#cb614-6" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fu">unsafe_pointer_to_objref</span>(p)  <span class="co"># convert a Ptr to an object reference (assuming the pointer refers to a valid heap-allocated Julia object)</span></span>
<span id="cb614-7"><a href="#cb614-7" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(x)</span>
<span id="cb614-8"><a href="#cb614-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb614-9"><a href="#cb614-9" aria-hidden="true" tabindex="-1"></a><span class="co"># ===/≡ is used to judge whether two objects are identical:</span></span>
<span id="cb614-10"><a href="#cb614-10" aria-hidden="true" tabindex="-1"></a><span class="co"># first the types of the two are compared</span></span>
<span id="cb614-11"><a href="#cb614-11" aria-hidden="true" tabindex="-1"></a><span class="co"># then mutable objects are compared by memory address</span></span>
<span id="cb614-12"><a href="#cb614-12" aria-hidden="true" tabindex="-1"></a><span class="co"># and immutable objects are compared by contents at the bit level</span></span>
<span id="cb614-13"><a href="#cb614-13" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(a <span class="op">===</span> x)</span>
<span id="cb614-14"><a href="#cb614-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb614-15"><a href="#cb614-15" aria-hidden="true" tabindex="-1"></a><span class="co"># if x === y then objectid(x) == objectid(y)</span></span>
<span id="cb614-16"><a href="#cb614-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb614-17"><a href="#cb614-17" aria-hidden="true" tabindex="-1"></a><span class="co"># == is used to compare whether the contents of the two obejcts are identical though other properties may also be taken into account</span></span>
<span id="cb614-18"><a href="#cb614-18" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fl">1</span> <span class="co"># Int64</span></span>
<span id="cb614-19"><a href="#cb614-19" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="fl">1.0</span>  <span class="co"># Float64</span></span>
<span id="cb614-20"><a href="#cb614-20" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(x <span class="op">===</span> y)</span>
<span id="cb614-21"><a href="#cb614-21" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(x <span class="op">==</span> y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Ptr{Nothing} @0x0000724d4127d510
[1, 2, 3, 4, 5, 6]
true
false
true</code></pre>
</div>
</div>
</section>
<section id="julia-installation-and-configuration" class="level3" data-number="5.2">
<h3 data-number="5.2" class="anchored" data-anchor-id="julia-installation-and-configuration"><span class="header-section-number">5.2</span> Julia installation and configuration</h3>
<ol type="1">
<li>Setting some environmental variables globally and permanently</li>
</ol>
<p>Creating a <code>~/.julia/config/startup.jl</code> file with the contents:</p>
<div id="9d2b9085" class="cell" data-execution_count="340">
<div class="sourceCode cell-code" id="cb616"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb616-1"><a href="#cb616-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Customizing package server</span></span>
<span id="cb616-2"><a href="#cb616-2" aria-hidden="true" tabindex="-1"></a><span class="cn">ENV</span>[<span class="st">"JULIA_PKG_SERVER"</span>] <span class="op">=</span> <span class="st">"https://mirrors.pku.edu.cn/julia"</span></span>
<span id="cb616-3"><a href="#cb616-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb616-4"><a href="#cb616-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Customizing https proxy</span></span>
<span id="cb616-5"><a href="#cb616-5" aria-hidden="true" tabindex="-1"></a><span class="cn">ENV</span>[<span class="st">"https_proxy"</span>] <span class="op">=</span> <span class="st">"http://127.0.0.1:10809"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="julia-repl-mode" class="level3" data-number="5.3">
<h3 data-number="5.3" class="anchored" data-anchor-id="julia-repl-mode"><span class="header-section-number">5.3</span> Julia REPL mode</h3>
<ul>
<li><p><code>julia&gt;</code>: the standard Julia mode.</p></li>
<li><p><code>help?&gt;</code>: the help mode. Enter help mode by pressing <code>?</code>.</p></li>
<li><p><code>pkg&gt;</code>: the package mode for installing and removing packages. Enter package mode by pressing <code>]</code>.</p></li>
<li><p><code>shell&gt;</code>: the shell mode. Enter shell mode by pressing <code>;</code>.</p></li>
</ul>
<p>To back to the standard Julia mode, press <code>Backspace</code>.</p>
</section>
<section id="installing-third-party-packages" class="level3" data-number="5.4">
<h3 data-number="5.4" class="anchored" data-anchor-id="installing-third-party-packages"><span class="header-section-number">5.4</span> Installing third-party packages</h3>
<p>Pkg is Julia’s builtin package manager, which can be used to install, update, and remove packages.</p>
<p>You can install packages either by calling Pkg functions in the standard Julia mode or by executing Pkg commands in the package mode.</p>
<ul>
<li>In the package mode:</li>
</ul>
<div id="6b30b199" class="cell" data-execution_count="341">
<div class="sourceCode cell-code" id="cb617"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb617-1"><a href="#cb617-1" aria-hidden="true" tabindex="-1"></a><span class="co"># To install packages (multiple packages are separated by comma or space), use add</span></span>
<span id="cb617-2"><a href="#cb617-2" aria-hidden="true" tabindex="-1"></a>(<span class="pp">@v1</span><span class="fl">.9</span>) pkg<span class="op">&gt;</span> add JSON, StaticArrays</span>
<span id="cb617-3"><a href="#cb617-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb617-4"><a href="#cb617-4" aria-hidden="true" tabindex="-1"></a><span class="co"># To install packages with specified versions using the @ symbol</span></span>
<span id="cb617-5"><a href="#cb617-5" aria-hidden="true" tabindex="-1"></a>(<span class="pp">@v1</span><span class="fl">.9</span>) pkg<span class="op">&gt;</span> add CairoMakie@<span class="fl">0.5.10</span></span>
<span id="cb617-6"><a href="#cb617-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb617-7"><a href="#cb617-7" aria-hidden="true" tabindex="-1"></a><span class="co"># To remove packages, use rm or remove (some Pkg REPL commands have a short and a long version of the command)</span></span>
<span id="cb617-8"><a href="#cb617-8" aria-hidden="true" tabindex="-1"></a>(<span class="pp">@v1</span><span class="fl">.9</span>) pkg<span class="op">&gt;</span> rm JSON, StaticArrays</span>
<span id="cb617-9"><a href="#cb617-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb617-10"><a href="#cb617-10" aria-hidden="true" tabindex="-1"></a><span class="co"># To update packages, use up or update</span></span>
<span id="cb617-11"><a href="#cb617-11" aria-hidden="true" tabindex="-1"></a>(<span class="pp">@v1</span><span class="fl">.9</span>) pkg<span class="op">&gt;</span> up</span>
<span id="cb617-12"><a href="#cb617-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb617-13"><a href="#cb617-13" aria-hidden="true" tabindex="-1"></a><span class="co"># To see installed packages, use st or status</span></span>
<span id="cb617-14"><a href="#cb617-14" aria-hidden="true" tabindex="-1"></a>(<span class="pp">@v1</span><span class="fl">.9</span>) pkg<span class="op">&gt;</span> st</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the REPL prompt, <code>(@v1.9)</code> lets you know that <code>v1.9</code> is the active environment.</p>
<p>Different environments can have totally different packages and versions installed from another environment.</p>
<p>This makes it possible that you can construct an environment tailored to your project, which makes your project completely reproducible.</p>
</div>
</div>
<ul>
<li>In the standard Julia mode</li>
</ul>
<div id="c7ce5fc1" class="cell" data-execution_count="342">
<div class="sourceCode cell-code" id="cb618"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb618-1"><a href="#cb618-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="bu">Pkg</span>.<span class="fu">add</span>([<span class="st">"JSON"</span>, <span class="st">"StaticArrays"</span>])</span>
<span id="cb618-2"><a href="#cb618-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb618-3"><a href="#cb618-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Pkg.remove()</span></span>
<span id="cb618-4"><a href="#cb618-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Pkg.update()</span></span>
<span id="cb618-5"><a href="#cb618-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Pkg.status()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Powered by <a href="https://quarto.org">Quarto</a></p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/yr-neurospace/NeuroBorder/edit/main/Blogs/Computer/posts/Programming/Julia/julia_syntax_basics/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/yr-neurospace/NeuroBorder/blob/main/Blogs/Computer/posts/Programming/Julia/julia_syntax_basics/index.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/yr-neurospace/NeuroBorder/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>